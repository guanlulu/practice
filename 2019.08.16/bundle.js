/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "../node_modules/_jssip-emicnet@1.2.6@jssip-emicnet/dist/phonebar.js":
/*!***************************************************************************!*\
  !*** ../node_modules/_jssip-emicnet@1.2.6@jssip-emicnet/dist/phonebar.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("!function(e,t){ true?module.exports=t():undefined}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=119)}([function(e,t,n){(function(r){t.log=function(...e){return\"object\"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?\"%c\":\"\")+this.namespace+(this.useColors?\" %c\":\" \")+t[0]+(this.useColors?\"%c \":\" \")+\"+\"+e.exports.humanize(this.diff),!this.useColors)return;const n=\"color: \"+this.color;t.splice(1,0,n,\"color: inherit\");let r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,e=>{\"%%\"!==e&&(r++,\"%c\"===e&&(s=r))}),t.splice(s,0,n)},t.save=function(e){try{e?t.storage.setItem(\"debug\",e):t.storage.removeItem(\"debug\")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem(\"debug\")}catch(e){}!e&&void 0!==r&&\"env\"in r&&(e=r.env.DEBUG);return e},t.useColors=function(){if(\"undefined\"!=typeof window&&window.process&&(\"renderer\"===window.process.type||window.process.__nwjs))return!0;if(\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/))return!1;return\"undefined\"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||\"undefined\"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=[\"#0000CC\",\"#0000FF\",\"#0033CC\",\"#0033FF\",\"#0066CC\",\"#0066FF\",\"#0099CC\",\"#0099FF\",\"#00CC00\",\"#00CC33\",\"#00CC66\",\"#00CC99\",\"#00CCCC\",\"#00CCFF\",\"#3300CC\",\"#3300FF\",\"#3333CC\",\"#3333FF\",\"#3366CC\",\"#3366FF\",\"#3399CC\",\"#3399FF\",\"#33CC00\",\"#33CC33\",\"#33CC66\",\"#33CC99\",\"#33CCCC\",\"#33CCFF\",\"#6600CC\",\"#6600FF\",\"#6633CC\",\"#6633FF\",\"#66CC00\",\"#66CC33\",\"#9900CC\",\"#9900FF\",\"#9933CC\",\"#9933FF\",\"#99CC00\",\"#99CC33\",\"#CC0000\",\"#CC0033\",\"#CC0066\",\"#CC0099\",\"#CC00CC\",\"#CC00FF\",\"#CC3300\",\"#CC3333\",\"#CC3366\",\"#CC3399\",\"#CC33CC\",\"#CC33FF\",\"#CC6600\",\"#CC6633\",\"#CC9900\",\"#CC9933\",\"#CCCC00\",\"#CCCC33\",\"#FF0000\",\"#FF0033\",\"#FF0066\",\"#FF0099\",\"#FF00CC\",\"#FF00FF\",\"#FF3300\",\"#FF3333\",\"#FF3366\",\"#FF3399\",\"#FF33CC\",\"#FF33FF\",\"#FF6600\",\"#FF6633\",\"#FF9900\",\"#FF9933\",\"#FFCC00\",\"#FFCC33\"],e.exports=n(137)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return\"[UnexpectedJSONParseError]: \"+e.message}}}).call(this,n(69))},function(e,t,n){\"use strict\";var r=n(70);e.exports={USER_AGENT:\"\".concat(r.title,\" \").concat(r.version),SIP:\"sip\",SIPS:\"sips\",causes:{CONNECTION_ERROR:\"Connection Error\",REQUEST_TIMEOUT:\"Request Timeout\",SIP_FAILURE_CODE:\"SIP Failure Code\",INTERNAL_ERROR:\"Internal Error\",BUSY:\"Busy\",REJECTED:\"Rejected\",REDIRECTED:\"Redirected\",UNAVAILABLE:\"Unavailable\",NOT_FOUND:\"Not Found\",ADDRESS_INCOMPLETE:\"Address Incomplete\",INCOMPATIBLE_SDP:\"Incompatible SDP\",MISSING_SDP:\"Missing SDP\",AUTHENTICATION_ERROR:\"Authentication Error\",BYE:\"Terminated\",WEBRTC_ERROR:\"WebRTC Error\",CANCELED:\"Canceled\",NO_ANSWER:\"No Answer\",EXPIRES:\"Expires\",NO_ACK:\"No ACK\",DIALOG_ERROR:\"Dialog Error\",USER_DENIED_MEDIA_ACCESS:\"User Denied Media Access\",BAD_MEDIA_DESCRIPTION:\"Bad Media Description\",RTP_TIMEOUT:\"RTP Timeout\"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:\"ACK\",BYE:\"BYE\",CANCEL:\"CANCEL\",INFO:\"INFO\",INVITE:\"INVITE\",MESSAGE:\"MESSAGE\",NOTIFY:\"NOTIFY\",OPTIONS:\"OPTIONS\",REGISTER:\"REGISTER\",REFER:\"REFER\",UPDATE:\"UPDATE\",SUBSCRIBE:\"SUBSCRIBE\",REASON_PHRASE:{100:\"Trying\",180:\"Ringing\",181:\"Call Is Being Forwarded\",182:\"Queued\",183:\"Session Progress\",199:\"Early Dialog Terminated\",200:\"OK\",202:\"Accepted\",204:\"No Notification\",300:\"Multiple Choices\",301:\"Moved Permanently\",302:\"Moved Temporarily\",305:\"Use Proxy\",380:\"Alternative Service\",400:\"Bad Request\",401:\"Unauthorized\",402:\"Payment Required\",403:\"Forbidden\",404:\"Not Found\",405:\"Method Not Allowed\",406:\"Not Acceptable\",407:\"Proxy Authentication Required\",408:\"Request Timeout\",410:\"Gone\",412:\"Conditional Request Failed\",413:\"Request Entity Too Large\",414:\"Request-URI Too Long\",415:\"Unsupported Media Type\",416:\"Unsupported URI Scheme\",417:\"Unknown Resource-Priority\",420:\"Bad Extension\",421:\"Extension Required\",422:\"Session Interval Too Small\",423:\"Interval Too Brief\",424:\"Bad Location Information\",428:\"Use Identity Header\",429:\"Provide Referrer Identity\",430:\"Flow Failed\",433:\"Anonymity Disallowed\",436:\"Bad Identity-Info\",437:\"Unsupported Certificate\",438:\"Invalid Identity Header\",439:\"First Hop Lacks Outbound Support\",440:\"Max-Breadth Exceeded\",469:\"Bad Info Package\",470:\"Consent Needed\",478:\"Unresolvable Destination\",480:\"Temporarily Unavailable\",481:\"Call/Transaction Does Not Exist\",482:\"Loop Detected\",483:\"Too Many Hops\",484:\"Address Incomplete\",485:\"Ambiguous\",486:\"Busy Here\",487:\"Request Terminated\",488:\"Not Acceptable Here\",489:\"Bad Event\",491:\"Request Pending\",493:\"Undecipherable\",494:\"Security Agreement Required\",500:\"JsSIP Internal Error\",501:\"Not Implemented\",502:\"Bad Gateway\",503:\"Service Unavailable\",504:\"Server Time-out\",505:\"Version Not Supported\",513:\"Message Too Large\",580:\"Precondition Failure\",600:\"Busy Everywhere\",603:\"Decline\",604:\"Does Not Exist Anywhere\",606:\"Not Acceptable\"},ALLOWED_METHODS:\"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO\",ACCEPTED_BODY_TYPES:\"application/sdp, application/dtmf-relay\",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60}},function(e,t,n){\"use strict\";function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var s=n(1),i=n(17),o=n(6);t.str_utf8_length=function(e){return unescape(encodeURIComponent(e)).length};var a=t.isFunction=function(e){return void 0!==e&&\"[object Function]\"===Object.prototype.toString.call(e)};t.isString=function(e){return void 0!==e&&\"[object String]\"===Object.prototype.toString.call(e)},t.isDecimal=function(e){return!isNaN(e)&&parseFloat(e)===parseInt(e,10)},t.isEmpty=function(e){return null===e||\"\"===e||void 0===e||Array.isArray(e)&&0===e.length||\"number\"==typeof e&&isNaN(e)},t.hasMethods=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var s=0,i=n;s<i.length;s++){var o=i[s];if(a(e[o]))return!1}return!0};var u=t.createRandomToken=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=\"\";for(t=0;t<e;t++)r+=(Math.random()*n|0).toString(n);return r};t.newTag=function(){return u(10)},t.newUUID=function(){return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return(\"x\"===e?t:3&t|8).toString(16)})},t.hostType=function(e){if(e)return-1!==(e=o.parse(e,\"host\"))?e.host_type:void 0};var l=t.escapeUser=function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,\":\").replace(/%2B/gi,\"+\").replace(/%3F/gi,\"?\").replace(/%2F/gi,\"/\")};t.normalizeTarget=function(e,t){if(e){if(e instanceof i)return e;if(\"string\"==typeof e){var n,r,o,a=e.split(\"@\");switch(a.length){case 1:if(!t)return;n=e,r=t;break;case 2:n=a[0],r=a[1];break;default:n=a.slice(0,a.length-1).join(\"@\"),r=a[a.length-1]}return n=n.replace(/^(sips?|tel):/i,\"\"),/^[-.()]*\\+?[0-9\\-.()]+$/.test(n)&&(n=n.replace(/[-.()]/g,\"\")),e=\"\".concat(s.SIP,\":\").concat(l(n),\"@\").concat(r),(o=i.parse(e))?o:void 0}}else;},t.headerize=function(e){var t,n={\"Call-Id\":\"Call-ID\",Cseq:\"CSeq\",\"Www-Authenticate\":\"WWW-Authenticate\"},r=e.toLowerCase().replace(/_/g,\"-\").split(\"-\"),s=\"\",i=r.length;for(t=0;t<i;t++)0!==t&&(s+=\"-\"),s+=r[t].charAt(0).toUpperCase()+r[t].substring(1);return n[s]&&(s=n[s]),s},t.sipErrorCause=function(e){for(var t in s.SIP_ERROR_CAUSES)if(-1!==s.SIP_ERROR_CAUSES[t].indexOf(e))return s.causes[t];return s.causes.SIP_FAILURE_CODE},t.getRandomTestNetIP=function(){return\"192.0.2.\".concat((e=1,t=254,Math.floor(Math.random()*(t-e+1)+e)));var e,t},t.calculateMD5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n=2147483648&e,r=2147483648&t,s=1073741824&e,i=1073741824&t,o=(1073741823&e)+(1073741823&t);return s&i?2147483648^o^n^r:s|i?1073741824&o?3221225472^o^n^r:1073741824^o^n^r:o^n^r}function r(e,r,s,i,o,a,u){return e=n(e,n(n(function(e,t,n){return e&t|~e&n}(r,s,i),o),u)),n(t(e,a),r)}function s(e,r,s,i,o,a,u){return e=n(e,n(n(function(e,t,n){return e&n|t&~n}(r,s,i),o),u)),n(t(e,a),r)}function i(e,r,s,i,o,a,u){return e=n(e,n(n(function(e,t,n){return e^t^n}(r,s,i),o),u)),n(t(e,a),r)}function o(e,r,s,i,o,a,u){return e=n(e,n(n(function(e,t,n){return t^(e|~n)}(r,s,i),o),u)),n(t(e,a),r)}function a(e){var t,n=\"\",r=\"\";for(t=0;t<=3;t++)n+=(r=\"0\".concat((e>>>8*t&255).toString(16))).substr(r.length-2,2);return n}var u,l,c,f,h,d,p,_,v,m;for(u=function(e){for(var t,n=e.length,r=n+8,s=16*((r-r%64)/64+1),i=new Array(s-1),o=0,a=0;a<n;)o=a%4*8,i[t=(a-a%4)/4]=i[t]|e.charCodeAt(a)<<o,a++;return o=a%4*8,i[t=(a-a%4)/4]=i[t]|128<<o,i[s-2]=n<<3,i[s-1]=n>>>29,i}(e=function(e){e=e.replace(/\\r\\n/g,\"\\n\");for(var t=\"\",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e)),p=1732584193,_=4023233417,v=2562383102,m=271733878,l=0;l<u.length;l+=16)c=p,f=_,h=v,d=m,p=r(p,_,v,m,u[l+0],7,3614090360),m=r(m,p,_,v,u[l+1],12,3905402710),v=r(v,m,p,_,u[l+2],17,606105819),_=r(_,v,m,p,u[l+3],22,3250441966),p=r(p,_,v,m,u[l+4],7,4118548399),m=r(m,p,_,v,u[l+5],12,1200080426),v=r(v,m,p,_,u[l+6],17,2821735955),_=r(_,v,m,p,u[l+7],22,4249261313),p=r(p,_,v,m,u[l+8],7,1770035416),m=r(m,p,_,v,u[l+9],12,2336552879),v=r(v,m,p,_,u[l+10],17,4294925233),_=r(_,v,m,p,u[l+11],22,2304563134),p=r(p,_,v,m,u[l+12],7,1804603682),m=r(m,p,_,v,u[l+13],12,4254626195),v=r(v,m,p,_,u[l+14],17,2792965006),p=s(p,_=r(_,v,m,p,u[l+15],22,1236535329),v,m,u[l+1],5,4129170786),m=s(m,p,_,v,u[l+6],9,3225465664),v=s(v,m,p,_,u[l+11],14,643717713),_=s(_,v,m,p,u[l+0],20,3921069994),p=s(p,_,v,m,u[l+5],5,3593408605),m=s(m,p,_,v,u[l+10],9,38016083),v=s(v,m,p,_,u[l+15],14,3634488961),_=s(_,v,m,p,u[l+4],20,3889429448),p=s(p,_,v,m,u[l+9],5,568446438),m=s(m,p,_,v,u[l+14],9,3275163606),v=s(v,m,p,_,u[l+3],14,4107603335),_=s(_,v,m,p,u[l+8],20,1163531501),p=s(p,_,v,m,u[l+13],5,2850285829),m=s(m,p,_,v,u[l+2],9,4243563512),v=s(v,m,p,_,u[l+7],14,1735328473),p=i(p,_=s(_,v,m,p,u[l+12],20,2368359562),v,m,u[l+5],4,4294588738),m=i(m,p,_,v,u[l+8],11,2272392833),v=i(v,m,p,_,u[l+11],16,1839030562),_=i(_,v,m,p,u[l+14],23,4259657740),p=i(p,_,v,m,u[l+1],4,2763975236),m=i(m,p,_,v,u[l+4],11,1272893353),v=i(v,m,p,_,u[l+7],16,4139469664),_=i(_,v,m,p,u[l+10],23,3200236656),p=i(p,_,v,m,u[l+13],4,681279174),m=i(m,p,_,v,u[l+0],11,3936430074),v=i(v,m,p,_,u[l+3],16,3572445317),_=i(_,v,m,p,u[l+6],23,76029189),p=i(p,_,v,m,u[l+9],4,3654602809),m=i(m,p,_,v,u[l+12],11,3873151461),v=i(v,m,p,_,u[l+15],16,530742520),p=o(p,_=i(_,v,m,p,u[l+2],23,3299628645),v,m,u[l+0],6,4096336452),m=o(m,p,_,v,u[l+7],10,1126891415),v=o(v,m,p,_,u[l+14],15,2878612391),_=o(_,v,m,p,u[l+5],21,4237533241),p=o(p,_,v,m,u[l+12],6,1700485571),m=o(m,p,_,v,u[l+3],10,2399980690),v=o(v,m,p,_,u[l+10],15,4293915773),_=o(_,v,m,p,u[l+1],21,2240044497),p=o(p,_,v,m,u[l+8],6,1873313359),m=o(m,p,_,v,u[l+15],10,4264355552),v=o(v,m,p,_,u[l+6],15,2734768916),_=o(_,v,m,p,u[l+13],21,1309151649),p=o(p,_,v,m,u[l+4],6,4149444226),m=o(m,p,_,v,u[l+11],10,3174756917),v=o(v,m,p,_,u[l+2],15,718787259),_=o(_,v,m,p,u[l+9],21,3951481745),p=n(p,c),_=n(_,f),v=n(v,h),m=n(m,d);return(a(p)+a(_)+a(v)+a(m)).toLowerCase()},t.closeMediaStream=function(e){if(e)try{var t;if(e.getTracks){t=e.getTracks();var n=!0,s=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.stop()}}catch(e){s=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}}else{t=e.getAudioTracks();var u=!0,l=!1,c=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){f.value.stop()}}catch(e){l=!0,c=e}finally{try{u||null==h.return||h.return()}finally{if(l)throw c}}t=e.getVideoTracks();var d=!0,p=!1,_=void 0;try{for(var v,m=t[Symbol.iterator]();!(d=(v=m.next()).done);d=!0){v.value.stop()}}catch(e){p=!0,_=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw _}}}}catch(t){\"function\"!=typeof e.stop&&\"object\"!==r(e.stop)||e.stop()}},t.cloneArray=function(e){return e&&e.slice()||[]}},function(e,t){var n=e.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=n)},function(e,t,n){var r=n(41)(\"wks\"),s=n(27),i=n(3).Symbol,o=\"function\"==typeof i;(e.exports=function(e){return r[e]||(r[e]=o&&i[e]||(o?i:s)(\"Symbol.\"+e))}).store=r},function(e,t){var n=e.exports={version:\"2.5.7\"};\"number\"==typeof __e&&(__e=n)},function(e,t,n){\"use strict\";e.exports=function(){function e(e){return'\"'+e.replace(/\\\\/g,\"\\\\\\\\\").replace(/\"/g,'\\\\\"').replace(/\\x08/g,\"\\\\b\").replace(/\\t/g,\"\\\\t\").replace(/\\n/g,\"\\\\n\").replace(/\\f/g,\"\\\\f\").replace(/\\r/g,\"\\\\r\").replace(/[\\x00-\\x07\\x0B\\x0E-\\x1F\\x80-\\uFFFF]/g,escape)+'\"'}var t={parse:function(t,r){var s={CRLF:c,DIGIT:f,ALPHA:h,HEXDIG:d,WSP:p,OCTET:_,DQUOTE:v,SP:m,HTAB:g,alphanum:y,reserved:S,unreserved:T,mark:b,escaped:C,LWS:E,SWS:A,HCOLON:w,TEXT_UTF8_TRIM:R,TEXT_UTF8char:I,UTF8_NONASCII:O,UTF8_CONT:k,LHEX:function(){var e;null===(e=f())&&(/^[a-f]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[a-f]\")));return e},token:x,token_nodot:N,separators:function(){var e;40===t.charCodeAt(i)?(e=\"(\",i++):(e=null,0===o&&l('\"(\"'));null===e&&(41===t.charCodeAt(i)?(e=\")\",i++):(e=null,0===o&&l('\")\"')),null===e&&(60===t.charCodeAt(i)?(e=\"<\",i++):(e=null,0===o&&l('\"<\"')),null===e&&(62===t.charCodeAt(i)?(e=\">\",i++):(e=null,0===o&&l('\">\"')),null===e&&(64===t.charCodeAt(i)?(e=\"@\",i++):(e=null,0===o&&l('\"@\"')),null===e&&(44===t.charCodeAt(i)?(e=\",\",i++):(e=null,0===o&&l('\",\"')),null===e&&(59===t.charCodeAt(i)?(e=\";\",i++):(e=null,0===o&&l('\";\"')),null===e&&(58===t.charCodeAt(i)?(e=\":\",i++):(e=null,0===o&&l('\":\"')),null===e&&(92===t.charCodeAt(i)?(e=\"\\\\\",i++):(e=null,0===o&&l('\"\\\\\\\\\"')),null===e&&null===(e=v())&&(47===t.charCodeAt(i)?(e=\"/\",i++):(e=null,0===o&&l('\"/\"')),null===e&&(91===t.charCodeAt(i)?(e=\"[\",i++):(e=null,0===o&&l('\"[\"')),null===e&&(93===t.charCodeAt(i)?(e=\"]\",i++):(e=null,0===o&&l('\"]\"')),null===e&&(63===t.charCodeAt(i)?(e=\"?\",i++):(e=null,0===o&&l('\"?\"')),null===e&&(61===t.charCodeAt(i)?(e=\"=\",i++):(e=null,0===o&&l('\"=\"')),null===e&&(123===t.charCodeAt(i)?(e=\"{\",i++):(e=null,0===o&&l('\"{\"')),null===e&&(125===t.charCodeAt(i)?(e=\"}\",i++):(e=null,0===o&&l('\"}\"')),null===e&&null===(e=m())&&(e=g()))))))))))))))));return e},word:P,STAR:D,SLASH:U,EQUAL:M,LPAREN:L,RPAREN:F,RAQUOT:q,LAQUOT:H,COMMA:j,SEMI:B,COLON:G,LDQUOT:W,RDQUOT:J,comment:function e(){var t,n,r;var s;s=i;t=L();if(null!==t){for(n=[],null===(r=K())&&null===(r=Y())&&(r=e());null!==r;)n.push(r),null===(r=K())&&null===(r=Y())&&(r=e());null!==n&&null!==(r=F())?t=[t,n,r]:(t=null,i=s)}else t=null,i=s;return t},ctext:K,quoted_string:V,quoted_string_clean:X,qdtext:z,quoted_pair:Y,SIP_URI_noparams:$,SIP_URI:Q,uri_scheme:Z,uri_scheme_sips:ee,uri_scheme_sip:te,userinfo:ne,user:re,user_unreserved:se,password:ie,hostport:oe,host:ae,hostname:ue,domainlabel:le,toplabel:ce,IPv6reference:fe,IPv6address:he,h16:de,ls32:pe,IPv4address:_e,dec_octet:ve,port:me,uri_parameters:ge,uri_parameter:ye,transport_param:Se,user_param:Te,method_param:be,ttl_param:Ce,maddr_param:Ee,lr_param:Ae,other_param:we,pname:Re,pvalue:Ie,paramchar:Oe,param_unreserved:ke,headers:xe,header:Ne,hname:Pe,hvalue:De,hnv_unreserved:Ue,Request_Response:function(){var e;null===(e=ft())&&(e=Me());return e},Request_Line:Me,Request_URI:Le,absoluteURI:Fe,hier_part:qe,net_path:He,abs_path:je,opaque_part:Be,uric:Ge,uric_no_slash:We,path_segments:Je,segment:Ke,param:Ve,pchar:Xe,scheme:ze,authority:Ye,srvr:$e,reg_name:Qe,query:Ze,SIP_Version:et,INVITEm:tt,ACKm:nt,OPTIONSm:rt,BYEm:st,CANCELm:it,REGISTERm:ot,SUBSCRIBEm:at,NOTIFYm:ut,REFERm:lt,Method:ct,Status_Line:ft,Status_Code:ht,extension_code:dt,Reason_Phrase:pt,Allow_Events:function(){var e,t,n,r,s,o;if(s=i,null!==(e=Ft())){for(t=[],o=i,null!==(n=j())&&null!==(r=Ft())?n=[n,r]:(n=null,i=o);null!==n;)t.push(n),o=i,null!==(n=j())&&null!==(r=Ft())?n=[n,r]:(n=null,i=o);null!==t?e=[e,t]:(e=null,i=s)}else e=null,i=s;return e},Call_ID:function(){var e,n,r,s,a,u;s=i,a=i,null!==(e=P())?(u=i,64===t.charCodeAt(i)?(n=\"@\",i++):(n=null,0===o&&l('\"@\"')),null!==n&&null!==(r=P())?n=[n,r]:(n=null,i=u),null!==(n=null!==n?n:\"\")?e=[e,n]:(e=null,i=a)):(e=null,i=a);null!==e&&(e=function(e){Hn=t.substring(i,e)}(s));null===e&&(i=s);return e},Contact:function(){var e,t,n,r,s,o,a;if(s=i,null===(e=D()))if(o=i,null!==(e=_t())){for(t=[],a=i,null!==(n=j())&&null!==(r=_t())?n=[n,r]:(n=null,i=a);null!==n;)t.push(n),a=i,null!==(n=j())&&null!==(r=_t())?n=[n,r]:(n=null,i=a);null!==t?e=[e,t]:(e=null,i=o)}else e=null,i=o;null!==e&&(e=function(e){var t,n;for(n=Hn.multi_header.length,t=0;t<n;t++)if(null===Hn.multi_header[t].parsed){Hn=null;break}Hn=null!==Hn?Hn.multi_header:-1}());null===e&&(i=s);return e},contact_param:_t,name_addr:vt,display_name:mt,contact_params:gt,c_p_q:yt,c_p_expires:St,delta_seconds:Tt,qvalue:bt,generic_param:Ct,gen_value:Et,Content_Disposition:function(){var e,t,n,r,s,o;if(s=i,null!==(e=At())){for(t=[],o=i,null!==(n=B())&&null!==(r=wt())?n=[n,r]:(n=null,i=o);null!==n;)t.push(n),o=i,null!==(n=B())&&null!==(r=wt())?n=[n,r]:(n=null,i=o);null!==t?e=[e,t]:(e=null,i=s)}else e=null,i=s;return e},disp_type:At,disp_param:wt,handling_param:Rt,Content_Encoding:function(){var e,t,n,r,s,o;if(s=i,null!==(e=x())){for(t=[],o=i,null!==(n=j())&&null!==(r=x())?n=[n,r]:(n=null,i=o);null!==n;)t.push(n),o=i,null!==(n=j())&&null!==(r=x())?n=[n,r]:(n=null,i=o);null!==t?e=[e,t]:(e=null,i=s)}else e=null,i=s;return e},Content_Length:function(){var e,t,n;if(n=i,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;null!==e&&(e=void(Hn=parseInt(e.join(\"\"))));null===e&&(i=n);return e},Content_Type:function(){var e,n;n=i,null!==(e=It())&&(e=function(e){Hn=t.substring(i,e)}(n));null===e&&(i=n);return e},media_type:It,m_type:Ot,discrete_type:kt,composite_type:xt,extension_token:Nt,x_token:Pt,m_subtype:Dt,m_parameter:Ut,m_value:Mt,CSeq:function(){var e,t,n,r;r=i,null!==(e=Lt())&&null!==(t=E())&&null!==(n=ct())?e=[e,t,n]:(e=null,i=r);return e},CSeq_value:Lt,Expires:function(){var e,t;t=i,null!==(e=Tt())&&(e=void(Hn=e));null===e&&(i=t);return e},Event:function(){var e,t,n,r,s,o,a;if(s=i,o=i,null!==(e=Ft())){for(t=[],a=i,null!==(n=B())&&null!==(r=Ct())?n=[n,r]:(n=null,i=a);null!==n;)t.push(n),a=i,null!==(n=B())&&null!==(r=Ct())?n=[n,r]:(n=null,i=a);null!==t?e=[e,t]:(e=null,i=o)}else e=null,i=o;null!==e&&(u=e[0],e=void(Hn.event=u.join(\"\").toLowerCase()));var u;null===e&&(i=s);return e},event_type:Ft,From:function(){var e,t,n,r,s,o,a;s=i,o=i,null===(e=$())&&(e=vt());if(null!==e){for(t=[],a=i,null!==(n=B())&&null!==(r=qt())?n=[n,r]:(n=null,i=a);null!==n;)t.push(n),a=i,null!==(n=B())&&null!==(r=qt())?n=[n,r]:(n=null,i=a);null!==t?e=[e,t]:(e=null,i=o)}else e=null,i=o;null!==e&&(e=function(e){var t=Hn.tag;try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params),t&&Hn.setParam(\"tag\",t)}catch(e){Hn=-1}}());null===e&&(i=s);return e},from_param:qt,tag_param:Ht,Max_Forwards:function(){var e,t,n;if(n=i,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;null!==e&&(e=void(Hn=parseInt(e.join(\"\"))));null===e&&(i=n);return e},Min_Expires:function(){var e,t;t=i,null!==(e=Tt())&&(e=void(Hn=e));null===e&&(i=t);return e},Name_Addr_Header:function(){var e,t,n,r,s,o,a,u,l,c;u=i,l=i,e=[],t=mt();for(;null!==t;)e.push(t),t=mt();if(null!==e)if(null!==(t=H()))if(null!==(n=Q()))if(null!==(r=q())){for(s=[],c=i,null!==(o=B())&&null!==(a=Ct())?o=[o,a]:(o=null,i=c);null!==o;)s.push(o),c=i,null!==(o=B())&&null!==(a=Ct())?o=[o,a]:(o=null,i=c);null!==s?e=[e,t,n,r,s]:(e=null,i=l)}else e=null,i=l;else e=null,i=l;else e=null,i=l;else e=null,i=l;null!==e&&(e=function(e){try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params)}catch(e){Hn=-1}}());null===e&&(i=u);return e},Proxy_Authenticate:function(){return jt()},challenge:jt,other_challenge:Bt,auth_param:Gt,digest_cln:Wt,realm:Jt,realm_value:Kt,domain:Vt,URI:Xt,nonce:zt,nonce_value:Yt,opaque:$t,stale:Qt,algorithm:Zt,qop_options:en,qop_value:tn,Proxy_Require:function(){var e,t,n,r,s,o;if(s=i,null!==(e=x())){for(t=[],o=i,null!==(n=j())&&null!==(r=x())?n=[n,r]:(n=null,i=o);null!==n;)t.push(n),o=i,null!==(n=j())&&null!==(r=x())?n=[n,r]:(n=null,i=o);null!==t?e=[e,t]:(e=null,i=s)}else e=null,i=s;return e},Record_Route:function(){var e,t,n,r,s,o,a;if(s=i,o=i,null!==(e=nn())){for(t=[],a=i,null!==(n=j())&&null!==(r=nn())?n=[n,r]:(n=null,i=a);null!==n;)t.push(n),a=i,null!==(n=j())&&null!==(r=nn())?n=[n,r]:(n=null,i=a);null!==t?e=[e,t]:(e=null,i=o)}else e=null,i=o;null!==e&&(e=function(e){var t,n;for(n=Hn.multi_header.length,t=0;t<n;t++)if(null===Hn.multi_header[t].parsed){Hn=null;break}Hn=null!==Hn?Hn.multi_header:-1}());null===e&&(i=s);return e},rec_route:nn,Reason:function(){var e,n,r,s,a,u,c;a=i,u=i,\"sip\"===t.substr(i,3).toLowerCase()?(e=t.substr(i,3),i+=3):(e=null,0===o&&l('\"SIP\"'));null===e&&(e=x());if(null!==e){for(n=[],c=i,null!==(r=B())&&null!==(s=rn())?r=[r,s]:(r=null,i=c);null!==r;)n.push(r),c=i,null!==(r=B())&&null!==(s=rn())?r=[r,s]:(r=null,i=c);null!==n?e=[e,n]:(e=null,i=u)}else e=null,i=u;null!==e&&(e=function(e,t){if(Hn.protocol=t.toLowerCase(),Hn.params||(Hn.params={}),Hn.params.text&&'\"'===Hn.params.text[0]){var n=Hn.params.text;Hn.text=n.substring(1,n.length-1),delete Hn.params.text}}(0,e[0]));null===e&&(i=a);return e},reason_param:rn,reason_cause:sn,Require:function(){var e,t,n,r,s,o;if(s=i,null!==(e=x())){for(t=[],o=i,null!==(n=j())&&null!==(r=x())?n=[n,r]:(n=null,i=o);null!==n;)t.push(n),o=i,null!==(n=j())&&null!==(r=x())?n=[n,r]:(n=null,i=o);null!==t?e=[e,t]:(e=null,i=s)}else e=null,i=s;return e},Route:function(){var e,t,n,r,s,o;if(s=i,null!==(e=on())){for(t=[],o=i,null!==(n=j())&&null!==(r=on())?n=[n,r]:(n=null,i=o);null!==n;)t.push(n),o=i,null!==(n=j())&&null!==(r=on())?n=[n,r]:(n=null,i=o);null!==t?e=[e,t]:(e=null,i=s)}else e=null,i=s;return e},route_param:on,Subscription_State:function(){var e,t,n,r,s,o;if(s=i,null!==(e=an())){for(t=[],o=i,null!==(n=B())&&null!==(r=un())?n=[n,r]:(n=null,i=o);null!==n;)t.push(n),o=i,null!==(n=B())&&null!==(r=un())?n=[n,r]:(n=null,i=o);null!==t?e=[e,t]:(e=null,i=s)}else e=null,i=s;return e},substate_value:an,subexp_params:un,event_reason_value:ln,Subject:function(){var e;return e=null!==(e=R())?e:\"\"},Supported:function(){var e,t,n,r,s,o;if(s=i,null!==(e=x())){for(t=[],o=i,null!==(n=j())&&null!==(r=x())?n=[n,r]:(n=null,i=o);null!==n;)t.push(n),o=i,null!==(n=j())&&null!==(r=x())?n=[n,r]:(n=null,i=o);null!==t?e=[e,t]:(e=null,i=s)}else e=null,i=s;return e=null!==e?e:\"\"},To:function(){var e,t,n,r,s,o,a;s=i,o=i,null===(e=$())&&(e=vt());if(null!==e){for(t=[],a=i,null!==(n=B())&&null!==(r=cn())?n=[n,r]:(n=null,i=a);null!==n;)t.push(n),a=i,null!==(n=B())&&null!==(r=cn())?n=[n,r]:(n=null,i=a);null!==t?e=[e,t]:(e=null,i=o)}else e=null,i=o;null!==e&&(e=function(e){var t=Hn.tag;try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params),t&&Hn.setParam(\"tag\",t)}catch(e){Hn=-1}}());null===e&&(i=s);return e},to_param:cn,Via:function(){var e,t,n,r,s,o;if(s=i,null!==(e=fn())){for(t=[],o=i,null!==(n=j())&&null!==(r=fn())?n=[n,r]:(n=null,i=o);null!==n;)t.push(n),o=i,null!==(n=j())&&null!==(r=fn())?n=[n,r]:(n=null,i=o);null!==t?e=[e,t]:(e=null,i=s)}else e=null,i=s;return e},via_param:fn,via_params:hn,via_ttl:dn,via_maddr:pn,via_received:_n,via_branch:vn,response_port:mn,sent_protocol:gn,protocol_name:yn,transport:Sn,sent_by:Tn,via_host:bn,via_port:Cn,ttl:En,WWW_Authenticate:function(){return jt()},Session_Expires:function(){var e,t,n,r,s,o;if(s=i,null!==(e=An())){for(t=[],o=i,null!==(n=B())&&null!==(r=wn())?n=[n,r]:(n=null,i=o);null!==n;)t.push(n),o=i,null!==(n=B())&&null!==(r=wn())?n=[n,r]:(n=null,i=o);null!==t?e=[e,t]:(e=null,i=s)}else e=null,i=s;return e},s_e_expires:An,s_e_params:wn,s_e_refresher:Rn,extension_header:function(){var e,t,n,r;r=i,null!==(e=x())&&null!==(t=w())&&null!==(n=In())?e=[e,t,n]:(e=null,i=r);return e},header_value:In,message_body:function(){var e,t;e=[],t=_();for(;null!==t;)e.push(t),t=_();return e},uuid_URI:function(){var e,n,r;r=i,\"uuid:\"===t.substr(i,5)?(e=\"uuid:\",i+=5):(e=null,0===o&&l('\"uuid:\"'));null!==e&&null!==(n=On())?e=[e,n]:(e=null,i=r);return e},uuid:On,hex4:kn,hex8:xn,hex12:Nn,Refer_To:function(){var e,t,n,r,s,o,a;s=i,o=i,null===(e=$())&&(e=vt());if(null!==e){for(t=[],a=i,null!==(n=B())&&null!==(r=Ct())?n=[n,r]:(n=null,i=a);null!==n;)t.push(n),a=i,null!==(n=B())&&null!==(r=Ct())?n=[n,r]:(n=null,i=a);null!==t?e=[e,t]:(e=null,i=o)}else e=null,i=o;null!==e&&(e=function(e){try{Hn=new qn(Hn.uri,Hn.display_name,Hn.params)}catch(e){Hn=-1}}());null===e&&(i=s);return e},Replaces:function(){var e,t,n,r,s,o;if(s=i,null!==(e=Pn())){for(t=[],o=i,null!==(n=B())&&null!==(r=Dn())?n=[n,r]:(n=null,i=o);null!==n;)t.push(n),o=i,null!==(n=B())&&null!==(r=Dn())?n=[n,r]:(n=null,i=o);null!==t?e=[e,t]:(e=null,i=s)}else e=null,i=s;return e},call_id:Pn,replaces_param:Dn,to_tag:Un,from_tag:Mn,early_flag:Ln};if(void 0!==r){if(void 0===s[r])throw new Error(\"Invalid rule name: \"+e(r)+\".\")}else r=\"CRLF\";var i=0,o=0,a=0,u=[];function l(e){i<a||(i>a&&(a=i,u=[]),u.push(e))}function c(){var e;return\"\\r\\n\"===t.substr(i,2)?(e=\"\\r\\n\",i+=2):(e=null,0===o&&l('\"\\\\r\\\\n\"')),e}function f(){var e;return/^[0-9]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[0-9]\")),e}function h(){var e;return/^[a-zA-Z]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[a-zA-Z]\")),e}function d(){var e;return/^[0-9a-fA-F]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[0-9a-fA-F]\")),e}function p(){var e;return null===(e=m())&&(e=g()),e}function _(){var e;return/^[\\0-\\xFF]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[\\\\0-\\\\xFF]\")),e}function v(){var e;return/^[\"]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l('[\"]')),e}function m(){var e;return 32===t.charCodeAt(i)?(e=\" \",i++):(e=null,0===o&&l('\" \"')),e}function g(){var e;return 9===t.charCodeAt(i)?(e=\"\\t\",i++):(e=null,0===o&&l('\"\\\\t\"')),e}function y(){var e;return/^[a-zA-Z0-9]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[a-zA-Z0-9]\")),e}function S(){var e;return 59===t.charCodeAt(i)?(e=\";\",i++):(e=null,0===o&&l('\";\"')),null===e&&(47===t.charCodeAt(i)?(e=\"/\",i++):(e=null,0===o&&l('\"/\"')),null===e&&(63===t.charCodeAt(i)?(e=\"?\",i++):(e=null,0===o&&l('\"?\"')),null===e&&(58===t.charCodeAt(i)?(e=\":\",i++):(e=null,0===o&&l('\":\"')),null===e&&(64===t.charCodeAt(i)?(e=\"@\",i++):(e=null,0===o&&l('\"@\"')),null===e&&(38===t.charCodeAt(i)?(e=\"&\",i++):(e=null,0===o&&l('\"&\"')),null===e&&(61===t.charCodeAt(i)?(e=\"=\",i++):(e=null,0===o&&l('\"=\"')),null===e&&(43===t.charCodeAt(i)?(e=\"+\",i++):(e=null,0===o&&l('\"+\"')),null===e&&(36===t.charCodeAt(i)?(e=\"$\",i++):(e=null,0===o&&l('\"$\"')),null===e&&(44===t.charCodeAt(i)?(e=\",\",i++):(e=null,0===o&&l('\",\"'))))))))))),e}function T(){var e;return null===(e=y())&&(e=b()),e}function b(){var e;return 45===t.charCodeAt(i)?(e=\"-\",i++):(e=null,0===o&&l('\"-\"')),null===e&&(95===t.charCodeAt(i)?(e=\"_\",i++):(e=null,0===o&&l('\"_\"')),null===e&&(46===t.charCodeAt(i)?(e=\".\",i++):(e=null,0===o&&l('\".\"')),null===e&&(33===t.charCodeAt(i)?(e=\"!\",i++):(e=null,0===o&&l('\"!\"')),null===e&&(126===t.charCodeAt(i)?(e=\"~\",i++):(e=null,0===o&&l('\"~\"')),null===e&&(42===t.charCodeAt(i)?(e=\"*\",i++):(e=null,0===o&&l('\"*\"')),null===e&&(39===t.charCodeAt(i)?(e=\"'\",i++):(e=null,0===o&&l('\"\\'\"')),null===e&&(40===t.charCodeAt(i)?(e=\"(\",i++):(e=null,0===o&&l('\"(\"')),null===e&&(41===t.charCodeAt(i)?(e=\")\",i++):(e=null,0===o&&l('\")\"')))))))))),e}function C(){var e,n,r,s,a;return s=i,a=i,37===t.charCodeAt(i)?(e=\"%\",i++):(e=null,0===o&&l('\"%\"')),null!==e&&null!==(n=d())&&null!==(r=d())?e=[e,n,r]:(e=null,i=a),null!==e&&(e=e.join(\"\")),null===e&&(i=s),e}function E(){var e,t,n,r,s,o;for(r=i,s=i,o=i,e=[],t=p();null!==t;)e.push(t),t=p();if(null!==e&&null!==(t=c())?e=[e,t]:(e=null,i=o),null!==(e=null!==e?e:\"\")){if(null!==(n=p()))for(t=[];null!==n;)t.push(n),n=p();else t=null;null!==t?e=[e,t]:(e=null,i=s)}else e=null,i=s;return null!==e&&(e=\" \"),null===e&&(i=r),e}function A(){var e;return e=null!==(e=E())?e:\"\"}function w(){var e,n,r,s,a;for(s=i,a=i,e=[],null===(n=m())&&(n=g());null!==n;)e.push(n),null===(n=m())&&(n=g());return null!==e?(58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n&&null!==(r=A())?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(e=\":\"),null===e&&(i=s),e}function R(){var e,n,r,s,o,a,u;if(o=i,a=i,null!==(n=I()))for(e=[];null!==n;)e.push(n),n=I();else e=null;if(null!==e){for(n=[],u=i,r=[],s=E();null!==s;)r.push(s),s=E();for(null!==r&&null!==(s=I())?r=[r,s]:(r=null,i=u);null!==r;){for(n.push(r),u=i,r=[],s=E();null!==s;)r.push(s),s=E();null!==r&&null!==(s=I())?r=[r,s]:(r=null,i=u)}null!==n?e=[e,n]:(e=null,i=a)}else e=null,i=a;return null!==e&&(e=function(e){return t.substring(i,e)}(o)),null===e&&(i=o),e}function I(){var e;return/^[!-~]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[!-~]\")),null===e&&(e=O()),e}function O(){var e;return/^[\\x80-\\uFFFF]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[\\\\x80-\\\\uFFFF]\")),e}function k(){var e;return/^[\\x80-\\xBF]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[\\\\x80-\\\\xBF]\")),e}function x(){var e,n,r;if(r=i,null===(n=y())&&(45===t.charCodeAt(i)?(n=\"-\",i++):(n=null,0===o&&l('\"-\"')),null===n&&(46===t.charCodeAt(i)?(n=\".\",i++):(n=null,0===o&&l('\".\"')),null===n&&(33===t.charCodeAt(i)?(n=\"!\",i++):(n=null,0===o&&l('\"!\"')),null===n&&(37===t.charCodeAt(i)?(n=\"%\",i++):(n=null,0===o&&l('\"%\"')),null===n&&(42===t.charCodeAt(i)?(n=\"*\",i++):(n=null,0===o&&l('\"*\"')),null===n&&(95===t.charCodeAt(i)?(n=\"_\",i++):(n=null,0===o&&l('\"_\"')),null===n&&(43===t.charCodeAt(i)?(n=\"+\",i++):(n=null,0===o&&l('\"+\"')),null===n&&(96===t.charCodeAt(i)?(n=\"`\",i++):(n=null,0===o&&l('\"`\"')),null===n&&(39===t.charCodeAt(i)?(n=\"'\",i++):(n=null,0===o&&l('\"\\'\"')),null===n&&(126===t.charCodeAt(i)?(n=\"~\",i++):(n=null,0===o&&l('\"~\"')))))))))))),null!==n)for(e=[];null!==n;)e.push(n),null===(n=y())&&(45===t.charCodeAt(i)?(n=\"-\",i++):(n=null,0===o&&l('\"-\"')),null===n&&(46===t.charCodeAt(i)?(n=\".\",i++):(n=null,0===o&&l('\".\"')),null===n&&(33===t.charCodeAt(i)?(n=\"!\",i++):(n=null,0===o&&l('\"!\"')),null===n&&(37===t.charCodeAt(i)?(n=\"%\",i++):(n=null,0===o&&l('\"%\"')),null===n&&(42===t.charCodeAt(i)?(n=\"*\",i++):(n=null,0===o&&l('\"*\"')),null===n&&(95===t.charCodeAt(i)?(n=\"_\",i++):(n=null,0===o&&l('\"_\"')),null===n&&(43===t.charCodeAt(i)?(n=\"+\",i++):(n=null,0===o&&l('\"+\"')),null===n&&(96===t.charCodeAt(i)?(n=\"`\",i++):(n=null,0===o&&l('\"`\"')),null===n&&(39===t.charCodeAt(i)?(n=\"'\",i++):(n=null,0===o&&l('\"\\'\"')),null===n&&(126===t.charCodeAt(i)?(n=\"~\",i++):(n=null,0===o&&l('\"~\"'))))))))))));else e=null;return null!==e&&(e=function(e){return t.substring(i,e)}(r)),null===e&&(i=r),e}function N(){var e,n,r;if(r=i,null===(n=y())&&(45===t.charCodeAt(i)?(n=\"-\",i++):(n=null,0===o&&l('\"-\"')),null===n&&(33===t.charCodeAt(i)?(n=\"!\",i++):(n=null,0===o&&l('\"!\"')),null===n&&(37===t.charCodeAt(i)?(n=\"%\",i++):(n=null,0===o&&l('\"%\"')),null===n&&(42===t.charCodeAt(i)?(n=\"*\",i++):(n=null,0===o&&l('\"*\"')),null===n&&(95===t.charCodeAt(i)?(n=\"_\",i++):(n=null,0===o&&l('\"_\"')),null===n&&(43===t.charCodeAt(i)?(n=\"+\",i++):(n=null,0===o&&l('\"+\"')),null===n&&(96===t.charCodeAt(i)?(n=\"`\",i++):(n=null,0===o&&l('\"`\"')),null===n&&(39===t.charCodeAt(i)?(n=\"'\",i++):(n=null,0===o&&l('\"\\'\"')),null===n&&(126===t.charCodeAt(i)?(n=\"~\",i++):(n=null,0===o&&l('\"~\"'))))))))))),null!==n)for(e=[];null!==n;)e.push(n),null===(n=y())&&(45===t.charCodeAt(i)?(n=\"-\",i++):(n=null,0===o&&l('\"-\"')),null===n&&(33===t.charCodeAt(i)?(n=\"!\",i++):(n=null,0===o&&l('\"!\"')),null===n&&(37===t.charCodeAt(i)?(n=\"%\",i++):(n=null,0===o&&l('\"%\"')),null===n&&(42===t.charCodeAt(i)?(n=\"*\",i++):(n=null,0===o&&l('\"*\"')),null===n&&(95===t.charCodeAt(i)?(n=\"_\",i++):(n=null,0===o&&l('\"_\"')),null===n&&(43===t.charCodeAt(i)?(n=\"+\",i++):(n=null,0===o&&l('\"+\"')),null===n&&(96===t.charCodeAt(i)?(n=\"`\",i++):(n=null,0===o&&l('\"`\"')),null===n&&(39===t.charCodeAt(i)?(n=\"'\",i++):(n=null,0===o&&l('\"\\'\"')),null===n&&(126===t.charCodeAt(i)?(n=\"~\",i++):(n=null,0===o&&l('\"~\"')))))))))));else e=null;return null!==e&&(e=function(e){return t.substring(i,e)}(r)),null===e&&(i=r),e}function P(){var e,n,r;if(r=i,null===(n=y())&&(45===t.charCodeAt(i)?(n=\"-\",i++):(n=null,0===o&&l('\"-\"')),null===n&&(46===t.charCodeAt(i)?(n=\".\",i++):(n=null,0===o&&l('\".\"')),null===n&&(33===t.charCodeAt(i)?(n=\"!\",i++):(n=null,0===o&&l('\"!\"')),null===n&&(37===t.charCodeAt(i)?(n=\"%\",i++):(n=null,0===o&&l('\"%\"')),null===n&&(42===t.charCodeAt(i)?(n=\"*\",i++):(n=null,0===o&&l('\"*\"')),null===n&&(95===t.charCodeAt(i)?(n=\"_\",i++):(n=null,0===o&&l('\"_\"')),null===n&&(43===t.charCodeAt(i)?(n=\"+\",i++):(n=null,0===o&&l('\"+\"')),null===n&&(96===t.charCodeAt(i)?(n=\"`\",i++):(n=null,0===o&&l('\"`\"')),null===n&&(39===t.charCodeAt(i)?(n=\"'\",i++):(n=null,0===o&&l('\"\\'\"')),null===n&&(126===t.charCodeAt(i)?(n=\"~\",i++):(n=null,0===o&&l('\"~\"')),null===n&&(40===t.charCodeAt(i)?(n=\"(\",i++):(n=null,0===o&&l('\"(\"')),null===n&&(41===t.charCodeAt(i)?(n=\")\",i++):(n=null,0===o&&l('\")\"')),null===n&&(60===t.charCodeAt(i)?(n=\"<\",i++):(n=null,0===o&&l('\"<\"')),null===n&&(62===t.charCodeAt(i)?(n=\">\",i++):(n=null,0===o&&l('\">\"')),null===n&&(58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null===n&&(92===t.charCodeAt(i)?(n=\"\\\\\",i++):(n=null,0===o&&l('\"\\\\\\\\\"')),null===n&&null===(n=v())&&(47===t.charCodeAt(i)?(n=\"/\",i++):(n=null,0===o&&l('\"/\"')),null===n&&(91===t.charCodeAt(i)?(n=\"[\",i++):(n=null,0===o&&l('\"[\"')),null===n&&(93===t.charCodeAt(i)?(n=\"]\",i++):(n=null,0===o&&l('\"]\"')),null===n&&(63===t.charCodeAt(i)?(n=\"?\",i++):(n=null,0===o&&l('\"?\"')),null===n&&(123===t.charCodeAt(i)?(n=\"{\",i++):(n=null,0===o&&l('\"{\"')),null===n&&(125===t.charCodeAt(i)?(n=\"}\",i++):(n=null,0===o&&l('\"}\"')))))))))))))))))))))))),null!==n)for(e=[];null!==n;)e.push(n),null===(n=y())&&(45===t.charCodeAt(i)?(n=\"-\",i++):(n=null,0===o&&l('\"-\"')),null===n&&(46===t.charCodeAt(i)?(n=\".\",i++):(n=null,0===o&&l('\".\"')),null===n&&(33===t.charCodeAt(i)?(n=\"!\",i++):(n=null,0===o&&l('\"!\"')),null===n&&(37===t.charCodeAt(i)?(n=\"%\",i++):(n=null,0===o&&l('\"%\"')),null===n&&(42===t.charCodeAt(i)?(n=\"*\",i++):(n=null,0===o&&l('\"*\"')),null===n&&(95===t.charCodeAt(i)?(n=\"_\",i++):(n=null,0===o&&l('\"_\"')),null===n&&(43===t.charCodeAt(i)?(n=\"+\",i++):(n=null,0===o&&l('\"+\"')),null===n&&(96===t.charCodeAt(i)?(n=\"`\",i++):(n=null,0===o&&l('\"`\"')),null===n&&(39===t.charCodeAt(i)?(n=\"'\",i++):(n=null,0===o&&l('\"\\'\"')),null===n&&(126===t.charCodeAt(i)?(n=\"~\",i++):(n=null,0===o&&l('\"~\"')),null===n&&(40===t.charCodeAt(i)?(n=\"(\",i++):(n=null,0===o&&l('\"(\"')),null===n&&(41===t.charCodeAt(i)?(n=\")\",i++):(n=null,0===o&&l('\")\"')),null===n&&(60===t.charCodeAt(i)?(n=\"<\",i++):(n=null,0===o&&l('\"<\"')),null===n&&(62===t.charCodeAt(i)?(n=\">\",i++):(n=null,0===o&&l('\">\"')),null===n&&(58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null===n&&(92===t.charCodeAt(i)?(n=\"\\\\\",i++):(n=null,0===o&&l('\"\\\\\\\\\"')),null===n&&null===(n=v())&&(47===t.charCodeAt(i)?(n=\"/\",i++):(n=null,0===o&&l('\"/\"')),null===n&&(91===t.charCodeAt(i)?(n=\"[\",i++):(n=null,0===o&&l('\"[\"')),null===n&&(93===t.charCodeAt(i)?(n=\"]\",i++):(n=null,0===o&&l('\"]\"')),null===n&&(63===t.charCodeAt(i)?(n=\"?\",i++):(n=null,0===o&&l('\"?\"')),null===n&&(123===t.charCodeAt(i)?(n=\"{\",i++):(n=null,0===o&&l('\"{\"')),null===n&&(125===t.charCodeAt(i)?(n=\"}\",i++):(n=null,0===o&&l('\"}\"'))))))))))))))))))))))));else e=null;return null!==e&&(e=function(e){return t.substring(i,e)}(r)),null===e&&(i=r),e}function D(){var e,n,r,s,a;return s=i,a=i,null!==(e=A())?(42===t.charCodeAt(i)?(n=\"*\",i++):(n=null,0===o&&l('\"*\"')),null!==n&&null!==(r=A())?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(e=\"*\"),null===e&&(i=s),e}function U(){var e,n,r,s,a;return s=i,a=i,null!==(e=A())?(47===t.charCodeAt(i)?(n=\"/\",i++):(n=null,0===o&&l('\"/\"')),null!==n&&null!==(r=A())?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(e=\"/\"),null===e&&(i=s),e}function M(){var e,n,r,s,a;return s=i,a=i,null!==(e=A())?(61===t.charCodeAt(i)?(n=\"=\",i++):(n=null,0===o&&l('\"=\"')),null!==n&&null!==(r=A())?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(e=\"=\"),null===e&&(i=s),e}function L(){var e,n,r,s,a;return s=i,a=i,null!==(e=A())?(40===t.charCodeAt(i)?(n=\"(\",i++):(n=null,0===o&&l('\"(\"')),null!==n&&null!==(r=A())?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(e=\"(\"),null===e&&(i=s),e}function F(){var e,n,r,s,a;return s=i,a=i,null!==(e=A())?(41===t.charCodeAt(i)?(n=\")\",i++):(n=null,0===o&&l('\")\"')),null!==n&&null!==(r=A())?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(e=\")\"),null===e&&(i=s),e}function q(){var e,n,r,s;return r=i,s=i,62===t.charCodeAt(i)?(e=\">\",i++):(e=null,0===o&&l('\">\"')),null!==e&&null!==(n=A())?e=[e,n]:(e=null,i=s),null!==e&&(e=\">\"),null===e&&(i=r),e}function H(){var e,n,r,s;return r=i,s=i,null!==(e=A())?(60===t.charCodeAt(i)?(n=\"<\",i++):(n=null,0===o&&l('\"<\"')),null!==n?e=[e,n]:(e=null,i=s)):(e=null,i=s),null!==e&&(e=\"<\"),null===e&&(i=r),e}function j(){var e,n,r,s,a;return s=i,a=i,null!==(e=A())?(44===t.charCodeAt(i)?(n=\",\",i++):(n=null,0===o&&l('\",\"')),null!==n&&null!==(r=A())?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(e=\",\"),null===e&&(i=s),e}function B(){var e,n,r,s,a;return s=i,a=i,null!==(e=A())?(59===t.charCodeAt(i)?(n=\";\",i++):(n=null,0===o&&l('\";\"')),null!==n&&null!==(r=A())?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(e=\";\"),null===e&&(i=s),e}function G(){var e,n,r,s,a;return s=i,a=i,null!==(e=A())?(58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n&&null!==(r=A())?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(e=\":\"),null===e&&(i=s),e}function W(){var e,t,n,r;return n=i,r=i,null!==(e=A())&&null!==(t=v())?e=[e,t]:(e=null,i=r),null!==e&&(e='\"'),null===e&&(i=n),e}function J(){var e,t,n,r;return n=i,r=i,null!==(e=v())&&null!==(t=A())?e=[e,t]:(e=null,i=r),null!==e&&(e='\"'),null===e&&(i=n),e}function K(){var e;return/^[!-']/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[!-']\")),null===e&&(/^[*-[]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[*-[]\")),null===e&&(/^[\\]-~]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[\\\\]-~]\")),null===e&&null===(e=O())&&(e=E()))),e}function V(){var e,n,r,s,o,a;if(o=i,a=i,null!==(e=A()))if(null!==(n=v())){for(r=[],null===(s=z())&&(s=Y());null!==s;)r.push(s),null===(s=z())&&(s=Y());null!==r&&null!==(s=v())?e=[e,n,r,s]:(e=null,i=a)}else e=null,i=a;else e=null,i=a;return null!==e&&(e=function(e){return t.substring(i,e)}(o)),null===e&&(i=o),e}function X(){var e,n,r,s,o,a;if(o=i,a=i,null!==(e=A()))if(null!==(n=v())){for(r=[],null===(s=z())&&(s=Y());null!==s;)r.push(s),null===(s=z())&&(s=Y());null!==r&&null!==(s=v())?e=[e,n,r,s]:(e=null,i=a)}else e=null,i=a;else e=null,i=a;return null!==e&&(e=function(e){var n=t.substring(i,e).trim();return n.substring(1,n.length-1).replace(/\\\\([\\x00-\\x09\\x0b-\\x0c\\x0e-\\x7f])/g,\"$1\")}(o)),null===e&&(i=o),e}function z(){var e;return null===(e=E())&&(33===t.charCodeAt(i)?(e=\"!\",i++):(e=null,0===o&&l('\"!\"')),null===e&&(/^[#-[]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[#-[]\")),null===e&&(/^[\\]-~]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[\\\\]-~]\")),null===e&&(e=O())))),e}function Y(){var e,n,r;return r=i,92===t.charCodeAt(i)?(e=\"\\\\\",i++):(e=null,0===o&&l('\"\\\\\\\\\"')),null!==e?(/^[\\0-\\t]/.test(t.charAt(i))?(n=t.charAt(i),i++):(n=null,0===o&&l(\"[\\\\0-\\\\t]\")),null===n&&(/^[\\x0B-\\f]/.test(t.charAt(i))?(n=t.charAt(i),i++):(n=null,0===o&&l(\"[\\\\x0B-\\\\f]\")),null===n&&(/^[\\x0E-]/.test(t.charAt(i))?(n=t.charAt(i),i++):(n=null,0===o&&l(\"[\\\\x0E-]\")))),null!==n?e=[e,n]:(e=null,i=r)):(e=null,i=r),e}function $(){var e,n,r,s,a,u;return a=i,u=i,null!==(e=Z())?(58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n&&null!==(r=null!==(r=ne())?r:\"\")&&null!==(s=oe())?e=[e,n,r,s]:(e=null,i=u)):(e=null,i=u),null!==e&&(e=function(e){try{Hn.uri=new Fn(Hn.scheme,Hn.user,Hn.host,Hn.port),delete Hn.scheme,delete Hn.user,delete Hn.host,delete Hn.host_type,delete Hn.port}catch(e){Hn=-1}}()),null===e&&(i=a),e}function Q(){var e,n,s,a,u,c,f,h;return f=i,h=i,null!==(e=Z())?(58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n&&null!==(s=null!==(s=ne())?s:\"\")&&null!==(a=oe())&&null!==(u=ge())&&null!==(c=null!==(c=xe())?c:\"\")?e=[e,n,s,a,u,c]:(e=null,i=h)):(e=null,i=h),null!==e&&(e=function(e){try{Hn.uri=new Fn(Hn.scheme,Hn.user,Hn.host,Hn.port,Hn.uri_params,Hn.uri_headers),delete Hn.scheme,delete Hn.user,delete Hn.host,delete Hn.host_type,delete Hn.port,delete Hn.uri_params,\"SIP_URI\"===r&&(Hn=Hn.uri)}catch(e){Hn=-1}}()),null===e&&(i=f),e}function Z(){var e;return null===(e=ee())&&(e=te()),e}function ee(){var e,n,r;return n=i,\"sips\"===t.substr(i,4).toLowerCase()?(e=t.substr(i,4),i+=4):(e=null,0===o&&l('\"sips\"')),null!==e&&(r=e,e=void(Hn.scheme=r.toLowerCase())),null===e&&(i=n),e}function te(){var e,n,r;return n=i,\"sip\"===t.substr(i,3).toLowerCase()?(e=t.substr(i,3),i+=3):(e=null,0===o&&l('\"sip\"')),null!==e&&(r=e,e=void(Hn.scheme=r.toLowerCase())),null===e&&(i=n),e}function ne(){var e,n,r,s,a,u;return s=i,a=i,null!==(e=re())?(u=i,58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n&&null!==(r=ie())?n=[n,r]:(n=null,i=u),null!==(n=null!==n?n:\"\")?(64===t.charCodeAt(i)?(r=\"@\",i++):(r=null,0===o&&l('\"@\"')),null!==r?e=[e,n,r]:(e=null,i=a)):(e=null,i=a)):(e=null,i=a),null!==e&&(e=function(e){Hn.user=decodeURIComponent(t.substring(i-1,e))}(s)),null===e&&(i=s),e}function re(){var e,t;if(null===(t=T())&&null===(t=C())&&(t=se()),null!==t)for(e=[];null!==t;)e.push(t),null===(t=T())&&null===(t=C())&&(t=se());else e=null;return e}function se(){var e;return 38===t.charCodeAt(i)?(e=\"&\",i++):(e=null,0===o&&l('\"&\"')),null===e&&(61===t.charCodeAt(i)?(e=\"=\",i++):(e=null,0===o&&l('\"=\"')),null===e&&(43===t.charCodeAt(i)?(e=\"+\",i++):(e=null,0===o&&l('\"+\"')),null===e&&(36===t.charCodeAt(i)?(e=\"$\",i++):(e=null,0===o&&l('\"$\"')),null===e&&(44===t.charCodeAt(i)?(e=\",\",i++):(e=null,0===o&&l('\",\"')),null===e&&(59===t.charCodeAt(i)?(e=\";\",i++):(e=null,0===o&&l('\";\"')),null===e&&(63===t.charCodeAt(i)?(e=\"?\",i++):(e=null,0===o&&l('\"?\"')),null===e&&(47===t.charCodeAt(i)?(e=\"/\",i++):(e=null,0===o&&l('\"/\"'))))))))),e}function ie(){var e,n,r;for(r=i,e=[],null===(n=T())&&null===(n=C())&&(38===t.charCodeAt(i)?(n=\"&\",i++):(n=null,0===o&&l('\"&\"')),null===n&&(61===t.charCodeAt(i)?(n=\"=\",i++):(n=null,0===o&&l('\"=\"')),null===n&&(43===t.charCodeAt(i)?(n=\"+\",i++):(n=null,0===o&&l('\"+\"')),null===n&&(36===t.charCodeAt(i)?(n=\"$\",i++):(n=null,0===o&&l('\"$\"')),null===n&&(44===t.charCodeAt(i)?(n=\",\",i++):(n=null,0===o&&l('\",\"')))))));null!==n;)e.push(n),null===(n=T())&&null===(n=C())&&(38===t.charCodeAt(i)?(n=\"&\",i++):(n=null,0===o&&l('\"&\"')),null===n&&(61===t.charCodeAt(i)?(n=\"=\",i++):(n=null,0===o&&l('\"=\"')),null===n&&(43===t.charCodeAt(i)?(n=\"+\",i++):(n=null,0===o&&l('\"+\"')),null===n&&(36===t.charCodeAt(i)?(n=\"$\",i++):(n=null,0===o&&l('\"$\"')),null===n&&(44===t.charCodeAt(i)?(n=\",\",i++):(n=null,0===o&&l('\",\"')))))));return null!==e&&(e=function(e){Hn.password=t.substring(i,e)}(r)),null===e&&(i=r),e}function oe(){var e,n,r,s,a;return s=i,null!==(e=ae())?(a=i,58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n&&null!==(r=me())?n=[n,r]:(n=null,i=a),null!==(n=null!==n?n:\"\")?e=[e,n]:(e=null,i=s)):(e=null,i=s),e}function ae(){var e,n;return n=i,null===(e=ue())&&null===(e=_e())&&(e=fe()),null!==e&&(e=function(e){return Hn.host=t.substring(i,e).toLowerCase(),Hn.host}(n)),null===e&&(i=n),e}function ue(){var e,n,r,s,a,u;for(s=i,a=i,e=[],u=i,null!==(n=le())?(46===t.charCodeAt(i)?(r=\".\",i++):(r=null,0===o&&l('\".\"')),null!==r?n=[n,r]:(n=null,i=u)):(n=null,i=u);null!==n;)e.push(n),u=i,null!==(n=le())?(46===t.charCodeAt(i)?(r=\".\",i++):(r=null,0===o&&l('\".\"')),null!==r?n=[n,r]:(n=null,i=u)):(n=null,i=u);return null!==e&&null!==(n=ce())?(46===t.charCodeAt(i)?(r=\".\",i++):(r=null,0===o&&l('\".\"')),null!==(r=null!==r?r:\"\")?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(e=function(e){return Hn.host_type=\"domain\",t.substring(i,e)}(s)),null===e&&(i=s),e}function le(){var e,n,r,s;if(s=i,null!==(e=y())){for(n=[],null===(r=y())&&(45===t.charCodeAt(i)?(r=\"-\",i++):(r=null,0===o&&l('\"-\"')),null===r&&(95===t.charCodeAt(i)?(r=\"_\",i++):(r=null,0===o&&l('\"_\"'))));null!==r;)n.push(r),null===(r=y())&&(45===t.charCodeAt(i)?(r=\"-\",i++):(r=null,0===o&&l('\"-\"')),null===r&&(95===t.charCodeAt(i)?(r=\"_\",i++):(r=null,0===o&&l('\"_\"'))));null!==n?e=[e,n]:(e=null,i=s)}else e=null,i=s;return e}function ce(){var e,n,r,s;if(s=i,null!==(e=h())){for(n=[],null===(r=y())&&(45===t.charCodeAt(i)?(r=\"-\",i++):(r=null,0===o&&l('\"-\"')),null===r&&(95===t.charCodeAt(i)?(r=\"_\",i++):(r=null,0===o&&l('\"_\"'))));null!==r;)n.push(r),null===(r=y())&&(45===t.charCodeAt(i)?(r=\"-\",i++):(r=null,0===o&&l('\"-\"')),null===r&&(95===t.charCodeAt(i)?(r=\"_\",i++):(r=null,0===o&&l('\"_\"'))));null!==n?e=[e,n]:(e=null,i=s)}else e=null,i=s;return e}function fe(){var e,n,r,s,a;return s=i,a=i,91===t.charCodeAt(i)?(e=\"[\",i++):(e=null,0===o&&l('\"[\"')),null!==e&&null!==(n=he())?(93===t.charCodeAt(i)?(r=\"]\",i++):(r=null,0===o&&l('\"]\"')),null!==r?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(e=function(e){return Hn.host_type=\"IPv6\",t.substring(i,e)}(s)),null===e&&(i=s),e}function he(){var e,n,r,s,a,u,c,f,h,d,p,_,v,m,g,y;return m=i,g=i,null!==(e=de())?(58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n&&null!==(r=de())?(58===t.charCodeAt(i)?(s=\":\",i++):(s=null,0===o&&l('\":\"')),null!==s&&null!==(a=de())?(58===t.charCodeAt(i)?(u=\":\",i++):(u=null,0===o&&l('\":\"')),null!==u&&null!==(c=de())?(58===t.charCodeAt(i)?(f=\":\",i++):(f=null,0===o&&l('\":\"')),null!==f&&null!==(h=de())?(58===t.charCodeAt(i)?(d=\":\",i++):(d=null,0===o&&l('\":\"')),null!==d&&null!==(p=de())?(58===t.charCodeAt(i)?(_=\":\",i++):(_=null,0===o&&l('\":\"')),null!==_&&null!==(v=pe())?e=[e,n,r,s,a,u,c,f,h,d,p,_,v]:(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g),null===e&&(g=i,\"::\"===t.substr(i,2)?(e=\"::\",i+=2):(e=null,0===o&&l('\"::\"')),null!==e&&null!==(n=de())?(58===t.charCodeAt(i)?(r=\":\",i++):(r=null,0===o&&l('\":\"')),null!==r&&null!==(s=de())?(58===t.charCodeAt(i)?(a=\":\",i++):(a=null,0===o&&l('\":\"')),null!==a&&null!==(u=de())?(58===t.charCodeAt(i)?(c=\":\",i++):(c=null,0===o&&l('\":\"')),null!==c&&null!==(f=de())?(58===t.charCodeAt(i)?(h=\":\",i++):(h=null,0===o&&l('\":\"')),null!==h&&null!==(d=de())?(58===t.charCodeAt(i)?(p=\":\",i++):(p=null,0===o&&l('\":\"')),null!==p&&null!==(_=pe())?e=[e,n,r,s,a,u,c,f,h,d,p,_]:(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g),null===e&&(g=i,\"::\"===t.substr(i,2)?(e=\"::\",i+=2):(e=null,0===o&&l('\"::\"')),null!==e&&null!==(n=de())?(58===t.charCodeAt(i)?(r=\":\",i++):(r=null,0===o&&l('\":\"')),null!==r&&null!==(s=de())?(58===t.charCodeAt(i)?(a=\":\",i++):(a=null,0===o&&l('\":\"')),null!==a&&null!==(u=de())?(58===t.charCodeAt(i)?(c=\":\",i++):(c=null,0===o&&l('\":\"')),null!==c&&null!==(f=de())?(58===t.charCodeAt(i)?(h=\":\",i++):(h=null,0===o&&l('\":\"')),null!==h&&null!==(d=pe())?e=[e,n,r,s,a,u,c,f,h,d]:(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g),null===e&&(g=i,\"::\"===t.substr(i,2)?(e=\"::\",i+=2):(e=null,0===o&&l('\"::\"')),null!==e&&null!==(n=de())?(58===t.charCodeAt(i)?(r=\":\",i++):(r=null,0===o&&l('\":\"')),null!==r&&null!==(s=de())?(58===t.charCodeAt(i)?(a=\":\",i++):(a=null,0===o&&l('\":\"')),null!==a&&null!==(u=de())?(58===t.charCodeAt(i)?(c=\":\",i++):(c=null,0===o&&l('\":\"')),null!==c&&null!==(f=pe())?e=[e,n,r,s,a,u,c,f]:(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g),null===e&&(g=i,\"::\"===t.substr(i,2)?(e=\"::\",i+=2):(e=null,0===o&&l('\"::\"')),null!==e&&null!==(n=de())?(58===t.charCodeAt(i)?(r=\":\",i++):(r=null,0===o&&l('\":\"')),null!==r&&null!==(s=de())?(58===t.charCodeAt(i)?(a=\":\",i++):(a=null,0===o&&l('\":\"')),null!==a&&null!==(u=pe())?e=[e,n,r,s,a,u]:(e=null,i=g)):(e=null,i=g)):(e=null,i=g),null===e&&(g=i,\"::\"===t.substr(i,2)?(e=\"::\",i+=2):(e=null,0===o&&l('\"::\"')),null!==e&&null!==(n=de())?(58===t.charCodeAt(i)?(r=\":\",i++):(r=null,0===o&&l('\":\"')),null!==r&&null!==(s=pe())?e=[e,n,r,s]:(e=null,i=g)):(e=null,i=g),null===e&&(g=i,\"::\"===t.substr(i,2)?(e=\"::\",i+=2):(e=null,0===o&&l('\"::\"')),null!==e&&null!==(n=pe())?e=[e,n]:(e=null,i=g),null===e&&(g=i,\"::\"===t.substr(i,2)?(e=\"::\",i+=2):(e=null,0===o&&l('\"::\"')),null!==e&&null!==(n=de())?e=[e,n]:(e=null,i=g),null===e&&(g=i,null!==(e=de())?(\"::\"===t.substr(i,2)?(n=\"::\",i+=2):(n=null,0===o&&l('\"::\"')),null!==n&&null!==(r=de())?(58===t.charCodeAt(i)?(s=\":\",i++):(s=null,0===o&&l('\":\"')),null!==s&&null!==(a=de())?(58===t.charCodeAt(i)?(u=\":\",i++):(u=null,0===o&&l('\":\"')),null!==u&&null!==(c=de())?(58===t.charCodeAt(i)?(f=\":\",i++):(f=null,0===o&&l('\":\"')),null!==f&&null!==(h=de())?(58===t.charCodeAt(i)?(d=\":\",i++):(d=null,0===o&&l('\":\"')),null!==d&&null!==(p=pe())?e=[e,n,r,s,a,u,c,f,h,d,p]:(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g),null===e&&(g=i,null!==(e=de())?(y=i,58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n&&null!==(r=de())?n=[n,r]:(n=null,i=y),null!==(n=null!==n?n:\"\")?(\"::\"===t.substr(i,2)?(r=\"::\",i+=2):(r=null,0===o&&l('\"::\"')),null!==r&&null!==(s=de())?(58===t.charCodeAt(i)?(a=\":\",i++):(a=null,0===o&&l('\":\"')),null!==a&&null!==(u=de())?(58===t.charCodeAt(i)?(c=\":\",i++):(c=null,0===o&&l('\":\"')),null!==c&&null!==(f=de())?(58===t.charCodeAt(i)?(h=\":\",i++):(h=null,0===o&&l('\":\"')),null!==h&&null!==(d=pe())?e=[e,n,r,s,a,u,c,f,h,d]:(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g),null===e&&(g=i,null!==(e=de())?(y=i,58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n&&null!==(r=de())?n=[n,r]:(n=null,i=y),null!==(n=null!==n?n:\"\")?(y=i,58===t.charCodeAt(i)?(r=\":\",i++):(r=null,0===o&&l('\":\"')),null!==r&&null!==(s=de())?r=[r,s]:(r=null,i=y),null!==(r=null!==r?r:\"\")?(\"::\"===t.substr(i,2)?(s=\"::\",i+=2):(s=null,0===o&&l('\"::\"')),null!==s&&null!==(a=de())?(58===t.charCodeAt(i)?(u=\":\",i++):(u=null,0===o&&l('\":\"')),null!==u&&null!==(c=de())?(58===t.charCodeAt(i)?(f=\":\",i++):(f=null,0===o&&l('\":\"')),null!==f&&null!==(h=pe())?e=[e,n,r,s,a,u,c,f,h]:(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g),null===e&&(g=i,null!==(e=de())?(y=i,58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n&&null!==(r=de())?n=[n,r]:(n=null,i=y),null!==(n=null!==n?n:\"\")?(y=i,58===t.charCodeAt(i)?(r=\":\",i++):(r=null,0===o&&l('\":\"')),null!==r&&null!==(s=de())?r=[r,s]:(r=null,i=y),null!==(r=null!==r?r:\"\")?(y=i,58===t.charCodeAt(i)?(s=\":\",i++):(s=null,0===o&&l('\":\"')),null!==s&&null!==(a=de())?s=[s,a]:(s=null,i=y),null!==(s=null!==s?s:\"\")?(\"::\"===t.substr(i,2)?(a=\"::\",i+=2):(a=null,0===o&&l('\"::\"')),null!==a&&null!==(u=de())?(58===t.charCodeAt(i)?(c=\":\",i++):(c=null,0===o&&l('\":\"')),null!==c&&null!==(f=pe())?e=[e,n,r,s,a,u,c,f]:(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g),null===e&&(g=i,null!==(e=de())?(y=i,58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n&&null!==(r=de())?n=[n,r]:(n=null,i=y),null!==(n=null!==n?n:\"\")?(y=i,58===t.charCodeAt(i)?(r=\":\",i++):(r=null,0===o&&l('\":\"')),null!==r&&null!==(s=de())?r=[r,s]:(r=null,i=y),null!==(r=null!==r?r:\"\")?(y=i,58===t.charCodeAt(i)?(s=\":\",i++):(s=null,0===o&&l('\":\"')),null!==s&&null!==(a=de())?s=[s,a]:(s=null,i=y),null!==(s=null!==s?s:\"\")?(y=i,58===t.charCodeAt(i)?(a=\":\",i++):(a=null,0===o&&l('\":\"')),null!==a&&null!==(u=de())?a=[a,u]:(a=null,i=y),null!==(a=null!==a?a:\"\")?(\"::\"===t.substr(i,2)?(u=\"::\",i+=2):(u=null,0===o&&l('\"::\"')),null!==u&&null!==(c=pe())?e=[e,n,r,s,a,u,c]:(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g),null===e&&(g=i,null!==(e=de())?(y=i,58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n&&null!==(r=de())?n=[n,r]:(n=null,i=y),null!==(n=null!==n?n:\"\")?(y=i,58===t.charCodeAt(i)?(r=\":\",i++):(r=null,0===o&&l('\":\"')),null!==r&&null!==(s=de())?r=[r,s]:(r=null,i=y),null!==(r=null!==r?r:\"\")?(y=i,58===t.charCodeAt(i)?(s=\":\",i++):(s=null,0===o&&l('\":\"')),null!==s&&null!==(a=de())?s=[s,a]:(s=null,i=y),null!==(s=null!==s?s:\"\")?(y=i,58===t.charCodeAt(i)?(a=\":\",i++):(a=null,0===o&&l('\":\"')),null!==a&&null!==(u=de())?a=[a,u]:(a=null,i=y),null!==(a=null!==a?a:\"\")?(y=i,58===t.charCodeAt(i)?(u=\":\",i++):(u=null,0===o&&l('\":\"')),null!==u&&null!==(c=de())?u=[u,c]:(u=null,i=y),null!==(u=null!==u?u:\"\")?(\"::\"===t.substr(i,2)?(c=\"::\",i+=2):(c=null,0===o&&l('\"::\"')),null!==c&&null!==(f=de())?e=[e,n,r,s,a,u,c,f]:(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g),null===e&&(g=i,null!==(e=de())?(y=i,58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n&&null!==(r=de())?n=[n,r]:(n=null,i=y),null!==(n=null!==n?n:\"\")?(y=i,58===t.charCodeAt(i)?(r=\":\",i++):(r=null,0===o&&l('\":\"')),null!==r&&null!==(s=de())?r=[r,s]:(r=null,i=y),null!==(r=null!==r?r:\"\")?(y=i,58===t.charCodeAt(i)?(s=\":\",i++):(s=null,0===o&&l('\":\"')),null!==s&&null!==(a=de())?s=[s,a]:(s=null,i=y),null!==(s=null!==s?s:\"\")?(y=i,58===t.charCodeAt(i)?(a=\":\",i++):(a=null,0===o&&l('\":\"')),null!==a&&null!==(u=de())?a=[a,u]:(a=null,i=y),null!==(a=null!==a?a:\"\")?(y=i,58===t.charCodeAt(i)?(u=\":\",i++):(u=null,0===o&&l('\":\"')),null!==u&&null!==(c=de())?u=[u,c]:(u=null,i=y),null!==(u=null!==u?u:\"\")?(y=i,58===t.charCodeAt(i)?(c=\":\",i++):(c=null,0===o&&l('\":\"')),null!==c&&null!==(f=de())?c=[c,f]:(c=null,i=y),null!==(c=null!==c?c:\"\")?(\"::\"===t.substr(i,2)?(f=\"::\",i+=2):(f=null,0===o&&l('\"::\"')),null!==f?e=[e,n,r,s,a,u,c,f]:(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g)):(e=null,i=g))))))))))))))),null!==e&&(e=function(e){return Hn.host_type=\"IPv6\",t.substring(i,e)}(m)),null===e&&(i=m),e}function de(){var e,t,n,r,s;return s=i,null!==(e=d())&&null!==(t=null!==(t=d())?t:\"\")&&null!==(n=null!==(n=d())?n:\"\")&&null!==(r=null!==(r=d())?r:\"\")?e=[e,t,n,r]:(e=null,i=s),e}function pe(){var e,n,r,s;return s=i,null!==(e=de())?(58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n&&null!==(r=de())?e=[e,n,r]:(e=null,i=s)):(e=null,i=s),null===e&&(e=_e()),e}function _e(){var e,n,r,s,a,u,c,f,h;return f=i,h=i,null!==(e=ve())?(46===t.charCodeAt(i)?(n=\".\",i++):(n=null,0===o&&l('\".\"')),null!==n&&null!==(r=ve())?(46===t.charCodeAt(i)?(s=\".\",i++):(s=null,0===o&&l('\".\"')),null!==s&&null!==(a=ve())?(46===t.charCodeAt(i)?(u=\".\",i++):(u=null,0===o&&l('\".\"')),null!==u&&null!==(c=ve())?e=[e,n,r,s,a,u,c]:(e=null,i=h)):(e=null,i=h)):(e=null,i=h)):(e=null,i=h),null!==e&&(e=function(e){return Hn.host_type=\"IPv4\",t.substring(i,e)}(f)),null===e&&(i=f),e}function ve(){var e,n,r,s;return s=i,\"25\"===t.substr(i,2)?(e=\"25\",i+=2):(e=null,0===o&&l('\"25\"')),null!==e?(/^[0-5]/.test(t.charAt(i))?(n=t.charAt(i),i++):(n=null,0===o&&l(\"[0-5]\")),null!==n?e=[e,n]:(e=null,i=s)):(e=null,i=s),null===e&&(s=i,50===t.charCodeAt(i)?(e=\"2\",i++):(e=null,0===o&&l('\"2\"')),null!==e?(/^[0-4]/.test(t.charAt(i))?(n=t.charAt(i),i++):(n=null,0===o&&l(\"[0-4]\")),null!==n&&null!==(r=f())?e=[e,n,r]:(e=null,i=s)):(e=null,i=s),null===e&&(s=i,49===t.charCodeAt(i)?(e=\"1\",i++):(e=null,0===o&&l('\"1\"')),null!==e&&null!==(n=f())&&null!==(r=f())?e=[e,n,r]:(e=null,i=s),null===e&&(s=i,/^[1-9]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,0===o&&l(\"[1-9]\")),null!==e&&null!==(n=f())?e=[e,n]:(e=null,i=s),null===e&&(e=f())))),e}function me(){var e,t,n,r,s,o,a,u;return o=i,a=i,null!==(e=null!==(e=f())?e:\"\")&&null!==(t=null!==(t=f())?t:\"\")&&null!==(n=null!==(n=f())?n:\"\")&&null!==(r=null!==(r=f())?r:\"\")&&null!==(s=null!==(s=f())?s:\"\")?e=[e,t,n,r,s]:(e=null,i=a),null!==e&&(u=e,u=parseInt(u.join(\"\")),Hn.port=u,e=u),null===e&&(i=o),e}function ge(){var e,n,r,s;for(e=[],s=i,59===t.charCodeAt(i)?(n=\";\",i++):(n=null,0===o&&l('\";\"')),null!==n&&null!==(r=ye())?n=[n,r]:(n=null,i=s);null!==n;)e.push(n),s=i,59===t.charCodeAt(i)?(n=\";\",i++):(n=null,0===o&&l('\";\"')),null!==n&&null!==(r=ye())?n=[n,r]:(n=null,i=s);return e}function ye(){var e;return null===(e=Se())&&null===(e=Te())&&null===(e=be())&&null===(e=Ce())&&null===(e=Ee())&&null===(e=Ae())&&(e=we()),e}function Se(){var e,n,r,s,a;return r=i,s=i,\"transport=\"===t.substr(i,10).toLowerCase()?(e=t.substr(i,10),i+=10):(e=null,0===o&&l('\"transport=\"')),null!==e?(\"udp\"===t.substr(i,3).toLowerCase()?(n=t.substr(i,3),i+=3):(n=null,0===o&&l('\"udp\"')),null===n&&(\"tcp\"===t.substr(i,3).toLowerCase()?(n=t.substr(i,3),i+=3):(n=null,0===o&&l('\"tcp\"')),null===n&&(\"sctp\"===t.substr(i,4).toLowerCase()?(n=t.substr(i,4),i+=4):(n=null,0===o&&l('\"sctp\"')),null===n&&(\"tls\"===t.substr(i,3).toLowerCase()?(n=t.substr(i,3),i+=3):(n=null,0===o&&l('\"tls\"')),null===n&&(n=x())))),null!==n?e=[e,n]:(e=null,i=s)):(e=null,i=s),null!==e&&(a=e[1],Hn.uri_params||(Hn.uri_params={}),e=void(Hn.uri_params.transport=a.toLowerCase())),null===e&&(i=r),e}function Te(){var e,n,r,s,a;return r=i,s=i,\"user=\"===t.substr(i,5).toLowerCase()?(e=t.substr(i,5),i+=5):(e=null,0===o&&l('\"user=\"')),null!==e?(\"phone\"===t.substr(i,5).toLowerCase()?(n=t.substr(i,5),i+=5):(n=null,0===o&&l('\"phone\"')),null===n&&(\"ip\"===t.substr(i,2).toLowerCase()?(n=t.substr(i,2),i+=2):(n=null,0===o&&l('\"ip\"')),null===n&&(n=x())),null!==n?e=[e,n]:(e=null,i=s)):(e=null,i=s),null!==e&&(a=e[1],Hn.uri_params||(Hn.uri_params={}),e=void(Hn.uri_params.user=a.toLowerCase())),null===e&&(i=r),e}function be(){var e,n,r,s,a;return r=i,s=i,\"method=\"===t.substr(i,7).toLowerCase()?(e=t.substr(i,7),i+=7):(e=null,0===o&&l('\"method=\"')),null!==e&&null!==(n=ct())?e=[e,n]:(e=null,i=s),null!==e&&(a=e[1],Hn.uri_params||(Hn.uri_params={}),e=void(Hn.uri_params.method=a)),null===e&&(i=r),e}function Ce(){var e,n,r,s,a;return r=i,s=i,\"ttl=\"===t.substr(i,4).toLowerCase()?(e=t.substr(i,4),i+=4):(e=null,0===o&&l('\"ttl=\"')),null!==e&&null!==(n=En())?e=[e,n]:(e=null,i=s),null!==e&&(a=e[1],Hn.params||(Hn.params={}),e=void(Hn.params.ttl=a)),null===e&&(i=r),e}function Ee(){var e,n,r,s,a;return r=i,s=i,\"maddr=\"===t.substr(i,6).toLowerCase()?(e=t.substr(i,6),i+=6):(e=null,0===o&&l('\"maddr=\"')),null!==e&&null!==(n=ae())?e=[e,n]:(e=null,i=s),null!==e&&(a=e[1],Hn.uri_params||(Hn.uri_params={}),e=void(Hn.uri_params.maddr=a)),null===e&&(i=r),e}function Ae(){var e,n,r,s,a,u;return s=i,a=i,\"lr\"===t.substr(i,2).toLowerCase()?(e=t.substr(i,2),i+=2):(e=null,0===o&&l('\"lr\"')),null!==e?(u=i,61===t.charCodeAt(i)?(n=\"=\",i++):(n=null,0===o&&l('\"=\"')),null!==n&&null!==(r=x())?n=[n,r]:(n=null,i=u),null!==(n=null!==n?n:\"\")?e=[e,n]:(e=null,i=a)):(e=null,i=a),null!==e&&(Hn.uri_params||(Hn.uri_params={}),e=void(Hn.uri_params.lr=void 0)),null===e&&(i=s),e}function we(){var e,n,r,s,a,u,c,f;return s=i,a=i,null!==(e=Re())?(u=i,61===t.charCodeAt(i)?(n=\"=\",i++):(n=null,0===o&&l('\"=\"')),null!==n&&null!==(r=Ie())?n=[n,r]:(n=null,i=u),null!==(n=null!==n?n:\"\")?e=[e,n]:(e=null,i=a)):(e=null,i=a),null!==e&&(c=e[0],f=e[1],Hn.uri_params||(Hn.uri_params={}),f=void 0===f?void 0:f[1],e=void(Hn.uri_params[c.toLowerCase()]=f)),null===e&&(i=s),e}function Re(){var e,t,n;if(n=i,null!==(t=Oe()))for(e=[];null!==t;)e.push(t),t=Oe();else e=null;return null!==e&&(e=e.join(\"\")),null===e&&(i=n),e}function Ie(){var e,t,n;if(n=i,null!==(t=Oe()))for(e=[];null!==t;)e.push(t),t=Oe();else e=null;return null!==e&&(e=e.join(\"\")),null===e&&(i=n),e}function Oe(){var e;return null===(e=ke())&&null===(e=T())&&(e=C()),e}function ke(){var e;return 91===t.charCodeAt(i)?(e=\"[\",i++):(e=null,0===o&&l('\"[\"')),null===e&&(93===t.charCodeAt(i)?(e=\"]\",i++):(e=null,0===o&&l('\"]\"')),null===e&&(47===t.charCodeAt(i)?(e=\"/\",i++):(e=null,0===o&&l('\"/\"')),null===e&&(58===t.charCodeAt(i)?(e=\":\",i++):(e=null,0===o&&l('\":\"')),null===e&&(38===t.charCodeAt(i)?(e=\"&\",i++):(e=null,0===o&&l('\"&\"')),null===e&&(43===t.charCodeAt(i)?(e=\"+\",i++):(e=null,0===o&&l('\"+\"')),null===e&&(36===t.charCodeAt(i)?(e=\"$\",i++):(e=null,0===o&&l('\"$\"')))))))),e}function xe(){var e,n,r,s,a,u,c;if(u=i,63===t.charCodeAt(i)?(e=\"?\",i++):(e=null,0===o&&l('\"?\"')),null!==e)if(null!==(n=Ne())){for(r=[],c=i,38===t.charCodeAt(i)?(s=\"&\",i++):(s=null,0===o&&l('\"&\"')),null!==s&&null!==(a=Ne())?s=[s,a]:(s=null,i=c);null!==s;)r.push(s),c=i,38===t.charCodeAt(i)?(s=\"&\",i++):(s=null,0===o&&l('\"&\"')),null!==s&&null!==(a=Ne())?s=[s,a]:(s=null,i=c);null!==r?e=[e,n,r]:(e=null,i=u)}else e=null,i=u;else e=null,i=u;return e}function Ne(){var e,n,r,s,a,u,c;return s=i,a=i,null!==(e=Pe())?(61===t.charCodeAt(i)?(n=\"=\",i++):(n=null,0===o&&l('\"=\"')),null!==n&&null!==(r=De())?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(u=e[0],c=e[2],u=u.join(\"\").toLowerCase(),c=c.join(\"\"),Hn.uri_headers||(Hn.uri_headers={}),e=void(Hn.uri_headers[u]?Hn.uri_headers[u].push(c):Hn.uri_headers[u]=[c])),null===e&&(i=s),e}function Pe(){var e,t;if(null===(t=Ue())&&null===(t=T())&&(t=C()),null!==t)for(e=[];null!==t;)e.push(t),null===(t=Ue())&&null===(t=T())&&(t=C());else e=null;return e}function De(){var e,t;for(e=[],null===(t=Ue())&&null===(t=T())&&(t=C());null!==t;)e.push(t),null===(t=Ue())&&null===(t=T())&&(t=C());return e}function Ue(){var e;return 91===t.charCodeAt(i)?(e=\"[\",i++):(e=null,0===o&&l('\"[\"')),null===e&&(93===t.charCodeAt(i)?(e=\"]\",i++):(e=null,0===o&&l('\"]\"')),null===e&&(47===t.charCodeAt(i)?(e=\"/\",i++):(e=null,0===o&&l('\"/\"')),null===e&&(63===t.charCodeAt(i)?(e=\"?\",i++):(e=null,0===o&&l('\"?\"')),null===e&&(58===t.charCodeAt(i)?(e=\":\",i++):(e=null,0===o&&l('\":\"')),null===e&&(43===t.charCodeAt(i)?(e=\"+\",i++):(e=null,0===o&&l('\"+\"')),null===e&&(36===t.charCodeAt(i)?(e=\"$\",i++):(e=null,0===o&&l('\"$\"')))))))),e}function Me(){var e,t,n,r,s,o;return o=i,null!==(e=ct())&&null!==(t=m())&&null!==(n=Le())&&null!==(r=m())&&null!==(s=et())?e=[e,t,n,r,s]:(e=null,i=o),e}function Le(){var e;return null===(e=Q())&&(e=Fe()),e}function Fe(){var e,n,r,s;return s=i,null!==(e=ze())?(58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null!==n?(null===(r=qe())&&(r=Be()),null!==r?e=[e,n,r]:(e=null,i=s)):(e=null,i=s)):(e=null,i=s),e}function qe(){var e,n,r,s,a;return s=i,null===(e=He())&&(e=je()),null!==e?(a=i,63===t.charCodeAt(i)?(n=\"?\",i++):(n=null,0===o&&l('\"?\"')),null!==n&&null!==(r=Ze())?n=[n,r]:(n=null,i=a),null!==(n=null!==n?n:\"\")?e=[e,n]:(e=null,i=s)):(e=null,i=s),e}function He(){var e,n,r,s;return s=i,\"//\"===t.substr(i,2)?(e=\"//\",i+=2):(e=null,0===o&&l('\"//\"')),null!==e&&null!==(n=Ye())&&null!==(r=null!==(r=je())?r:\"\")?e=[e,n,r]:(e=null,i=s),e}function je(){var e,n,r;return r=i,47===t.charCodeAt(i)?(e=\"/\",i++):(e=null,0===o&&l('\"/\"')),null!==e&&null!==(n=Je())?e=[e,n]:(e=null,i=r),e}function Be(){var e,t,n,r;if(r=i,null!==(e=We())){for(t=[],n=Ge();null!==n;)t.push(n),n=Ge();null!==t?e=[e,t]:(e=null,i=r)}else e=null,i=r;return e}function Ge(){var e;return null===(e=S())&&null===(e=T())&&(e=C()),e}function We(){var e;return null===(e=T())&&null===(e=C())&&(59===t.charCodeAt(i)?(e=\";\",i++):(e=null,0===o&&l('\";\"')),null===e&&(63===t.charCodeAt(i)?(e=\"?\",i++):(e=null,0===o&&l('\"?\"')),null===e&&(58===t.charCodeAt(i)?(e=\":\",i++):(e=null,0===o&&l('\":\"')),null===e&&(64===t.charCodeAt(i)?(e=\"@\",i++):(e=null,0===o&&l('\"@\"')),null===e&&(38===t.charCodeAt(i)?(e=\"&\",i++):(e=null,0===o&&l('\"&\"')),null===e&&(61===t.charCodeAt(i)?(e=\"=\",i++):(e=null,0===o&&l('\"=\"')),null===e&&(43===t.charCodeAt(i)?(e=\"+\",i++):(e=null,0===o&&l('\"+\"')),null===e&&(36===t.charCodeAt(i)?(e=\"$\",i++):(e=null,0===o&&l('\"$\"')),null===e&&(44===t.charCodeAt(i)?(e=\",\",i++):(e=null,0===o&&l('\",\"'))))))))))),e}function Je(){var e,n,r,s,a,u;if(a=i,null!==(e=Ke())){for(n=[],u=i,47===t.charCodeAt(i)?(r=\"/\",i++):(r=null,0===o&&l('\"/\"')),null!==r&&null!==(s=Ke())?r=[r,s]:(r=null,i=u);null!==r;)n.push(r),u=i,47===t.charCodeAt(i)?(r=\"/\",i++):(r=null,0===o&&l('\"/\"')),null!==r&&null!==(s=Ke())?r=[r,s]:(r=null,i=u);null!==n?e=[e,n]:(e=null,i=a)}else e=null,i=a;return e}function Ke(){var e,n,r,s,a,u;for(a=i,e=[],n=Xe();null!==n;)e.push(n),n=Xe();if(null!==e){for(n=[],u=i,59===t.charCodeAt(i)?(r=\";\",i++):(r=null,0===o&&l('\";\"')),null!==r&&null!==(s=Ve())?r=[r,s]:(r=null,i=u);null!==r;)n.push(r),u=i,59===t.charCodeAt(i)?(r=\";\",i++):(r=null,0===o&&l('\";\"')),null!==r&&null!==(s=Ve())?r=[r,s]:(r=null,i=u);null!==n?e=[e,n]:(e=null,i=a)}else e=null,i=a;return e}function Ve(){var e,t;for(e=[],t=Xe();null!==t;)e.push(t),t=Xe();return e}function Xe(){var e;return null===(e=T())&&null===(e=C())&&(58===t.charCodeAt(i)?(e=\":\",i++):(e=null,0===o&&l('\":\"')),null===e&&(64===t.charCodeAt(i)?(e=\"@\",i++):(e=null,0===o&&l('\"@\"')),null===e&&(38===t.charCodeAt(i)?(e=\"&\",i++):(e=null,0===o&&l('\"&\"')),null===e&&(61===t.charCodeAt(i)?(e=\"=\",i++):(e=null,0===o&&l('\"=\"')),null===e&&(43===t.charCodeAt(i)?(e=\"+\",i++):(e=null,0===o&&l('\"+\"')),null===e&&(36===t.charCodeAt(i)?(e=\"$\",i++):(e=null,0===o&&l('\"$\"')),null===e&&(44===t.charCodeAt(i)?(e=\",\",i++):(e=null,0===o&&l('\",\"'))))))))),e}function ze(){var e,n,r,s,a;if(s=i,a=i,null!==(e=h())){for(n=[],null===(r=h())&&null===(r=f())&&(43===t.charCodeAt(i)?(r=\"+\",i++):(r=null,0===o&&l('\"+\"')),null===r&&(45===t.charCodeAt(i)?(r=\"-\",i++):(r=null,0===o&&l('\"-\"')),null===r&&(46===t.charCodeAt(i)?(r=\".\",i++):(r=null,0===o&&l('\".\"')))));null!==r;)n.push(r),null===(r=h())&&null===(r=f())&&(43===t.charCodeAt(i)?(r=\"+\",i++):(r=null,0===o&&l('\"+\"')),null===r&&(45===t.charCodeAt(i)?(r=\"-\",i++):(r=null,0===o&&l('\"-\"')),null===r&&(46===t.charCodeAt(i)?(r=\".\",i++):(r=null,0===o&&l('\".\"')))));null!==n?e=[e,n]:(e=null,i=a)}else e=null,i=a;return null!==e&&(e=function(e){Hn.scheme=t.substring(i,e)}(s)),null===e&&(i=s),e}function Ye(){var e;return null===(e=$e())&&(e=Qe()),e}function $e(){var e,n,r,s;return r=i,s=i,null!==(e=ne())?(64===t.charCodeAt(i)?(n=\"@\",i++):(n=null,0===o&&l('\"@\"')),null!==n?e=[e,n]:(e=null,i=s)):(e=null,i=s),null!==(e=null!==e?e:\"\")&&null!==(n=oe())?e=[e,n]:(e=null,i=r),e=null!==e?e:\"\"}function Qe(){var e,n;if(null===(n=T())&&null===(n=C())&&(36===t.charCodeAt(i)?(n=\"$\",i++):(n=null,0===o&&l('\"$\"')),null===n&&(44===t.charCodeAt(i)?(n=\",\",i++):(n=null,0===o&&l('\",\"')),null===n&&(59===t.charCodeAt(i)?(n=\";\",i++):(n=null,0===o&&l('\";\"')),null===n&&(58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null===n&&(64===t.charCodeAt(i)?(n=\"@\",i++):(n=null,0===o&&l('\"@\"')),null===n&&(38===t.charCodeAt(i)?(n=\"&\",i++):(n=null,0===o&&l('\"&\"')),null===n&&(61===t.charCodeAt(i)?(n=\"=\",i++):(n=null,0===o&&l('\"=\"')),null===n&&(43===t.charCodeAt(i)?(n=\"+\",i++):(n=null,0===o&&l('\"+\"')))))))))),null!==n)for(e=[];null!==n;)e.push(n),null===(n=T())&&null===(n=C())&&(36===t.charCodeAt(i)?(n=\"$\",i++):(n=null,0===o&&l('\"$\"')),null===n&&(44===t.charCodeAt(i)?(n=\",\",i++):(n=null,0===o&&l('\",\"')),null===n&&(59===t.charCodeAt(i)?(n=\";\",i++):(n=null,0===o&&l('\";\"')),null===n&&(58===t.charCodeAt(i)?(n=\":\",i++):(n=null,0===o&&l('\":\"')),null===n&&(64===t.charCodeAt(i)?(n=\"@\",i++):(n=null,0===o&&l('\"@\"')),null===n&&(38===t.charCodeAt(i)?(n=\"&\",i++):(n=null,0===o&&l('\"&\"')),null===n&&(61===t.charCodeAt(i)?(n=\"=\",i++):(n=null,0===o&&l('\"=\"')),null===n&&(43===t.charCodeAt(i)?(n=\"+\",i++):(n=null,0===o&&l('\"+\"'))))))))));else e=null;return e}function Ze(){var e,t;for(e=[],t=Ge();null!==t;)e.push(t),t=Ge();return e}function et(){var e,n,r,s,a,u,c,h;if(c=i,h=i,\"sip\"===t.substr(i,3).toLowerCase()?(e=t.substr(i,3),i+=3):(e=null,0===o&&l('\"SIP\"')),null!==e)if(47===t.charCodeAt(i)?(n=\"/\",i++):(n=null,0===o&&l('\"/\"')),null!==n){if(null!==(s=f()))for(r=[];null!==s;)r.push(s),s=f();else r=null;if(null!==r)if(46===t.charCodeAt(i)?(s=\".\",i++):(s=null,0===o&&l('\".\"')),null!==s){if(null!==(u=f()))for(a=[];null!==u;)a.push(u),u=f();else a=null;null!==a?e=[e,n,r,s,a]:(e=null,i=h)}else e=null,i=h;else e=null,i=h}else e=null,i=h;else e=null,i=h;return null!==e&&(e=function(e){Hn.sip_version=t.substring(i,e)}(c)),null===e&&(i=c),e}function tt(){var e;return\"INVITE\"===t.substr(i,6)?(e=\"INVITE\",i+=6):(e=null,0===o&&l('\"INVITE\"')),e}function nt(){var e;return\"ACK\"===t.substr(i,3)?(e=\"ACK\",i+=3):(e=null,0===o&&l('\"ACK\"')),e}function rt(){var e;return\"OPTIONS\"===t.substr(i,7)?(e=\"OPTIONS\",i+=7):(e=null,0===o&&l('\"OPTIONS\"')),e}function st(){var e;return\"BYE\"===t.substr(i,3)?(e=\"BYE\",i+=3):(e=null,0===o&&l('\"BYE\"')),e}function it(){var e;return\"CANCEL\"===t.substr(i,6)?(e=\"CANCEL\",i+=6):(e=null,0===o&&l('\"CANCEL\"')),e}function ot(){var e;return\"REGISTER\"===t.substr(i,8)?(e=\"REGISTER\",i+=8):(e=null,0===o&&l('\"REGISTER\"')),e}function at(){var e;return\"SUBSCRIBE\"===t.substr(i,9)?(e=\"SUBSCRIBE\",i+=9):(e=null,0===o&&l('\"SUBSCRIBE\"')),e}function ut(){var e;return\"NOTIFY\"===t.substr(i,6)?(e=\"NOTIFY\",i+=6):(e=null,0===o&&l('\"NOTIFY\"')),e}function lt(){var e;return\"REFER\"===t.substr(i,5)?(e=\"REFER\",i+=5):(e=null,0===o&&l('\"REFER\"')),e}function ct(){var e,n;return n=i,null===(e=tt())&&null===(e=nt())&&null===(e=rt())&&null===(e=st())&&null===(e=it())&&null===(e=ot())&&null===(e=at())&&null===(e=ut())&&null===(e=lt())&&(e=x()),null!==e&&(e=function(e){return Hn.method=t.substring(i,e),Hn.method}(n)),null===e&&(i=n),e}function ft(){var e,t,n,r,s,o;return o=i,null!==(e=et())&&null!==(t=m())&&null!==(n=ht())&&null!==(r=m())&&null!==(s=pt())?e=[e,t,n,r,s]:(e=null,i=o),e}function ht(){var e,t,n;return t=i,null!==(e=dt())&&(n=e,e=void(Hn.status_code=parseInt(n.join(\"\")))),null===e&&(i=t),e}function dt(){var e,t,n,r;return r=i,null!==(e=f())&&null!==(t=f())&&null!==(n=f())?e=[e,t,n]:(e=null,i=r),e}function pt(){var e,n,r;for(r=i,e=[],null===(n=S())&&null===(n=T())&&null===(n=C())&&null===(n=O())&&null===(n=k())&&null===(n=m())&&(n=g());null!==n;)e.push(n),null===(n=S())&&null===(n=T())&&null===(n=C())&&null===(n=O())&&null===(n=k())&&null===(n=m())&&(n=g());return null!==e&&(e=function(e){Hn.reason_phrase=t.substring(i,e)}(r)),null===e&&(i=r),e}function _t(){var e,t,n,r,s,o,a;if(s=i,o=i,null===(e=$())&&(e=vt()),null!==e){for(t=[],a=i,null!==(n=B())&&null!==(r=gt())?n=[n,r]:(n=null,i=a);null!==n;)t.push(n),a=i,null!==(n=B())&&null!==(r=gt())?n=[n,r]:(n=null,i=a);null!==t?e=[e,t]:(e=null,i=o)}else e=null,i=o;return null!==e&&(e=function(e){var t;Hn.multi_header||(Hn.multi_header=[]);try{t=new qn(Hn.uri,Hn.display_name,Hn.params),delete Hn.uri,delete Hn.display_name,delete Hn.params}catch(e){t=null}Hn.multi_header.push({possition:i,offset:e,parsed:t})}(s)),null===e&&(i=s),e}function vt(){var e,t,n,r,s;return s=i,null!==(e=null!==(e=mt())?e:\"\")&&null!==(t=H())&&null!==(n=Q())&&null!==(r=q())?e=[e,t,n,r]:(e=null,i=s),e}function mt(){var e,t,n,r,s,o,a,u;if(s=i,o=i,null!==(e=x())){for(t=[],a=i,null!==(n=E())&&null!==(r=x())?n=[n,r]:(n=null,i=a);null!==n;)t.push(n),a=i,null!==(n=E())&&null!==(r=x())?n=[n,r]:(n=null,i=a);null!==t?e=[e,t]:(e=null,i=o)}else e=null,i=o;return null===e&&(e=X()),null!==e&&(u=e,e=void(Hn.display_name=\"string\"==typeof u?u:u[1].reduce(function(e,t){return e+t[0]+t[1]},u[0]))),null===e&&(i=s),e}function gt(){var e;return null===(e=yt())&&null===(e=St())&&(e=Ct()),e}function yt(){var e,n,r,s,a,u;return s=i,a=i,\"q\"===t.substr(i,1).toLowerCase()?(e=t.substr(i,1),i++):(e=null,0===o&&l('\"q\"')),null!==e&&null!==(n=M())&&null!==(r=bt())?e=[e,n,r]:(e=null,i=a),null!==e&&(u=e[2],Hn.params||(Hn.params={}),e=void(Hn.params.q=u)),null===e&&(i=s),e}function St(){var e,n,r,s,a,u;return s=i,a=i,\"expires\"===t.substr(i,7).toLowerCase()?(e=t.substr(i,7),i+=7):(e=null,0===o&&l('\"expires\"')),null!==e&&null!==(n=M())&&null!==(r=Tt())?e=[e,n,r]:(e=null,i=a),null!==e&&(u=e[2],Hn.params||(Hn.params={}),e=void(Hn.params.expires=u)),null===e&&(i=s),e}function Tt(){var e,t,n;if(n=i,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;return null!==e&&(e=parseInt(e.join(\"\"))),null===e&&(i=n),e}function bt(){var e,n,r,s,a,u,c,h;return u=i,c=i,48===t.charCodeAt(i)?(e=\"0\",i++):(e=null,0===o&&l('\"0\"')),null!==e?(h=i,46===t.charCodeAt(i)?(n=\".\",i++):(n=null,0===o&&l('\".\"')),null!==n&&null!==(r=null!==(r=f())?r:\"\")&&null!==(s=null!==(s=f())?s:\"\")&&null!==(a=null!==(a=f())?a:\"\")?n=[n,r,s,a]:(n=null,i=h),null!==(n=null!==n?n:\"\")?e=[e,n]:(e=null,i=c)):(e=null,i=c),null!==e&&(e=function(e){return parseFloat(t.substring(i,e))}(u)),null===e&&(i=u),e}function Ct(){var e,t,n,r,s,o,a,u;return r=i,s=i,null!==(e=x())?(o=i,null!==(t=M())&&null!==(n=Et())?t=[t,n]:(t=null,i=o),null!==(t=null!==t?t:\"\")?e=[e,t]:(e=null,i=s)):(e=null,i=s),null!==e&&(a=e[0],u=e[1],Hn.params||(Hn.params={}),u=void 0===u?void 0:u[1],e=void(Hn.params[a.toLowerCase()]=u)),null===e&&(i=r),e}function Et(){var e;return null===(e=x())&&null===(e=ae())&&(e=V()),e}function At(){var e;return\"render\"===t.substr(i,6).toLowerCase()?(e=t.substr(i,6),i+=6):(e=null,0===o&&l('\"render\"')),null===e&&(\"session\"===t.substr(i,7).toLowerCase()?(e=t.substr(i,7),i+=7):(e=null,0===o&&l('\"session\"')),null===e&&(\"icon\"===t.substr(i,4).toLowerCase()?(e=t.substr(i,4),i+=4):(e=null,0===o&&l('\"icon\"')),null===e&&(\"alert\"===t.substr(i,5).toLowerCase()?(e=t.substr(i,5),i+=5):(e=null,0===o&&l('\"alert\"')),null===e&&(e=x())))),e}function wt(){var e;return null===(e=Rt())&&(e=Ct()),e}function Rt(){var e,n,r,s;return s=i,\"handling\"===t.substr(i,8).toLowerCase()?(e=t.substr(i,8),i+=8):(e=null,0===o&&l('\"handling\"')),null!==e&&null!==(n=M())?(\"optional\"===t.substr(i,8).toLowerCase()?(r=t.substr(i,8),i+=8):(r=null,0===o&&l('\"optional\"')),null===r&&(\"required\"===t.substr(i,8).toLowerCase()?(r=t.substr(i,8),i+=8):(r=null,0===o&&l('\"required\"')),null===r&&(r=x())),null!==r?e=[e,n,r]:(e=null,i=s)):(e=null,i=s),e}function It(){var e,t,n,r,s,o,a,u;if(a=i,null!==(e=Ot()))if(null!==(t=U()))if(null!==(n=Dt())){for(r=[],u=i,null!==(s=B())&&null!==(o=Ut())?s=[s,o]:(s=null,i=u);null!==s;)r.push(s),u=i,null!==(s=B())&&null!==(o=Ut())?s=[s,o]:(s=null,i=u);null!==r?e=[e,t,n,r]:(e=null,i=a)}else e=null,i=a;else e=null,i=a;else e=null,i=a;return e}function Ot(){var e;return null===(e=kt())&&(e=xt()),e}function kt(){var e;return\"text\"===t.substr(i,4).toLowerCase()?(e=t.substr(i,4),i+=4):(e=null,0===o&&l('\"text\"')),null===e&&(\"image\"===t.substr(i,5).toLowerCase()?(e=t.substr(i,5),i+=5):(e=null,0===o&&l('\"image\"')),null===e&&(\"audio\"===t.substr(i,5).toLowerCase()?(e=t.substr(i,5),i+=5):(e=null,0===o&&l('\"audio\"')),null===e&&(\"video\"===t.substr(i,5).toLowerCase()?(e=t.substr(i,5),i+=5):(e=null,0===o&&l('\"video\"')),null===e&&(\"application\"===t.substr(i,11).toLowerCase()?(e=t.substr(i,11),i+=11):(e=null,0===o&&l('\"application\"')),null===e&&(e=Nt()))))),e}function xt(){var e;return\"message\"===t.substr(i,7).toLowerCase()?(e=t.substr(i,7),i+=7):(e=null,0===o&&l('\"message\"')),null===e&&(\"multipart\"===t.substr(i,9).toLowerCase()?(e=t.substr(i,9),i+=9):(e=null,0===o&&l('\"multipart\"')),null===e&&(e=Nt())),e}function Nt(){var e;return null===(e=x())&&(e=Pt()),e}function Pt(){var e,n,r;return r=i,\"x-\"===t.substr(i,2).toLowerCase()?(e=t.substr(i,2),i+=2):(e=null,0===o&&l('\"x-\"')),null!==e&&null!==(n=x())?e=[e,n]:(e=null,i=r),e}function Dt(){var e;return null===(e=Nt())&&(e=x()),e}function Ut(){var e,t,n,r;return r=i,null!==(e=x())&&null!==(t=M())&&null!==(n=Mt())?e=[e,t,n]:(e=null,i=r),e}function Mt(){var e;return null===(e=x())&&(e=V()),e}function Lt(){var e,t,n,r;if(n=i,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;return null!==e&&(r=e,e=void(Hn.value=parseInt(r.join(\"\")))),null===e&&(i=n),e}function Ft(){var e,n,r,s,a,u;if(a=i,null!==(e=N())){for(n=[],u=i,46===t.charCodeAt(i)?(r=\".\",i++):(r=null,0===o&&l('\".\"')),null!==r&&null!==(s=N())?r=[r,s]:(r=null,i=u);null!==r;)n.push(r),u=i,46===t.charCodeAt(i)?(r=\".\",i++):(r=null,0===o&&l('\".\"')),null!==r&&null!==(s=N())?r=[r,s]:(r=null,i=u);null!==n?e=[e,n]:(e=null,i=a)}else e=null,i=a;return e}function qt(){var e;return null===(e=Ht())&&(e=Ct()),e}function Ht(){var e,n,r,s,a,u;return s=i,a=i,\"tag\"===t.substr(i,3).toLowerCase()?(e=t.substr(i,3),i+=3):(e=null,0===o&&l('\"tag\"')),null!==e&&null!==(n=M())&&null!==(r=x())?e=[e,n,r]:(e=null,i=a),null!==e&&(u=e[2],e=void(Hn.tag=u)),null===e&&(i=s),e}function jt(){var e,n,r,s,a,u,c,f;if(c=i,\"digest\"===t.substr(i,6).toLowerCase()?(e=t.substr(i,6),i+=6):(e=null,0===o&&l('\"Digest\"')),null!==e)if(null!==(n=E()))if(null!==(r=Wt())){for(s=[],f=i,null!==(a=j())&&null!==(u=Wt())?a=[a,u]:(a=null,i=f);null!==a;)s.push(a),f=i,null!==(a=j())&&null!==(u=Wt())?a=[a,u]:(a=null,i=f);null!==s?e=[e,n,r,s]:(e=null,i=c)}else e=null,i=c;else e=null,i=c;else e=null,i=c;return null===e&&(e=Bt()),e}function Bt(){var e,t,n,r,s,o,a,u;if(a=i,null!==(e=x()))if(null!==(t=E()))if(null!==(n=Gt())){for(r=[],u=i,null!==(s=j())&&null!==(o=Gt())?s=[s,o]:(s=null,i=u);null!==s;)r.push(s),u=i,null!==(s=j())&&null!==(o=Gt())?s=[s,o]:(s=null,i=u);null!==r?e=[e,t,n,r]:(e=null,i=a)}else e=null,i=a;else e=null,i=a;else e=null,i=a;return e}function Gt(){var e,t,n,r;return r=i,null!==(e=x())&&null!==(t=M())?(null===(n=x())&&(n=V()),null!==n?e=[e,t,n]:(e=null,i=r)):(e=null,i=r),e}function Wt(){var e;return null===(e=Jt())&&null===(e=Vt())&&null===(e=zt())&&null===(e=$t())&&null===(e=Qt())&&null===(e=Zt())&&null===(e=en())&&(e=Gt()),e}function Jt(){var e,n,r,s;return s=i,\"realm\"===t.substr(i,5).toLowerCase()?(e=t.substr(i,5),i+=5):(e=null,0===o&&l('\"realm\"')),null!==e&&null!==(n=M())&&null!==(r=Kt())?e=[e,n,r]:(e=null,i=s),e}function Kt(){var e,t,n;return t=i,null!==(e=X())&&(n=e,e=void(Hn.realm=n)),null===e&&(i=t),e}function Vt(){var e,n,r,s,a,u,c,f,h;if(f=i,\"domain\"===t.substr(i,6).toLowerCase()?(e=t.substr(i,6),i+=6):(e=null,0===o&&l('\"domain\"')),null!==e)if(null!==(n=M()))if(null!==(r=W()))if(null!==(s=Xt())){if(a=[],h=i,null!==(c=m()))for(u=[];null!==c;)u.push(c),c=m();else u=null;for(null!==u&&null!==(c=Xt())?u=[u,c]:(u=null,i=h);null!==u;){if(a.push(u),h=i,null!==(c=m()))for(u=[];null!==c;)u.push(c),c=m();else u=null;null!==u&&null!==(c=Xt())?u=[u,c]:(u=null,i=h)}null!==a&&null!==(u=J())?e=[e,n,r,s,a,u]:(e=null,i=f)}else e=null,i=f;else e=null,i=f;else e=null,i=f;else e=null,i=f;return e}function Xt(){var e;return null===(e=Fe())&&(e=je()),e}function zt(){var e,n,r,s;return s=i,\"nonce\"===t.substr(i,5).toLowerCase()?(e=t.substr(i,5),i+=5):(e=null,0===o&&l('\"nonce\"')),null!==e&&null!==(n=M())&&null!==(r=Yt())?e=[e,n,r]:(e=null,i=s),e}function Yt(){var e,t,n;return t=i,null!==(e=X())&&(n=e,e=void(Hn.nonce=n)),null===e&&(i=t),e}function $t(){var e,n,r,s,a,u;return s=i,a=i,\"opaque\"===t.substr(i,6).toLowerCase()?(e=t.substr(i,6),i+=6):(e=null,0===o&&l('\"opaque\"')),null!==e&&null!==(n=M())&&null!==(r=X())?e=[e,n,r]:(e=null,i=a),null!==e&&(u=e[2],e=void(Hn.opaque=u)),null===e&&(i=s),e}function Qt(){var e,n,r,s,a;return s=i,\"stale\"===t.substr(i,5).toLowerCase()?(e=t.substr(i,5),i+=5):(e=null,0===o&&l('\"stale\"')),null!==e&&null!==(n=M())?(a=i,\"true\"===t.substr(i,4).toLowerCase()?(r=t.substr(i,4),i+=4):(r=null,0===o&&l('\"true\"')),null!==r&&(r=void(Hn.stale=!0)),null===r&&(i=a),null===r&&(a=i,\"false\"===t.substr(i,5).toLowerCase()?(r=t.substr(i,5),i+=5):(r=null,0===o&&l('\"false\"')),null!==r&&(r=void(Hn.stale=!1)),null===r&&(i=a)),null!==r?e=[e,n,r]:(e=null,i=s)):(e=null,i=s),e}function Zt(){var e,n,r,s,a,u;return s=i,a=i,\"algorithm\"===t.substr(i,9).toLowerCase()?(e=t.substr(i,9),i+=9):(e=null,0===o&&l('\"algorithm\"')),null!==e&&null!==(n=M())?(\"md5\"===t.substr(i,3).toLowerCase()?(r=t.substr(i,3),i+=3):(r=null,0===o&&l('\"MD5\"')),null===r&&(\"md5-sess\"===t.substr(i,8).toLowerCase()?(r=t.substr(i,8),i+=8):(r=null,0===o&&l('\"MD5-sess\"')),null===r&&(r=x())),null!==r?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(u=e[2],e=void(Hn.algorithm=u.toUpperCase())),null===e&&(i=s),e}function en(){var e,n,r,s,a,u,c,f,h,d;if(f=i,\"qop\"===t.substr(i,3).toLowerCase()?(e=t.substr(i,3),i+=3):(e=null,0===o&&l('\"qop\"')),null!==e)if(null!==(n=M()))if(null!==(r=W())){if(h=i,null!==(s=tn())){for(a=[],d=i,44===t.charCodeAt(i)?(u=\",\",i++):(u=null,0===o&&l('\",\"')),null!==u&&null!==(c=tn())?u=[u,c]:(u=null,i=d);null!==u;)a.push(u),d=i,44===t.charCodeAt(i)?(u=\",\",i++):(u=null,0===o&&l('\",\"')),null!==u&&null!==(c=tn())?u=[u,c]:(u=null,i=d);null!==a?s=[s,a]:(s=null,i=h)}else s=null,i=h;null!==s&&null!==(a=J())?e=[e,n,r,s,a]:(e=null,i=f)}else e=null,i=f;else e=null,i=f;else e=null,i=f;return e}function tn(){var e,n,r;return n=i,\"auth-int\"===t.substr(i,8).toLowerCase()?(e=t.substr(i,8),i+=8):(e=null,0===o&&l('\"auth-int\"')),null===e&&(\"auth\"===t.substr(i,4).toLowerCase()?(e=t.substr(i,4),i+=4):(e=null,0===o&&l('\"auth\"')),null===e&&(e=x())),null!==e&&(r=e,Hn.qop||(Hn.qop=[]),e=void Hn.qop.push(r.toLowerCase())),null===e&&(i=n),e}function nn(){var e,t,n,r,s,o,a;if(s=i,o=i,null!==(e=vt())){for(t=[],a=i,null!==(n=B())&&null!==(r=Ct())?n=[n,r]:(n=null,i=a);null!==n;)t.push(n),a=i,null!==(n=B())&&null!==(r=Ct())?n=[n,r]:(n=null,i=a);null!==t?e=[e,t]:(e=null,i=o)}else e=null,i=o;return null!==e&&(e=function(e){var t;Hn.multi_header||(Hn.multi_header=[]);try{t=new qn(Hn.uri,Hn.display_name,Hn.params),delete Hn.uri,delete Hn.display_name,delete Hn.params}catch(e){t=null}Hn.multi_header.push({possition:i,offset:e,parsed:t})}(s)),null===e&&(i=s),e}function rn(){var e;return null===(e=sn())&&(e=Ct()),e}function sn(){var e,n,r,s,a,u,c;if(a=i,u=i,\"cause\"===t.substr(i,5).toLowerCase()?(e=t.substr(i,5),i+=5):(e=null,0===o&&l('\"cause\"')),null!==e)if(null!==(n=M())){if(null!==(s=f()))for(r=[];null!==s;)r.push(s),s=f();else r=null;null!==r?e=[e,n,r]:(e=null,i=u)}else e=null,i=u;else e=null,i=u;return null!==e&&(c=e[2],e=void(Hn.cause=parseInt(c.join(\"\")))),null===e&&(i=a),e}function on(){var e,t,n,r,s,o;if(s=i,null!==(e=vt())){for(t=[],o=i,null!==(n=B())&&null!==(r=Ct())?n=[n,r]:(n=null,i=o);null!==n;)t.push(n),o=i,null!==(n=B())&&null!==(r=Ct())?n=[n,r]:(n=null,i=o);null!==t?e=[e,t]:(e=null,i=s)}else e=null,i=s;return e}function an(){var e,n;return n=i,\"active\"===t.substr(i,6).toLowerCase()?(e=t.substr(i,6),i+=6):(e=null,0===o&&l('\"active\"')),null===e&&(\"pending\"===t.substr(i,7).toLowerCase()?(e=t.substr(i,7),i+=7):(e=null,0===o&&l('\"pending\"')),null===e&&(\"terminated\"===t.substr(i,10).toLowerCase()?(e=t.substr(i,10),i+=10):(e=null,0===o&&l('\"terminated\"')),null===e&&(e=x()))),null!==e&&(e=function(e){Hn.state=t.substring(i,e)}(n)),null===e&&(i=n),e}function un(){var e,n,r,s,a,u,c,f;return s=i,a=i,\"reason\"===t.substr(i,6).toLowerCase()?(e=t.substr(i,6),i+=6):(e=null,0===o&&l('\"reason\"')),null!==e&&null!==(n=M())&&null!==(r=ln())?e=[e,n,r]:(e=null,i=a),null!==e&&(e=void(void 0!==(u=e[2])&&(Hn.reason=u))),null===e&&(i=s),null===e&&(s=i,a=i,\"expires\"===t.substr(i,7).toLowerCase()?(e=t.substr(i,7),i+=7):(e=null,0===o&&l('\"expires\"')),null!==e&&null!==(n=M())&&null!==(r=Tt())?e=[e,n,r]:(e=null,i=a),null!==e&&(e=void(void 0!==(f=e[2])&&(Hn.expires=f))),null===e&&(i=s),null===e&&(s=i,a=i,\"retry_after\"===t.substr(i,11).toLowerCase()?(e=t.substr(i,11),i+=11):(e=null,0===o&&l('\"retry_after\"')),null!==e&&null!==(n=M())&&null!==(r=Tt())?e=[e,n,r]:(e=null,i=a),null!==e&&(e=void(void 0!==(c=e[2])&&(Hn.retry_after=c))),null===e&&(i=s),null===e&&(e=Ct()))),e}function ln(){var e;return\"deactivated\"===t.substr(i,11).toLowerCase()?(e=t.substr(i,11),i+=11):(e=null,0===o&&l('\"deactivated\"')),null===e&&(\"probation\"===t.substr(i,9).toLowerCase()?(e=t.substr(i,9),i+=9):(e=null,0===o&&l('\"probation\"')),null===e&&(\"rejected\"===t.substr(i,8).toLowerCase()?(e=t.substr(i,8),i+=8):(e=null,0===o&&l('\"rejected\"')),null===e&&(\"timeout\"===t.substr(i,7).toLowerCase()?(e=t.substr(i,7),i+=7):(e=null,0===o&&l('\"timeout\"')),null===e&&(\"giveup\"===t.substr(i,6).toLowerCase()?(e=t.substr(i,6),i+=6):(e=null,0===o&&l('\"giveup\"')),null===e&&(\"noresource\"===t.substr(i,10).toLowerCase()?(e=t.substr(i,10),i+=10):(e=null,0===o&&l('\"noresource\"')),null===e&&(\"invariant\"===t.substr(i,9).toLowerCase()?(e=t.substr(i,9),i+=9):(e=null,0===o&&l('\"invariant\"')),null===e&&(e=x()))))))),e}function cn(){var e;return null===(e=Ht())&&(e=Ct()),e}function fn(){var e,t,n,r,s,o,a,u;if(a=i,null!==(e=gn()))if(null!==(t=E()))if(null!==(n=Tn())){for(r=[],u=i,null!==(s=B())&&null!==(o=hn())?s=[s,o]:(s=null,i=u);null!==s;)r.push(s),u=i,null!==(s=B())&&null!==(o=hn())?s=[s,o]:(s=null,i=u);null!==r?e=[e,t,n,r]:(e=null,i=a)}else e=null,i=a;else e=null,i=a;else e=null,i=a;return e}function hn(){var e;return null===(e=dn())&&null===(e=pn())&&null===(e=_n())&&null===(e=vn())&&null===(e=mn())&&(e=Ct()),e}function dn(){var e,n,r,s,a,u;return s=i,a=i,\"ttl\"===t.substr(i,3).toLowerCase()?(e=t.substr(i,3),i+=3):(e=null,0===o&&l('\"ttl\"')),null!==e&&null!==(n=M())&&null!==(r=En())?e=[e,n,r]:(e=null,i=a),null!==e&&(u=e[2],e=void(Hn.ttl=u)),null===e&&(i=s),e}function pn(){var e,n,r,s,a,u;return s=i,a=i,\"maddr\"===t.substr(i,5).toLowerCase()?(e=t.substr(i,5),i+=5):(e=null,0===o&&l('\"maddr\"')),null!==e&&null!==(n=M())&&null!==(r=ae())?e=[e,n,r]:(e=null,i=a),null!==e&&(u=e[2],e=void(Hn.maddr=u)),null===e&&(i=s),e}function _n(){var e,n,r,s,a,u;return s=i,a=i,\"received\"===t.substr(i,8).toLowerCase()?(e=t.substr(i,8),i+=8):(e=null,0===o&&l('\"received\"')),null!==e&&null!==(n=M())?(null===(r=_e())&&(r=he()),null!==r?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(u=e[2],e=void(Hn.received=u)),null===e&&(i=s),e}function vn(){var e,n,r,s,a,u;return s=i,a=i,\"branch\"===t.substr(i,6).toLowerCase()?(e=t.substr(i,6),i+=6):(e=null,0===o&&l('\"branch\"')),null!==e&&null!==(n=M())&&null!==(r=x())?e=[e,n,r]:(e=null,i=a),null!==e&&(u=e[2],e=void(Hn.branch=u)),null===e&&(i=s),e}function mn(){var e,n,r,s,a,u,c;if(a=i,u=i,\"rport\"===t.substr(i,5).toLowerCase()?(e=t.substr(i,5),i+=5):(e=null,0===o&&l('\"rport\"')),null!==e){if(c=i,null!==(n=M())){for(r=[],s=f();null!==s;)r.push(s),s=f();null!==r?n=[n,r]:(n=null,i=c)}else n=null,i=c;null!==(n=null!==n?n:\"\")?e=[e,n]:(e=null,i=u)}else e=null,i=u;return null!==e&&(e=void(\"undefined\"!=typeof response_port&&(Hn.rport=response_port.join(\"\")))),null===e&&(i=a),e}function gn(){var e,t,n,r,s,o;return o=i,null!==(e=yn())&&null!==(t=U())&&null!==(n=x())&&null!==(r=U())&&null!==(s=Sn())?e=[e,t,n,r,s]:(e=null,i=o),e}function yn(){var e,n,r;return n=i,\"sip\"===t.substr(i,3).toLowerCase()?(e=t.substr(i,3),i+=3):(e=null,0===o&&l('\"SIP\"')),null===e&&(e=x()),null!==e&&(r=e,e=void(Hn.protocol=r)),null===e&&(i=n),e}function Sn(){var e,n,r;return n=i,\"udp\"===t.substr(i,3).toLowerCase()?(e=t.substr(i,3),i+=3):(e=null,0===o&&l('\"UDP\"')),null===e&&(\"tcp\"===t.substr(i,3).toLowerCase()?(e=t.substr(i,3),i+=3):(e=null,0===o&&l('\"TCP\"')),null===e&&(\"tls\"===t.substr(i,3).toLowerCase()?(e=t.substr(i,3),i+=3):(e=null,0===o&&l('\"TLS\"')),null===e&&(\"sctp\"===t.substr(i,4).toLowerCase()?(e=t.substr(i,4),i+=4):(e=null,0===o&&l('\"SCTP\"')),null===e&&(e=x())))),null!==e&&(r=e,e=void(Hn.transport=r)),null===e&&(i=n),e}function Tn(){var e,t,n,r,s;return r=i,null!==(e=bn())?(s=i,null!==(t=G())&&null!==(n=Cn())?t=[t,n]:(t=null,i=s),null!==(t=null!==t?t:\"\")?e=[e,t]:(e=null,i=r)):(e=null,i=r),e}function bn(){var e,n;return n=i,null===(e=_e())&&null===(e=fe())&&(e=ue()),null!==e&&(e=function(e){Hn.host=t.substring(i,e)}(n)),null===e&&(i=n),e}function Cn(){var e,t,n,r,s,o,a,u;return o=i,a=i,null!==(e=null!==(e=f())?e:\"\")&&null!==(t=null!==(t=f())?t:\"\")&&null!==(n=null!==(n=f())?n:\"\")&&null!==(r=null!==(r=f())?r:\"\")&&null!==(s=null!==(s=f())?s:\"\")?e=[e,t,n,r,s]:(e=null,i=a),null!==e&&(u=e,e=void(Hn.port=parseInt(u.join(\"\")))),null===e&&(i=o),e}function En(){var e,t,n,r,s;return r=i,s=i,null!==(e=f())&&null!==(t=null!==(t=f())?t:\"\")&&null!==(n=null!==(n=f())?n:\"\")?e=[e,t,n]:(e=null,i=s),null!==e&&(e=parseInt(e.join(\"\"))),null===e&&(i=r),e}function An(){var e,t,n;return t=i,null!==(e=Tt())&&(n=e,e=void(Hn.expires=n)),null===e&&(i=t),e}function wn(){var e;return null===(e=Rn())&&(e=Ct()),e}function Rn(){var e,n,r,s,a,u;return s=i,a=i,\"refresher\"===t.substr(i,9).toLowerCase()?(e=t.substr(i,9),i+=9):(e=null,0===o&&l('\"refresher\"')),null!==e&&null!==(n=M())?(\"uac\"===t.substr(i,3).toLowerCase()?(r=t.substr(i,3),i+=3):(r=null,0===o&&l('\"uac\"')),null===r&&(\"uas\"===t.substr(i,3).toLowerCase()?(r=t.substr(i,3),i+=3):(r=null,0===o&&l('\"uas\"'))),null!==r?e=[e,n,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(u=e[2],e=void(Hn.refresher=u.toLowerCase())),null===e&&(i=s),e}function In(){var e,t;for(e=[],null===(t=I())&&null===(t=k())&&(t=E());null!==t;)e.push(t),null===(t=I())&&null===(t=k())&&(t=E());return e}function On(){var e,n,r,s,a,u,c,f,h,d,p;return d=i,p=i,null!==(e=xn())?(45===t.charCodeAt(i)?(n=\"-\",i++):(n=null,0===o&&l('\"-\"')),null!==n&&null!==(r=kn())?(45===t.charCodeAt(i)?(s=\"-\",i++):(s=null,0===o&&l('\"-\"')),null!==s&&null!==(a=kn())?(45===t.charCodeAt(i)?(u=\"-\",i++):(u=null,0===o&&l('\"-\"')),null!==u&&null!==(c=kn())?(45===t.charCodeAt(i)?(f=\"-\",i++):(f=null,0===o&&l('\"-\"')),null!==f&&null!==(h=Nn())?e=[e,n,r,s,a,u,c,f,h]:(e=null,i=p)):(e=null,i=p)):(e=null,i=p)):(e=null,i=p)):(e=null,i=p),null!==e&&(e=function(e,n){Hn=t.substring(i+5,e)}(d,e[0])),null===e&&(i=d),e}function kn(){var e,t,n,r,s;return s=i,null!==(e=d())&&null!==(t=d())&&null!==(n=d())&&null!==(r=d())?e=[e,t,n,r]:(e=null,i=s),e}function xn(){var e,t,n;return n=i,null!==(e=kn())&&null!==(t=kn())?e=[e,t]:(e=null,i=n),e}function Nn(){var e,t,n,r;return r=i,null!==(e=kn())&&null!==(t=kn())&&null!==(n=kn())?e=[e,t,n]:(e=null,i=r),e}function Pn(){var e,n,r,s,a,u;return s=i,a=i,null!==(e=P())?(u=i,64===t.charCodeAt(i)?(n=\"@\",i++):(n=null,0===o&&l('\"@\"')),null!==n&&null!==(r=P())?n=[n,r]:(n=null,i=u),null!==(n=null!==n?n:\"\")?e=[e,n]:(e=null,i=a)):(e=null,i=a),null!==e&&(e=function(e){Hn.call_id=t.substring(i,e)}(s)),null===e&&(i=s),e}function Dn(){var e;return null===(e=Un())&&null===(e=Mn())&&null===(e=Ln())&&(e=Ct()),e}function Un(){var e,n,r,s,a,u;return s=i,a=i,\"to-tag\"===t.substr(i,6)?(e=\"to-tag\",i+=6):(e=null,0===o&&l('\"to-tag\"')),null!==e&&null!==(n=M())&&null!==(r=x())?e=[e,n,r]:(e=null,i=a),null!==e&&(u=e[2],e=void(Hn.to_tag=u)),null===e&&(i=s),e}function Mn(){var e,n,r,s,a,u;return s=i,a=i,\"from-tag\"===t.substr(i,8)?(e=\"from-tag\",i+=8):(e=null,0===o&&l('\"from-tag\"')),null!==e&&null!==(n=M())&&null!==(r=x())?e=[e,n,r]:(e=null,i=a),null!==e&&(u=e[2],e=void(Hn.from_tag=u)),null===e&&(i=s),e}function Ln(){var e,n;return n=i,\"early-only\"===t.substr(i,10)?(e=\"early-only\",i+=10):(e=null,0===o&&l('\"early-only\"')),null!==e&&(e=void(Hn.early_only=!0)),null===e&&(i=n),e}var Fn=n(17),qn=n(47),Hn={};if(null===s[r]()||i!==t.length){var jn=Math.max(i,a),Bn=jn<t.length?t.charAt(jn):null,Gn=function(){for(var e=1,n=1,r=!1,s=0;s<Math.max(i,a);s++){var o=t.charAt(s);\"\\n\"===o?(r||e++,n=1,r=!1):\"\\r\"===o||\"\\u2028\"===o||\"\\u2029\"===o?(e++,n=1,r=!0):(n++,r=!1)}return{line:e,column:n}}();return new this.SyntaxError(function(e){e.sort();for(var t=null,n=[],r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}(u),Bn,jn,Gn.line,Gn.column),-1}return Hn},toSource:function(){return this._source},SyntaxError:function(t,n,r,s,i){this.name=\"SyntaxError\",this.expected=t,this.found=n,this.message=function(t,n){var r;switch(t.length){case 0:r=\"end of input\";break;case 1:r=t[0];break;default:r=t.slice(0,t.length-1).join(\", \")+\" or \"+t[t.length-1]}return\"Expected \"+r+\" but \"+(n?e(n):\"end of input\")+\" found.\"}(t,n),this.offset=r,this.line=s,this.column=i}};return t.SyntaxError.prototype=Error.prototype,t}()},function(e,t,n){var r=n(10);e.exports=function(e){if(!r(e))throw TypeError(e+\" is not an object!\");return e}},function(e,t,n){var r=n(3),s=n(5),i=n(20),o=n(14),a=n(15),u=function(e,t,n){var l,c,f,h=e&u.F,d=e&u.G,p=e&u.S,_=e&u.P,v=e&u.B,m=e&u.W,g=d?s:s[t]||(s[t]={}),y=g.prototype,S=d?r:p?r[t]:(r[t]||{}).prototype;for(l in d&&(n=t),n)(c=!h&&S&&void 0!==S[l])&&a(g,l)||(f=c?S[l]:n[l],g[l]=d&&\"function\"!=typeof S[l]?n[l]:v&&c?i(f,r):m&&S[l]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):_&&\"function\"==typeof f?i(Function.call,f):f,_&&((g.virtual||(g.virtual={}))[l]=f,e&u.R&&y&&!y[l]&&o(y,l,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(7),s=n(54),i=n(37),o=Object.defineProperty;t.f=n(11)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),s)try{return o(e,t,n)}catch(e){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported!\");return\"value\"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return\"object\"==typeof e?null!==e:\"function\"==typeof e}},function(e,t,n){e.exports=!n(25)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(e,t,n){\"use strict\";var r,s=\"object\"==typeof Reflect?Reflect:null,i=s&&\"function\"==typeof s.apply?s.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=s&&\"function\"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var s,i,o,a;if(\"function\"!=typeof n)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof n);if(void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit(\"newListener\",t,n.listener?n.listener:n),i=e._events),o=i[t]),void 0===o)o=i[t]=n,++e._eventsCount;else if(\"function\"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(s=l(e))>0&&o.length>s&&!o.warned){o.warned=!0;var u=new Error(\"Possible EventEmitter memory leak detected. \"+o.length+\" \"+String(t)+\" listeners added. Use emitter.setMaxListeners() to increase limit\");u.name=\"MaxListenersExceededWarning\",u.emitter=e,u.type=t,u.count=o.length,a=u,console&&console.warn&&console.warn(a)}return e}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,i(this.listener,this.target,e))}.bind(r);return s.listener=n,r.wrapFn=s,s}function h(e,t,n){var r=e._events;if(void 0===r)return[];var s=r[t];return void 0===s?[]:\"function\"==typeof s?n?[s.listener||s]:[s]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(s):p(s,s.length)}function d(e){var t=this._events;if(void 0!==t){var n=t[e];if(\"function\"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,\"defaultMaxListeners\",{enumerable:!0,get:function(){return u},set:function(e){if(\"number\"!=typeof e||e<0||o(e))throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received '+e+\".\");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if(\"number\"!=typeof e||e<0||o(e))throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received '+e+\".\");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r=\"error\"===e,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error(\"Unhandled error.\"+(o?\" (\"+o.message+\")\":\"\"));throw a.context=o,a}var u=s[e];if(void 0===u)return!1;if(\"function\"==typeof u)i(u,this,t);else{var l=u.length,c=p(u,l);for(n=0;n<l;++n)i(c[n],this,t)}return!0},a.prototype.addListener=function(e,t){return c(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return c(this,e,t,!0)},a.prototype.once=function(e,t){if(\"function\"!=typeof t)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof t);return this.on(e,f(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if(\"function\"!=typeof t)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,f(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,s,i,o;if(\"function\"!=typeof t)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit(\"removeListener\",e,n.listener||t));else if(\"function\"!=typeof n){for(s=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){o=n[i].listener,s=i;break}if(s<0)return this;0===s?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,s),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit(\"removeListener\",e,o||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var s,i=Object.keys(n);for(r=0;r<i.length;++r)\"removeListener\"!==(s=i[r])&&this.removeAllListeners(s);return this.removeAllListeners(\"removeListener\"),this._events=Object.create(null),this._eventsCount=0,this}if(\"function\"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return\"function\"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){\"use strict\";function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function s(e,t){return!t||\"object\"!==r(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var f=n(71),h=n(1),d=n(2),p=n(47),_=n(6),v=n(0)(\"JsSIP:SIPMessage\"),m=function(){function e(t,n,r,s,i,o){if(u(this,e),!t||!n||!r)return null;s=s||{},this.ua=r,this.headers={},this.method=t,this.ruri=n,this.body=o,this.extraHeaders=d.cloneArray(i),s.route_set?this.setHeader(\"route\",s.route_set):r.configuration.use_preloaded_route&&this.setHeader(\"route\",\"<\".concat(r.transport.sip_uri,\";lr>\")),this.setHeader(\"via\",\"\"),this.setHeader(\"max-forwards\",h.MAX_FORWARDS);var a=s.to_uri||n,l=s.to_tag?{tag:s.to_tag}:null,c=void 0!==s.to_display_name?s.to_display_name:null;this.to=new p(a,c,l),this.setHeader(\"to\",this.to.toString());var f,_=s.from_uri||r.configuration.uri,v={tag:s.from_tag||d.newTag()};f=void 0!==s.from_display_name?s.from_display_name:r.configuration.display_name?r.configuration.display_name:null,this.from=new p(_,f,v),this.setHeader(\"from\",this.from.toString());var m=s.call_id||r.configuration.jssip_id+d.createRandomToken(15);this.call_id=m,this.setHeader(\"call-id\",m);var g=s.cseq||Math.floor(1e4*Math.random());this.cseq=g,this.setHeader(\"cseq\",\"\".concat(g,\" \").concat(t))}return c(e,[{key:\"setHeader\",value:function(e,t){for(var n=new RegExp(\"^\\\\s*\".concat(e,\"\\\\s*:\"),\"i\"),r=0;r<this.extraHeaders.length;r++)n.test(this.extraHeaders[r])&&this.extraHeaders.splice(r,1);this.headers[d.headerize(e)]=Array.isArray(t)?t:[t]}},{key:\"getHeader\",value:function(e){var t=this.headers[d.headerize(e)];if(t){if(t[0])return t[0]}else{var n=new RegExp(\"^\\\\s*\".concat(e,\"\\\\s*:\"),\"i\"),r=!0,s=!1,i=void 0;try{for(var o,a=this.extraHeaders[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;if(n.test(u))return u.substring(u.indexOf(\":\")+1).trim()}}catch(e){s=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(s)throw i}}}}},{key:\"getHeaders\",value:function(e){var t=this.headers[d.headerize(e)],n=[];if(t){var r=!0,s=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;n.push(u)}}catch(e){s=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(s)throw i}}return n}var l=new RegExp(\"^\\\\s*\".concat(e,\"\\\\s*:\"),\"i\"),c=!0,f=!1,h=void 0;try{for(var p,_=this.extraHeaders[Symbol.iterator]();!(c=(p=_.next()).done);c=!0){var v=p.value;l.test(v)&&n.push(v.substring(v.indexOf(\":\")+1).trim())}}catch(e){f=!0,h=e}finally{try{c||null==_.return||_.return()}finally{if(f)throw h}}return n}},{key:\"hasHeader\",value:function(e){if(this.headers[d.headerize(e)])return!0;var t=new RegExp(\"^\\\\s*\".concat(e,\"\\\\s*:\"),\"i\"),n=!0,r=!1,s=void 0;try{for(var i,o=this.extraHeaders[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(t.test(a))return!0}}catch(e){r=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}return!1}},{key:\"parseSDP\",value:function(e){return!e&&this.sdp?this.sdp:(this.sdp=f.parse(this.body||\"\"),this.sdp)}},{key:\"toString\",value:function(){var e=\"\".concat(this.method,\" \").concat(this.ruri,\" SIP/2.0\\r\\n\");for(var t in this.headers)if(Object.prototype.hasOwnProperty.call(this.headers,t)){var n=!0,r=!1,s=void 0;try{for(var i,o=this.headers[t][Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;e+=\"\".concat(t,\": \").concat(a,\"\\r\\n\")}}catch(e){r=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}}var u=!0,l=!1,c=void 0;try{for(var f,p=this.extraHeaders[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var _=f.value;e+=\"\".concat(_.trim(),\"\\r\\n\")}}catch(e){l=!0,c=e}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}var v=[];switch(this.method){case h.REGISTER:v.push(\"path\",\"gruu\");break;case h.INVITE:this.ua.configuration.session_timers&&v.push(\"timer\"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&v.push(\"gruu\"),v.push(\"ice\",\"replaces\");break;case h.UPDATE:this.ua.configuration.session_timers&&v.push(\"timer\"),v.push(\"ice\")}v.push(\"outbound\");var m=this.ua.configuration.user_agent||h.USER_AGENT;if(e+=\"Allow: \".concat(h.ALLOWED_METHODS,\"\\r\\n\"),e+=\"Supported: \".concat(v,\"\\r\\n\"),e+=\"User-Agent: \".concat(m,\"\\r\\n\"),this.body){var g=d.str_utf8_length(this.body);e+=\"Content-Length: \".concat(g,\"\\r\\n\\r\\n\"),e+=this.body}else e+=\"Content-Length: 0\\r\\n\\r\\n\";return e}},{key:\"clone\",value:function(){var t=new e(this.method,this.ruri,this.ua);return Object.keys(this.headers).forEach(function(e){t.headers[e]=this.headers[e].slice()},this),t.body=this.body,t.extraHeaders=d.cloneArray(this.extraHeaders),t.to=this.to,t.from=this.from,t.call_id=this.call_id,t.cseq=this.cseq,t}}]),e}(),g=function(e){function t(e,n,r,o,a){var l;return u(this,t),(l=s(this,i(t).call(this,h.INVITE,e,n,r,o,a))).transaction=null,l}return o(t,m),c(t,[{key:\"cancel\",value:function(e){this.transaction.cancel(e)}},{key:\"clone\",value:function(){var e=new t(this.ruri,this.ua);return Object.keys(this.headers).forEach(function(t){e.headers[t]=this.headers[t].slice()},this),e.body=this.body,e.extraHeaders=d.cloneArray(this.extraHeaders),e.to=this.to,e.from=this.from,e.call_id=this.call_id,e.cseq=this.cseq,e.transaction=this.transaction,e}}]),t}(),y=function(){function e(){u(this,e),this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}return c(e,[{key:\"addHeader\",value:function(e,t){var n={raw:t};e=d.headerize(e),this.headers[e]?this.headers[e].push(n):this.headers[e]=[n]}},{key:\"getHeader\",value:function(e){var t=this.headers[d.headerize(e)];if(t)return t[0]?t[0].raw:void 0}},{key:\"getHeaders\",value:function(e){var t=this.headers[d.headerize(e)],n=[];if(!t)return[];var r=!0,s=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;n.push(u.raw)}}catch(e){s=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(s)throw i}}return n}},{key:\"hasHeader\",value:function(e){return!!this.headers[d.headerize(e)]}},{key:\"parseHeader\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e=d.headerize(e),this.headers[e]){if(!(t>=this.headers[e].length)){var n=this.headers[e][t],r=n.raw;if(n.parsed)return n.parsed;var s=_.parse(r,e.replace(/-/g,\"_\"));return-1===s?(this.headers[e].splice(t,1),void v('error parsing \"'.concat(e,'\" header field with value \"').concat(r,'\"'))):(n.parsed=s,s)}v('not so many \"'.concat(e,'\" headers present'))}else v('header \"'.concat(e,'\" not present'))}},{key:\"s\",value:function(e,t){return this.parseHeader(e,t)}},{key:\"setHeader\",value:function(e,t){var n={raw:t};this.headers[d.headerize(e)]=[n]}},{key:\"parseSDP\",value:function(e){return!e&&this.sdp?this.sdp:(this.sdp=f.parse(this.body||\"\"),this.sdp)}},{key:\"toString\",value:function(){return this.data}}]),e}(),S=function(e){function t(e){var n;return u(this,t),(n=s(this,i(t).call(this))).ua=e,n.headers={},n.ruri=null,n.transport=null,n.server_transaction=null,n}return o(t,y),c(t,[{key:\"reply\",value:function(e,t,n,r,s,i){var o=[],a=this.getHeader(\"To\");if(t=t||null,!(e=e||null)||e<100||e>699)throw new TypeError(\"Invalid status_code: \".concat(e));if(t&&\"string\"!=typeof t&&!(t instanceof String))throw new TypeError(\"Invalid reason_phrase: \".concat(t));t=t||h.REASON_PHRASE[e]||\"\",n=d.cloneArray(n);var u=\"SIP/2.0 \".concat(e,\" \").concat(t,\"\\r\\n\");if(this.method===h.INVITE&&e>100&&e<=200){var l=this.getHeaders(\"record-route\"),c=!0,f=!1,p=void 0;try{for(var _,v=l[Symbol.iterator]();!(c=(_=v.next()).done);c=!0){var m=_.value;u+=\"Record-Route: \".concat(m,\"\\r\\n\")}}catch(e){f=!0,p=e}finally{try{c||null==v.return||v.return()}finally{if(f)throw p}}}var g=this.getHeaders(\"via\"),y=!0,S=!1,T=void 0;try{for(var b,C=g[Symbol.iterator]();!(y=(b=C.next()).done);y=!0){var E=b.value;u+=\"Via: \".concat(E,\"\\r\\n\")}}catch(e){S=!0,T=e}finally{try{y||null==C.return||C.return()}finally{if(S)throw T}}!this.to_tag&&e>100?a+=\";tag=\".concat(d.newTag()):this.to_tag&&!this.s(\"to\").hasParam(\"tag\")&&(a+=\";tag=\".concat(this.to_tag)),u+=\"To: \".concat(a,\"\\r\\n\"),u+=\"From: \".concat(this.getHeader(\"From\"),\"\\r\\n\"),u+=\"Call-ID: \".concat(this.call_id,\"\\r\\n\"),u+=\"CSeq: \".concat(this.cseq,\" \").concat(this.method,\"\\r\\n\");var A=!0,w=!1,R=void 0;try{for(var I,O=n[Symbol.iterator]();!(A=(I=O.next()).done);A=!0){var k=I.value;u+=\"\".concat(k.trim(),\"\\r\\n\")}}catch(e){w=!0,R=e}finally{try{A||null==O.return||O.return()}finally{if(w)throw R}}switch(this.method){case h.INVITE:this.ua.configuration.session_timers&&o.push(\"timer\"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&o.push(\"gruu\"),o.push(\"ice\",\"replaces\");break;case h.UPDATE:this.ua.configuration.session_timers&&o.push(\"timer\"),r&&o.push(\"ice\"),o.push(\"replaces\")}if(o.push(\"outbound\"),this.method===h.OPTIONS?(u+=\"Allow: \".concat(h.ALLOWED_METHODS,\"\\r\\n\"),u+=\"Accept: \".concat(h.ACCEPTED_BODY_TYPES,\"\\r\\n\")):405===e?u+=\"Allow: \".concat(h.ALLOWED_METHODS,\"\\r\\n\"):415===e&&(u+=\"Accept: \".concat(h.ACCEPTED_BODY_TYPES,\"\\r\\n\")),u+=\"Supported: \".concat(o,\"\\r\\n\"),r){var x=d.str_utf8_length(r);u+=\"Content-Type: application/sdp\\r\\n\",u+=\"Content-Length: \".concat(x,\"\\r\\n\\r\\n\"),u+=r}else u+=\"Content-Length: \".concat(0,\"\\r\\n\\r\\n\");this.server_transaction.receiveResponse(e,u,s,i)}},{key:\"reply_sl\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getHeaders(\"via\");if(!e||e<100||e>699)throw new TypeError(\"Invalid status_code: \".concat(e));if(t&&\"string\"!=typeof t&&!(t instanceof String))throw new TypeError(\"Invalid reason_phrase: \".concat(t));t=t||h.REASON_PHRASE[e]||\"\";var r=\"SIP/2.0 \".concat(e,\" \").concat(t,\"\\r\\n\"),s=!0,i=!1,o=void 0;try{for(var a,u=n[Symbol.iterator]();!(s=(a=u.next()).done);s=!0){var l=a.value;r+=\"Via: \".concat(l,\"\\r\\n\")}}catch(e){i=!0,o=e}finally{try{s||null==u.return||u.return()}finally{if(i)throw o}}var c=this.getHeader(\"To\");!this.to_tag&&e>100?c+=\";tag=\".concat(d.newTag()):this.to_tag&&!this.s(\"to\").hasParam(\"tag\")&&(c+=\";tag=\".concat(this.to_tag)),r+=\"To: \".concat(c,\"\\r\\n\"),r+=\"From: \".concat(this.getHeader(\"From\"),\"\\r\\n\"),r+=\"Call-ID: \".concat(this.call_id,\"\\r\\n\"),r+=\"CSeq: \".concat(this.cseq,\" \").concat(this.method,\"\\r\\n\"),r+=\"Content-Length: \".concat(0,\"\\r\\n\\r\\n\"),this.transport.send(r)}}]),t}(),T=function(e){function t(){var e;return u(this,t),(e=s(this,i(t).call(this))).headers={},e.status_code=null,e.reason_phrase=null,e}return o(t,y),t}();e.exports={OutgoingRequest:m,InitialOutgoingInviteRequest:g,IncomingRequest:S,IncomingResponse:T}},function(e,t,n){var r=n(9),s=n(26);e.exports=n(11)?function(e,t,n){return r.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){\"use strict\";function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){return!t||\"object\"!==r(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function o(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function a(e){var t=\"function\"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf(\"[native code]\")))return e;var n;if(\"function\"!=typeof e)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return u(e,arguments,c(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function u(e,t,n){return(u=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var s=new(Function.bind.apply(e,r));return n&&l(s,n.prototype),s}).apply(null,arguments)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){function t(e,n){var r;return s(this,t),(r=i(this,c(t).call(this))).code=1,r.name=\"CONFIGURATION_ERROR\",r.parameter=e,r.value=n,r.message=r.value?\"Invalid value \".concat(JSON.stringify(r.value),' for parameter \"').concat(r.parameter,'\"'):\"Missing parameter: \".concat(r.parameter),r}return o(t,a(Error)),t}(),h=function(e){function t(e){var n;return s(this,t),(n=i(this,c(t).call(this))).code=2,n.name=\"INVALID_STATE_ERROR\",n.status=e,n.message=\"Invalid status: \".concat(e),n}return o(t,a(Error)),t}(),d=function(e){function t(e){var n;return s(this,t),(n=i(this,c(t).call(this))).code=3,n.name=\"NOT_SUPPORTED_ERROR\",n.message=e,n}return o(t,a(Error)),t}(),p=function(e){function t(e){var n;return s(this,t),(n=i(this,c(t).call(this))).code=4,n.name=\"NOT_READY_ERROR\",n.message=e,n}return o(t,a(Error)),t}();e.exports={ConfigurationError:f,InvalidStateError:h,NotSupportedError:d,NotReadyError:p}},function(e,t,n){\"use strict\";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var i=n(1),o=n(2),a=n(6);e.exports=function(){function e(t,n,r,s){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),!r)throw new TypeError('missing or invalid \"host\" parameter');for(var u in this._parameters={},this._headers={},this._scheme=t||i.SIP,this._user=n,this._host=r,this._port=s,o)Object.prototype.hasOwnProperty.call(o,u)&&this.setParam(u,o[u]);for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&this.setHeader(l,a[l])}return s(e,null,[{key:\"parse\",value:function(e){return-1!==(e=a.parse(e,\"SIP_URI\"))?e:void 0}}]),s(e,[{key:\"setParam\",value:function(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}},{key:\"getParam\",value:function(e){if(e)return this._parameters[e.toLowerCase()]}},{key:\"hasParam\",value:function(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}},{key:\"deleteParam\",value:function(e){if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e)){var t=this._parameters[e];return delete this._parameters[e],t}}},{key:\"clearParams\",value:function(){this._parameters={}}},{key:\"setHeader\",value:function(e,t){this._headers[o.headerize(e)]=Array.isArray(t)?t:[t]}},{key:\"getHeader\",value:function(e){if(e)return this._headers[o.headerize(e)]}},{key:\"hasHeader\",value:function(e){if(e)return!!this._headers.hasOwnProperty(o.headerize(e))}},{key:\"deleteHeader\",value:function(e){if(e=o.headerize(e),this._headers.hasOwnProperty(e)){var t=this._headers[e];return delete this._headers[e],t}}},{key:\"clearHeaders\",value:function(){this._headers={}}},{key:\"clone\",value:function(){return new e(this._scheme,this._user,this._host,this._port,JSON.parse(JSON.stringify(this._parameters)),JSON.parse(JSON.stringify(this._headers)))}},{key:\"toString\",value:function(){var e=[],t=\"\".concat(this._scheme,\":\");for(var n in this._user&&(t+=\"\".concat(o.escapeUser(this._user),\"@\")),t+=this._host,(this._port||0===this._port)&&(t+=\":\".concat(this._port)),this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,n)&&(t+=\";\".concat(n),null!==this._parameters[n]&&(t+=\"=\".concat(this._parameters[n])));for(var r in this._headers)if(Object.prototype.hasOwnProperty.call(this._headers,r)){var s=!0,i=!1,a=void 0;try{for(var u,l=this._headers[r][Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var c=u.value;e.push(\"\".concat(r,\"=\").concat(c))}}catch(e){i=!0,a=e}finally{try{s||null==l.return||l.return()}finally{if(i)throw a}}}return e.length>0&&(t+=\"?\".concat(e.join(\"&\"))),t}},{key:\"toAor\",value:function(e){var t=\"\".concat(this._scheme,\":\");return this._user&&(t+=\"\".concat(o.escapeUser(this._user),\"@\")),t+=this._host,e&&(this._port||0===this._port)&&(t+=\":\".concat(this._port)),t}},{key:\"scheme\",get:function(){return this._scheme},set:function(e){this._scheme=e.toLowerCase()}},{key:\"user\",get:function(){return this._user},set:function(e){this._user=e}},{key:\"host\",get:function(){return this._host},set:function(e){this._host=e.toLowerCase()}},{key:\"port\",get:function(){return this._port},set:function(e){this._port=0===e?e:parseInt(e,10)||null}}]),e}()},function(e,t,n){var r=n(83),s=n(35);e.exports=function(e){return r(s(e))}},function(e,t){e.exports=!0},function(e,t,n){var r=n(24);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,s){return e.call(t,n,r,s)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports={}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){\"use strict\";function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e,t){return!t||\"object\"!==r(t)&&\"function\"!=typeof t?l(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function c(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=n(12).EventEmitter,d=n(1),p=n(13),_=n(73),v=n(0)(\"JsSIP:NonInviteClientTransaction\"),m=n(0)(\"JsSIP:InviteClientTransaction\"),g=n(0)(\"JsSIP:AckClientTransaction\"),y=n(0)(\"JsSIP:NonInviteServerTransaction\"),S=n(0)(\"JsSIP:InviteServerTransaction\"),T={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:\"nict\",NON_INVITE_SERVER:\"nist\",INVITE_CLIENT:\"ict\",INVITE_SERVER:\"ist\"},b=function(e){function t(e,n,r,i){var o;s(this,t),(o=a(this,u(t).call(this))).type=T.NON_INVITE_CLIENT,o.id=\"z9hG4bK\".concat(Math.floor(1e7*Math.random())),o.ua=e,o.transport=n,o.request=r,o.eventHandlers=i;var c=\"SIP/2.0/\".concat(n.via_transport);return c+=\" \".concat(e.configuration.via_host,\";branch=\").concat(o.id),o.request.setHeader(\"via\",c),o.ua.newTransaction(l(o)),o}return c(t,h),o(t,[{key:\"stateChanged\",value:function(e){this.state=e,this.emit(\"stateChanged\")}},{key:\"send\",value:function(){var e=this;this.stateChanged(T.STATUS_TRYING),this.F=setTimeout(function(){e.timer_F()},_.TIMER_F),this.transport.send(this.request)||this.onTransportError()}},{key:\"onTransportError\",value:function(){v(\"transport error occurred, deleting transaction \".concat(this.id)),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onTransportError()}},{key:\"timer_F\",value:function(){v(\"Timer F expired for transaction \".concat(this.id)),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout()}},{key:\"timer_K\",value:function(){this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:\"receiveResponse\",value:function(e){var t=this,n=e.status_code;if(n<200)switch(this.state){case T.STATUS_TRYING:case T.STATUS_PROCEEDING:this.stateChanged(T.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(e)}else switch(this.state){case T.STATUS_TRYING:case T.STATUS_PROCEEDING:this.stateChanged(T.STATUS_COMPLETED),clearTimeout(this.F),408===n?this.eventHandlers.onRequestTimeout():this.eventHandlers.onReceiveResponse(e),this.K=setTimeout(function(){t.timer_K()},_.TIMER_K);break;case T.STATUS_COMPLETED:}}},{key:\"C\",get:function(){return T}}]),t}(),C=function(e){function t(e,n,r,i){var o;s(this,t),(o=a(this,u(t).call(this))).type=T.INVITE_CLIENT,o.id=\"z9hG4bK\".concat(Math.floor(1e7*Math.random())),o.ua=e,o.transport=n,o.request=r,o.eventHandlers=i,r.transaction=l(o);var c=\"SIP/2.0/\".concat(n.via_transport);return c+=\" \".concat(e.configuration.via_host,\";branch=\").concat(o.id),o.request.setHeader(\"via\",c),o.ua.newTransaction(l(o)),o}return c(t,h),o(t,[{key:\"stateChanged\",value:function(e){this.state=e,this.emit(\"stateChanged\")}},{key:\"send\",value:function(){var e=this;this.stateChanged(T.STATUS_CALLING),this.B=setTimeout(function(){e.timer_B()},_.TIMER_B),this.transport.send(this.request)||this.onTransportError()}},{key:\"onTransportError\",value:function(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==T.STATUS_ACCEPTED&&(m(\"transport error occurred, deleting transaction \".concat(this.id)),this.eventHandlers.onTransportError()),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:\"timer_M\",value:function(){m(\"Timer M expired for transaction \".concat(this.id)),this.state===T.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:\"timer_B\",value:function(){m(\"Timer B expired for transaction \".concat(this.id)),this.state===T.STATUS_CALLING&&(this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout())}},{key:\"timer_D\",value:function(){m(\"Timer D expired for transaction \".concat(this.id)),clearTimeout(this.B),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:\"sendACK\",value:function(e){var t=this,n=new p.OutgoingRequest(d.ACK,this.request.ruri,this.ua,{route_set:this.request.getHeaders(\"route\"),call_id:this.request.getHeader(\"call-id\"),cseq:this.request.cseq});n.setHeader(\"from\",this.request.getHeader(\"from\")),n.setHeader(\"via\",this.request.getHeader(\"via\")),n.setHeader(\"to\",e.getHeader(\"to\")),this.D=setTimeout(function(){t.timer_D()},_.TIMER_D),this.transport.send(n)}},{key:\"cancel\",value:function(e){if(this.state===T.STATUS_PROCEEDING){var t=new p.OutgoingRequest(d.CANCEL,this.request.ruri,this.ua,{route_set:this.request.getHeaders(\"route\"),call_id:this.request.getHeader(\"call-id\"),cseq:this.request.cseq});t.setHeader(\"from\",this.request.getHeader(\"from\")),t.setHeader(\"via\",this.request.getHeader(\"via\")),t.setHeader(\"to\",this.request.getHeader(\"to\")),e&&t.setHeader(\"reason\",e),this.transport.send(t)}}},{key:\"receiveResponse\",value:function(e){var t=this,n=e.status_code;if(n>=100&&n<=199)switch(this.state){case T.STATUS_CALLING:this.stateChanged(T.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(e);break;case T.STATUS_PROCEEDING:this.eventHandlers.onReceiveResponse(e)}else if(n>=200&&n<=299)switch(this.state){case T.STATUS_CALLING:case T.STATUS_PROCEEDING:this.stateChanged(T.STATUS_ACCEPTED),this.M=setTimeout(function(){t.timer_M()},_.TIMER_M),this.eventHandlers.onReceiveResponse(e);break;case T.STATUS_ACCEPTED:this.eventHandlers.onReceiveResponse(e)}else if(n>=300&&n<=699)switch(this.state){case T.STATUS_CALLING:case T.STATUS_PROCEEDING:this.stateChanged(T.STATUS_COMPLETED),this.sendACK(e),this.eventHandlers.onReceiveResponse(e);break;case T.STATUS_COMPLETED:this.sendACK(e)}}},{key:\"C\",get:function(){return T}}]),t}(),E=function(e){function t(e,n,r,i){var o;s(this,t),(o=a(this,u(t).call(this))).id=\"z9hG4bK\".concat(Math.floor(1e7*Math.random())),o.transport=n,o.request=r,o.eventHandlers=i;var l=\"SIP/2.0/\".concat(n.via_transport);return l+=\" \".concat(e.configuration.via_host,\";branch=\").concat(o.id),o.request.setHeader(\"via\",l),o}return c(t,h),o(t,[{key:\"send\",value:function(){this.transport.send(this.request)||this.onTransportError()}},{key:\"onTransportError\",value:function(){g(\"transport error occurred for transaction \".concat(this.id)),this.eventHandlers.onTransportError()}},{key:\"C\",get:function(){return T}}]),t}(),A=function(e){function t(e,n,r){var i;return s(this,t),(i=a(this,u(t).call(this))).type=T.NON_INVITE_SERVER,i.id=r.via_branch,i.ua=e,i.transport=n,i.request=r,i.last_response=\"\",r.server_transaction=l(i),i.state=T.STATUS_TRYING,e.newTransaction(l(i)),i}return c(t,h),o(t,[{key:\"stateChanged\",value:function(e){this.state=e,this.emit(\"stateChanged\")}},{key:\"timer_J\",value:function(){y(\"Timer J expired for transaction \".concat(this.id)),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:\"onTransportError\",value:function(){this.transportError||(this.transportError=!0,y(\"transport error occurred, deleting transaction \".concat(this.id)),clearTimeout(this.J),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:\"receiveResponse\",value:function(e,t,n,r){var s=this;if(100===e)switch(this.state){case T.STATUS_TRYING:this.stateChanged(T.STATUS_PROCEEDING),this.transport.send(t)||this.onTransportError();break;case T.STATUS_PROCEEDING:this.last_response=t,this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(e>=200&&e<=699)switch(this.state){case T.STATUS_TRYING:case T.STATUS_PROCEEDING:this.stateChanged(T.STATUS_COMPLETED),this.last_response=t,this.J=setTimeout(function(){s.timer_J()},_.TIMER_J),this.transport.send(t)?n&&n():(this.onTransportError(),r&&r());break;case T.STATUS_COMPLETED:}}},{key:\"C\",get:function(){return T}}]),t}(),w=function(e){function t(e,n,r){var i;return s(this,t),(i=a(this,u(t).call(this))).type=T.INVITE_SERVER,i.id=r.via_branch,i.ua=e,i.transport=n,i.request=r,i.last_response=\"\",r.server_transaction=l(i),i.state=T.STATUS_PROCEEDING,e.newTransaction(l(i)),i.resendProvisionalTimer=null,r.reply(100),i}return c(t,h),o(t,[{key:\"stateChanged\",value:function(e){this.state=e,this.emit(\"stateChanged\")}},{key:\"timer_H\",value:function(){S(\"Timer H expired for transaction \".concat(this.id)),this.state===T.STATUS_COMPLETED&&S(\"ACK not received, dialog will be terminated\"),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:\"timer_I\",value:function(){this.stateChanged(T.STATUS_TERMINATED)}},{key:\"timer_L\",value:function(){S(\"Timer L expired for transaction \".concat(this.id)),this.state===T.STATUS_ACCEPTED&&(this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:\"onTransportError\",value:function(){this.transportError||(this.transportError=!0,S(\"transport error occurred, deleting transaction \".concat(this.id)),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(T.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:\"resend_provisional\",value:function(){this.transport.send(this.last_response)||this.onTransportError()}},{key:\"receiveResponse\",value:function(e,t,n,r){var s=this;if(e>=100&&e<=199)switch(this.state){case T.STATUS_PROCEEDING:this.transport.send(t)||this.onTransportError(),this.last_response=t}if(e>100&&e<=199&&this.state===T.STATUS_PROCEEDING)null===this.resendProvisionalTimer&&(this.resendProvisionalTimer=setInterval(function(){s.resend_provisional()},_.PROVISIONAL_RESPONSE_INTERVAL));else if(e>=200&&e<=299)switch(this.state){case T.STATUS_PROCEEDING:this.stateChanged(T.STATUS_ACCEPTED),this.last_response=t,this.L=setTimeout(function(){s.timer_L()},_.TIMER_L),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case T.STATUS_ACCEPTED:this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(e>=300&&e<=699)switch(this.state){case T.STATUS_PROCEEDING:null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(t)?(this.stateChanged(T.STATUS_COMPLETED),this.H=setTimeout(function(){s.timer_H()},_.TIMER_H),n&&n()):(this.onTransportError(),r&&r())}}},{key:\"C\",get:function(){return T}}]),t}();e.exports={C:T,NonInviteClientTransaction:b,InviteClientTransaction:C,AckClientTransaction:E,NonInviteServerTransaction:A,InviteServerTransaction:w,checkTransaction:function(e,t){var n,r=e._transactions;switch(t.method){case d.INVITE:if(n=r.ist[t.via_branch]){switch(n.state){case T.STATUS_PROCEEDING:n.transport.send(n.last_response);break;case T.STATUS_ACCEPTED:}return!0}break;case d.ACK:if(!(n=r.ist[t.via_branch]))return!1;if(n.state===T.STATUS_ACCEPTED)return!1;if(n.state===T.STATUS_COMPLETED)return n.state=T.STATUS_CONFIRMED,n.I=setTimeout(function(){n.timer_I()},_.TIMER_I),!0;break;case d.CANCEL:return(n=r.ist[t.via_branch])?(t.reply_sl(200),n.state!==T.STATUS_PROCEEDING):(t.reply_sl(481),!0);default:if(n=r.nist[t.via_branch]){switch(n.state){case T.STATUS_TRYING:break;case T.STATUS_PROCEEDING:case T.STATUS_COMPLETED:n.transport.send(n.last_response)}return!0}}}}},function(e,t){e.exports=function(e){if(\"function\"!=typeof e)throw TypeError(e+\" is not a function!\");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return\"Symbol(\".concat(void 0===e?\"\":e,\")_\",(++n+r).toString(36))}},function(e,t,n){var r=n(9).f,s=n(15),i=n(4)(\"toStringTag\");e.exports=function(e,t,n){e&&!s(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){\"use strict\";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(1),i=n(139),o=n(23),a=n(0)(\"JsSIP:RequestSender\"),u={onRequestTimeout:function(){},onTransportError:function(){},onReceiveResponse:function(){},onAuthenticated:function(){}};e.exports=function(){function e(t,n,r){for(var i in function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this._ua=t,this._eventHandlers=r,this._method=n.method,this._request=n,this._auth=null,this._challenged=!1,this._staled=!1,u)Object.prototype.hasOwnProperty.call(u,i)&&(this._eventHandlers[i]||(this._eventHandlers[i]=u[i]));t.status!==t.C.STATUS_USER_CLOSED||this._method===s.BYE&&this._method===s.ACK||this._eventHandlers.onTransportError()}var t,n,l;return t=e,(n=[{key:\"send\",value:function(){var e=this,t={onRequestTimeout:function(){e._eventHandlers.onRequestTimeout()},onTransportError:function(){e._eventHandlers.onTransportError()},onReceiveResponse:function(t){e._receiveResponse(t)}};switch(this._method){case\"INVITE\":this.clientTransaction=new o.InviteClientTransaction(this._ua,this._ua.transport,this._request,t);break;case\"ACK\":this.clientTransaction=new o.AckClientTransaction(this._ua,this._ua.transport,this._request,t);break;default:this.clientTransaction=new o.NonInviteClientTransaction(this._ua,this._ua.transport,this._request,t)}this.clientTransaction.send()}},{key:\"_receiveResponse\",value:function(e){var t,n,r=e.status_code;if(401!==r&&407!==r||null===this._ua.configuration.password&&null===this._ua.configuration.ha1)this._eventHandlers.onReceiveResponse(e);else{if(401===e.status_code?(t=e.parseHeader(\"www-authenticate\"),n=\"authorization\"):(t=e.parseHeader(\"proxy-authenticate\"),n=\"proxy-authorization\"),!t)return a(\"\".concat(e.status_code,\" with wrong or missing challenge, cannot authenticate\")),void this._eventHandlers.onReceiveResponse(e);if(!this._challenged||!this._staled&&!0===t.stale){if(this._auth||(this._auth=new i({username:this._ua.configuration.authorization_user,password:this._ua.configuration.password,realm:this._ua.configuration.realm,ha1:this._ua.configuration.ha1})),!this._auth.authenticate(this._request,t))return void this._eventHandlers.onReceiveResponse(e);this._challenged=!0,this._ua.set(\"realm\",this._auth.get(\"realm\")),this._ua.set(\"ha1\",this._auth.get(\"ha1\")),t.stale&&(this._staled=!0),this._request=this._request.clone(),this._request.cseq+=1,this._request.setHeader(\"cseq\",\"\".concat(this._request.cseq,\" \").concat(this._method)),this._request.setHeader(n,this._auth.toString()),this._eventHandlers.onAuthenticated(this._request),this.send()}else this._eventHandlers.onReceiveResponse(e)}}}])&&r(t.prototype,n),l&&r(t,l),e}()},function(e,t,n){e.exports=n(76)},function(e,t,n){\"use strict\";t.__esModule=!0;var r,s=n(78),i=(r=s)&&r.__esModule?r:{default:r};t.default=function(e){return function(){var t=e.apply(this,arguments);return new i.default(function(e,n){return function r(s,o){try{var a=t[s](o),u=a.value}catch(e){return void n(e)}if(!a.done)return i.default.resolve(u).then(function(e){r(\"next\",e)},function(e){r(\"throw\",e)});e(u)}(\"next\")})}}},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}},function(e,t,n){\"use strict\";t.__esModule=!0;var r,s=n(116),i=(r=s)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError(\"Can't call method on  \"+e);return e}},function(e,t,n){var r=n(10),s=n(3).document,i=r(s)&&r(s.createElement);e.exports=function(e){return i?s.createElement(e):{}}},function(e,t,n){var r=n(10);e.exports=function(e,t){if(!r(e))return e;var n,s;if(t&&\"function\"==typeof(n=e.toString)&&!r(s=n.call(e)))return s;if(\"function\"==typeof(n=e.valueOf)&&!r(s=n.call(e)))return s;if(!t&&\"function\"==typeof(n=e.toString)&&!r(s=n.call(e)))return s;throw TypeError(\"Can't convert object to primitive value\")}},function(e,t,n){var r=n(7),s=n(82),i=n(42),o=n(40)(\"IE_PROTO\"),a=function(){},u=function(){var e,t=n(36)(\"iframe\"),r=i.length;for(t.style.display=\"none\",n(58).appendChild(t),t.src=\"javascript:\",(e=t.contentWindow.document).open(),e.write(\"<script>document.F=Object<\\/script>\"),e.close(),u=e.F;r--;)delete u.prototype[i[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(a.prototype=r(e),n=new a,a.prototype=null,n[o]=e):n=u(),void 0===t?n:s(n,t)}},function(e,t,n){var r=n(56),s=n(42);e.exports=Object.keys||function(e){return r(e,s)}},function(e,t,n){var r=n(41)(\"keys\"),s=n(27);e.exports=function(e){return r[e]||(r[e]=s(e))}},function(e,t,n){var r=n(5),s=n(3),i=s[\"__core-js_shared__\"]||(s[\"__core-js_shared__\"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})(\"versions\",[]).push({version:r.version,mode:n(19)?\"pure\":\"global\",copyright:\" 2018 Denis Pushkarev (zloirock.ru)\"})},function(e,t){e.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},function(e,t,n){\"use strict\";var r=n(24);function s(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError(\"Bad Promise constructor\");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new s(e)}},function(e,t,n){t.f=n(4)},function(e,t,n){var r=n(3),s=n(5),i=n(19),o=n(44),a=n(9).f;e.exports=function(e){var t=s.Symbol||(s.Symbol=i?{}:r.Symbol||{});\"_\"==e.charAt(0)||e in t||a(t,e,{value:o.f(e)})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){\"use strict\";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var i=n(17),o=n(6);e.exports=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),!(t&&t instanceof i))throw new TypeError('missing or invalid \"uri\" parameter');for(var s in this._uri=t,this._parameters={},this.display_name=n,r)Object.prototype.hasOwnProperty.call(r,s)&&this.setParam(s,r[s])}return s(e,null,[{key:\"parse\",value:function(e){return-1!==(e=o.parse(e,\"Name_Addr_Header\"))?e:void 0}}]),s(e,[{key:\"setParam\",value:function(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}},{key:\"getParam\",value:function(e){if(e)return this._parameters[e.toLowerCase()]}},{key:\"hasParam\",value:function(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}},{key:\"deleteParam\",value:function(e){if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e)){var t=this._parameters[e];return delete this._parameters[e],t}}},{key:\"clearParams\",value:function(){this._parameters={}}},{key:\"clone\",value:function(){return new e(this._uri.clone(),this._display_name,JSON.parse(JSON.stringify(this._parameters)))}},{key:\"_quote\",value:function(e){return e.replace(/\\\\/g,\"\\\\\\\\\").replace(/\"/g,'\\\\\"')}},{key:\"toString\",value:function(){var e=this._display_name?'\"'.concat(this._quote(this._display_name),'\" '):\"\";for(var t in e+=\"<\".concat(this._uri.toString(),\">\"),this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,t)&&(e+=\";\".concat(t),null!==this._parameters[t]&&(e+=\"=\".concat(this._parameters[t])));return e}},{key:\"uri\",get:function(){return this._uri}},{key:\"display_name\",get:function(){return this._display_name},set:function(e){this._display_name=0===e?\"0\":e}}]),e}()},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=o(n(32)),s=o(n(33)),i=o(n(68));function o(e){return e&&e.__esModule?e:{default:e}}var a=\"jssip-wrap\",u=function(){function e(t){(0,r.default)(this,e),t?(this._debug=(0,i.default)(a+\":\"+t),this._warn=(0,i.default)(a+\":WARN:\"+t),this._error=(0,i.default)(a+\":ERROR:\"+t)):(this._debug=(0,i.default)(a),this._warn=(0,i.default)(a+\":WARN\"),this._error=(0,i.default)(a+\":ERROR\")),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return(0,s.default)(e,[{key:\"debug\",get:function(){return this._debug}},{key:\"warn\",get:function(){return this._warn}},{key:\"error\",get:function(){return this._error}}]),e}();t.default=u},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={queryAreaCode:{apiKey:\"HaeJWc31db07c761775ca5a2bcf5059a9b03626a2b32443\"},signKey:{key:\"81fa3a15a2\",version:\"1.0\"},superServerInfo:{host:\"121.40.120.51\",port:\"1046\",httpsPort:\"1047\"},wss:\"wss://s01.testsbc.com:9060\"}},function(e,t,n){\"use strict\";t.__esModule=!0;var r=o(n(105)),s=o(n(107)),i=\"function\"==typeof s.default&&\"symbol\"==typeof r.default?function(e){return typeof e}:function(e){return e&&\"function\"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?\"symbol\":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default=\"function\"==typeof s.default&&\"symbol\"===i(r.default)?function(e){return void 0===e?\"undefined\":i(e)}:function(e){return e&&\"function\"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?\"symbol\":void 0===e?\"undefined\":i(e)}},function(e,t){},function(e,t,n){\"use strict\";var r=n(80)(!0);n(53)(String,\"String\",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){\"use strict\";var r=n(19),s=n(8),i=n(55),o=n(14),a=n(21),u=n(81),l=n(28),c=n(86),f=n(4)(\"iterator\"),h=!([].keys&&\"next\"in[].keys()),d=function(){return this};e.exports=function(e,t,n,p,_,v,m){u(n,t,p);var g,y,S,T=function(e){if(!h&&e in A)return A[e];switch(e){case\"keys\":case\"values\":return function(){return new n(this,e)}}return function(){return new n(this,e)}},b=t+\" Iterator\",C=\"values\"==_,E=!1,A=e.prototype,w=A[f]||A[\"@@iterator\"]||_&&A[_],R=w||T(_),I=_?C?T(\"entries\"):R:void 0,O=\"Array\"==t&&A.entries||w;if(O&&(S=c(O.call(new e)))!==Object.prototype&&S.next&&(l(S,b,!0),r||\"function\"==typeof S[f]||o(S,f,d)),C&&w&&\"values\"!==w.name&&(E=!0,R=function(){return w.call(this)}),r&&!m||!h&&!E&&A[f]||o(A,f,R),a[t]=R,a[b]=d,_)if(g={values:C?R:T(\"values\"),keys:v?R:T(\"keys\"),entries:I},m)for(y in g)y in A||i(A,y,g[y]);else s(s.P+s.F*(h||E),t,g);return g}},function(e,t,n){e.exports=!n(11)&&!n(25)(function(){return 7!=Object.defineProperty(n(36)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(e,t,n){e.exports=n(14)},function(e,t,n){var r=n(15),s=n(18),i=n(84)(!1),o=n(40)(\"IE_PROTO\");e.exports=function(e,t){var n,a=s(e),u=0,l=[];for(n in a)n!=o&&r(a,n)&&l.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~i(l,n)||l.push(n));return l}},function(e,t,n){var r=n(34),s=Math.min;e.exports=function(e){return e>0?s(r(e),9007199254740991):0}},function(e,t,n){var r=n(3).document;e.exports=r&&r.documentElement},function(e,t,n){n(88);for(var r=n(3),s=n(14),i=n(21),o=n(4)(\"toStringTag\"),a=\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList\".split(\",\"),u=0;u<a.length;u++){var l=a[u],c=r[l],f=c&&c.prototype;f&&!f[o]&&s(f,o,l),i[l]=i.Array}},function(e,t,n){var r=n(22),s=n(4)(\"toStringTag\"),i=\"Arguments\"==r(function(){return arguments}());e.exports=function(e){var t,n,o;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),s))?n:i?r(t):\"Object\"==(o=r(t))&&\"function\"==typeof t.callee?\"Arguments\":o}},function(e,t,n){var r=n(7),s=n(24),i=n(4)(\"species\");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||null==(n=r(o)[i])?t:s(n)}},function(e,t,n){var r,s,i,o=n(20),a=n(97),u=n(58),l=n(36),c=n(3),f=c.process,h=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,_=c.Dispatch,v=0,m={},g=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},y=function(e){g.call(e.data)};h&&d||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++v]=function(){a(\"function\"==typeof e?e:Function(e),t)},r(v),v},d=function(e){delete m[e]},\"process\"==n(22)(f)?r=function(e){f.nextTick(o(g,e,1))}:_&&_.now?r=function(e){_.now(o(g,e,1))}:p?(i=(s=new p).port2,s.port1.onmessage=y,r=o(i.postMessage,i,1)):c.addEventListener&&\"function\"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+\"\",\"*\")},c.addEventListener(\"message\",y,!1)):r=\"onreadystatechange\"in l(\"script\")?function(e){u.appendChild(l(\"script\")).onreadystatechange=function(){u.removeChild(this),g.call(e)}}:function(e){setTimeout(o(g,e,1),0)}),e.exports={set:h,clear:d}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(7),s=n(10),i=n(43);e.exports=function(e,t){if(r(e),s(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(56),s=n(42).concat(\"length\",\"prototype\");t.f=Object.getOwnPropertyNames||function(e){return r(e,s)}},function(e,t,n){var r=n(46),s=n(26),i=n(18),o=n(37),a=n(15),u=n(54),l=Object.getOwnPropertyDescriptor;t.f=n(11)?l:function(e,t){if(e=i(e),t=o(t,!0),u)try{return l(e,t)}catch(e){}if(a(e,t))return s(!r.f.call(e,t),e[t])}},function(e,t,n){(function(r){function s(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&\"env\"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(120)).log=function(){return\"object\"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?\"%c\":\"\")+this.namespace+(n?\" %c\":\" \")+e[0]+(n?\"%c \":\" \")+\"+\"+t.humanize(this.diff),!n)return;var r=\"color: \"+this.color;e.splice(1,0,r,\"color: inherit\");var s=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){\"%%\"!==e&&(s++,\"%c\"===e&&(i=s))}),e.splice(i,0,r)},t.save=function(e){try{null==e?t.storage.removeItem(\"debug\"):t.storage.debug=e}catch(e){}},t.load=s,t.useColors=function(){if(\"undefined\"!=typeof window&&window.process&&\"renderer\"===window.process.type)return!0;if(\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/))return!1;return\"undefined\"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||\"undefined\"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/)},t.storage=\"undefined\"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=[\"#0000CC\",\"#0000FF\",\"#0033CC\",\"#0033FF\",\"#0066CC\",\"#0066FF\",\"#0099CC\",\"#0099FF\",\"#00CC00\",\"#00CC33\",\"#00CC66\",\"#00CC99\",\"#00CCCC\",\"#00CCFF\",\"#3300CC\",\"#3300FF\",\"#3333CC\",\"#3333FF\",\"#3366CC\",\"#3366FF\",\"#3399CC\",\"#3399FF\",\"#33CC00\",\"#33CC33\",\"#33CC66\",\"#33CC99\",\"#33CCCC\",\"#33CCFF\",\"#6600CC\",\"#6600FF\",\"#6633CC\",\"#6633FF\",\"#66CC00\",\"#66CC33\",\"#9900CC\",\"#9900FF\",\"#9933CC\",\"#9933FF\",\"#99CC00\",\"#99CC33\",\"#CC0000\",\"#CC0033\",\"#CC0066\",\"#CC0099\",\"#CC00CC\",\"#CC00FF\",\"#CC3300\",\"#CC3333\",\"#CC3366\",\"#CC3399\",\"#CC33CC\",\"#CC33FF\",\"#CC6600\",\"#CC6633\",\"#CC9900\",\"#CC9933\",\"#CCCC00\",\"#CCCC33\",\"#FF0000\",\"#FF0033\",\"#FF0066\",\"#FF0099\",\"#FF00CC\",\"#FF00FF\",\"#FF3300\",\"#FF3333\",\"#FF3366\",\"#FF3399\",\"#FF33CC\",\"#FF33FF\",\"#FF6600\",\"#FF6633\",\"#FF9900\",\"#FF9933\",\"#FFCC00\",\"#FFCC33\"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return\"[UnexpectedJSONParseError]: \"+e.message}},t.enable(s())}).call(this,n(69))},function(e,t){var n,r,s=e.exports={};function i(){throw new Error(\"setTimeout has not been defined\")}function o(){throw new Error(\"clearTimeout has not been defined\")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n=\"function\"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r=\"function\"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,l=[],c=!1,f=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&d())}function d(){if(!c){var e=a(h);c=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function _(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title=\"browser\",s.browser=!0,s.env={},s.argv=[],s.version=\"\",s.versions={},s.on=_,s.addListener=_,s.once=_,s.off=_,s.removeListener=_,s.removeAllListeners=_,s.emit=_,s.prependListener=_,s.prependOnceListener=_,s.listeners=function(e){return[]},s.binding=function(e){throw new Error(\"process.binding is not supported\")},s.cwd=function(){return\"/\"},s.chdir=function(e){throw new Error(\"process.chdir is not supported\")},s.umask=function(){return 0}},function(e){e.exports=JSON.parse('{\"_from\":\"jssip@3.3.6\",\"_id\":\"jssip@3.3.6\",\"_inBundle\":false,\"_integrity\":\"sha1-U4iWJEN604ZXgVnMJn/O+wYpClc=\",\"_location\":\"/jssip\",\"_phantomChildren\":{},\"_requested\":{\"type\":\"version\",\"registry\":true,\"raw\":\"jssip@3.3.6\",\"name\":\"jssip\",\"escapedName\":\"jssip\",\"rawSpec\":\"3.3.6\",\"saveSpec\":null,\"fetchSpec\":\"3.3.6\"},\"_requiredBy\":[\"#USER\",\"/\"],\"_resolved\":\"https://registry.npm.taobao.org/jssip/download/jssip-3.3.6.tgz\",\"_shasum\":\"53889624437ad386578159cc267fcefb06290a57\",\"_spec\":\"jssip@3.3.6\",\"_where\":\"/Users/qiulang/Dev/JsSipWrap\",\"author\":{\"name\":\"Jos Luis Milln\",\"email\":\"jmillan@aliax.net\",\"url\":\"https://github.com/jmillan\"},\"bugs\":{\"url\":\"https://github.com/versatica/JsSIP/issues\"},\"bundleDependencies\":false,\"contributors\":[{\"name\":\"Iaki Baz Castillo\",\"email\":\"ibc@aliax.net\",\"url\":\"https://github.com/ibc\"}],\"dependencies\":{\"debug\":\"^4.1.1\",\"events\":\"^3.0.0\",\"sdp-transform\":\"^2.7.0\"},\"deprecated\":false,\"description\":\"the Javascript SIP library\",\"devDependencies\":{\"@babel/core\":\"^7.4.3\",\"@babel/preset-env\":\"^7.4.3\",\"ansi-colors\":\"^3.2.4\",\"browserify\":\"^16.2.3\",\"eslint\":\"^5.16.0\",\"fancy-log\":\"^1.3.3\",\"gulp\":\"^4.0.0\",\"gulp-babel\":\"^8.0.0\",\"gulp-eslint\":\"^5.0.0\",\"gulp-expect-file\":\"^1.0.1\",\"gulp-header\":\"^2.0.7\",\"gulp-nodeunit-runner\":\"^0.2.2\",\"gulp-plumber\":\"^1.2.1\",\"gulp-rename\":\"^1.4.0\",\"gulp-uglify-es\":\"^1.0.4\",\"pegjs\":\"^0.7.0\",\"vinyl-buffer\":\"^1.0.1\",\"vinyl-source-stream\":\"^2.0.0\"},\"homepage\":\"https://jssip.net\",\"keywords\":[\"sip\",\"websocket\",\"webrtc\",\"node\",\"browser\",\"library\"],\"license\":\"MIT\",\"main\":\"lib-es5/JsSIP.js\",\"name\":\"jssip\",\"repository\":{\"type\":\"git\",\"url\":\"git+https://github.com/versatica/JsSIP.git\"},\"scripts\":{\"lint\":\"gulp lint\",\"prepublishOnly\":\"gulp babel\",\"test\":\"gulp test\"},\"title\":\"JsSIP\",\"version\":\"3.3.6\"}')},function(e,t,n){var r=n(135),s=n(136);t.write=s,t.parse=r.parse,t.parseFmtpConfig=r.parseFmtpConfig,t.parseParams=r.parseParams,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates,t.parseImageAttributes=r.parseImageAttributes,t.parseSimulcastStreamList=r.parseSimulcastStreamList},function(e,t){var n=e.exports={v:[{name:\"version\",reg:/^(\\d*)$/}],o:[{name:\"origin\",reg:/^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,names:[\"username\",\"sessionId\",\"sessionVersion\",\"netType\",\"ipVer\",\"address\"],format:\"%s %s %d %s IP%d %s\"}],s:[{name:\"name\"}],i:[{name:\"description\"}],u:[{name:\"uri\"}],e:[{name:\"email\"}],p:[{name:\"phone\"}],z:[{name:\"timezones\"}],r:[{name:\"repeats\"}],t:[{name:\"timing\",reg:/^(\\d*) (\\d*)/,names:[\"start\",\"stop\"],format:\"%d %d\"}],c:[{name:\"connection\",reg:/^IN IP(\\d) (\\S*)/,names:[\"version\",\"ip\"],format:\"IN IP%d %s\"}],b:[{push:\"bandwidth\",reg:/^(TIAS|AS|CT|RR|RS):(\\d*)/,names:[\"type\",\"limit\"],format:\"%s:%s\"}],m:[{reg:/^(\\w*) (\\d*) ([\\w\\/]*)(?: (.*))?/,names:[\"type\",\"port\",\"protocol\",\"payloads\"],format:\"%s %d %s %s\"}],a:[{push:\"rtp\",reg:/^rtpmap:(\\d*) ([\\w\\-.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,names:[\"payload\",\"codec\",\"rate\",\"encoding\"],format:function(e){return e.encoding?\"rtpmap:%d %s/%s/%s\":e.rate?\"rtpmap:%d %s/%s\":\"rtpmap:%d %s\"}},{push:\"fmtp\",reg:/^fmtp:(\\d*) ([\\S| ]*)/,names:[\"payload\",\"config\"],format:\"fmtp:%d %s\"},{name:\"control\",reg:/^control:(.*)/,format:\"control:%s\"},{name:\"rtcp\",reg:/^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,names:[\"port\",\"netType\",\"ipVer\",\"address\"],format:function(e){return null!=e.address?\"rtcp:%d %s IP%d %s\":\"rtcp:%d\"}},{push:\"rtcpFbTrrInt\",reg:/^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,names:[\"payload\",\"value\"],format:\"rtcp-fb:%d trr-int %d\"},{push:\"rtcpFb\",reg:/^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,names:[\"payload\",\"type\",\"subtype\"],format:function(e){return null!=e.subtype?\"rtcp-fb:%s %s %s\":\"rtcp-fb:%s %s\"}},{push:\"ext\",reg:/^extmap:(\\d+)(?:\\/(\\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\\S*)(?: (\\S*))?/,names:[\"value\",\"direction\",\"encrypt-uri\",\"uri\",\"config\"],format:function(e){return\"extmap:%d\"+(e.direction?\"/%s\":\"%v\")+(e[\"encrypt-uri\"]?\" %s\":\"%v\")+\" %s\"+(e.config?\" %s\":\"\")}},{push:\"crypto\",reg:/^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,names:[\"id\",\"suite\",\"config\",\"sessionConfig\"],format:function(e){return null!=e.sessionConfig?\"crypto:%d %s %s %s\":\"crypto:%d %s %s\"}},{name:\"setup\",reg:/^setup:(\\w*)/,format:\"setup:%s\"},{name:\"connectionType\",reg:/^connection:(new|existing)/,format:\"connection:%s\"},{name:\"mid\",reg:/^mid:([^\\s]*)/,format:\"mid:%s\"},{name:\"msid\",reg:/^msid:(.*)/,format:\"msid:%s\"},{name:\"ptime\",reg:/^ptime:(\\d*)/,format:\"ptime:%d\"},{name:\"maxptime\",reg:/^maxptime:(\\d*)/,format:\"maxptime:%d\"},{name:\"direction\",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:\"icelite\",reg:/^(ice-lite)/},{name:\"iceUfrag\",reg:/^ice-ufrag:(\\S*)/,format:\"ice-ufrag:%s\"},{name:\"icePwd\",reg:/^ice-pwd:(\\S*)/,format:\"ice-pwd:%s\"},{name:\"fingerprint\",reg:/^fingerprint:(\\S*) (\\S*)/,names:[\"type\",\"hash\"],format:\"fingerprint:%s %s\"},{push:\"candidates\",reg:/^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,names:[\"foundation\",\"component\",\"transport\",\"priority\",\"ip\",\"port\",\"type\",\"raddr\",\"rport\",\"tcptype\",\"generation\",\"network-id\",\"network-cost\"],format:function(e){var t=\"candidate:%s %d %s %d %s %d typ %s\";return t+=null!=e.raddr?\" raddr %s rport %d\":\"%v%v\",t+=null!=e.tcptype?\" tcptype %s\":\"%v\",null!=e.generation&&(t+=\" generation %d\"),t+=null!=e[\"network-id\"]?\" network-id %d\":\"%v\",t+=null!=e[\"network-cost\"]?\" network-cost %d\":\"%v\"}},{name:\"endOfCandidates\",reg:/^(end-of-candidates)/},{name:\"remoteCandidates\",reg:/^remote-candidates:(.*)/,format:\"remote-candidates:%s\"},{name:\"iceOptions\",reg:/^ice-options:(\\S*)/,format:\"ice-options:%s\"},{push:\"ssrcs\",reg:/^ssrc:(\\d*) ([\\w_-]*)(?::(.*))?/,names:[\"id\",\"attribute\",\"value\"],format:function(e){var t=\"ssrc:%d\";return null!=e.attribute&&(t+=\" %s\",null!=e.value&&(t+=\":%s\")),t}},{push:\"ssrcGroups\",reg:/^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,names:[\"semantics\",\"ssrcs\"],format:\"ssrc-group:%s %s\"},{name:\"msidSemantic\",reg:/^msid-semantic:\\s?(\\w*) (\\S*)/,names:[\"semantic\",\"token\"],format:\"msid-semantic: %s %s\"},{push:\"groups\",reg:/^group:(\\w*) (.*)/,names:[\"type\",\"mids\"],format:\"group:%s %s\"},{name:\"rtcpMux\",reg:/^(rtcp-mux)/},{name:\"rtcpRsize\",reg:/^(rtcp-rsize)/},{name:\"sctpmap\",reg:/^sctpmap:([\\w_\\/]*) (\\S*)(?: (\\S*))?/,names:[\"sctpmapNumber\",\"app\",\"maxMessageSize\"],format:function(e){return null!=e.maxMessageSize?\"sctpmap:%s %s %s\":\"sctpmap:%s %s\"}},{name:\"xGoogleFlag\",reg:/^x-google-flag:([^\\s]*)/,format:\"x-google-flag:%s\"},{push:\"rids\",reg:/^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,names:[\"id\",\"direction\",\"params\"],format:function(e){return e.params?\"rid:%s %s %s\":\"rid:%s %s\"}},{push:\"imageattrs\",reg:new RegExp(\"^imageattr:(\\\\d+|\\\\*)[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?\"),names:[\"pt\",\"dir1\",\"attrs1\",\"dir2\",\"attrs2\"],format:function(e){return\"imageattr:%s %s %s\"+(e.dir2?\" %s %s\":\"\")}},{name:\"simulcast\",reg:new RegExp(\"^simulcast:(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?$\"),names:[\"dir1\",\"list1\",\"dir2\",\"list2\"],format:function(e){return\"simulcast:%s %s\"+(e.dir2?\" %s %s\":\"\")}},{name:\"simulcast_03\",reg:/^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,names:[\"value\"],format:\"simulcast: %s\"},{name:\"framerate\",reg:/^framerate:(\\d+(?:$|\\.\\d+))/,format:\"framerate:%s\"},{name:\"sourceFilter\",reg:/^source-filter: *(excl|incl) (\\S*) (IP4|IP6|\\*) (\\S*) (.*)/,names:[\"filterMode\",\"netType\",\"addressTypes\",\"destAddress\",\"srcList\"],format:\"source-filter: %s %s %s %s %s\"},{name:\"bundleOnly\",reg:/^(bundle-only)/},{name:\"label\",reg:/^label:(.+)/,format:\"label:%s\"},{name:\"sctpPort\",reg:/^sctp-port:(\\d+)$/,format:\"sctp-port:%s\"},{name:\"maxMessageSize\",reg:/^max-message-size:(\\d+)$/,format:\"max-message-size:%s\"},{name:\"keywords\",reg:/^keywds:(.+)$/,format:\"keywds:%s\"},{push:\"invalid\",names:[\"value\"]}]};Object.keys(n).forEach(function(e){n[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format=\"%s\")})})},function(e,t,n){\"use strict\";var r=500;e.exports={T1:r,T2:4e3,T4:5e3,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4}},function(e,t,n){\"use strict\";function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function s(e,t){return!t||\"object\"!==r(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=n(12).EventEmitter,c=n(71),f=n(1),h=n(16),d=n(23),p=n(2),_=n(73),v=n(13),m=n(140),g=n(29),y=n(142),S=n(143),T=n(144),b=n(145),C=n(17),E=n(0)(\"JsSIP:RTCSession\"),A=n(0)(\"JsSIP:ERROR:RTCSession\");A.log=console.warn.bind(console);var w={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9},R=[\"audio\",\"video\"];e.exports=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),E(\"new\"),(n=s(this,i(t).call(this)))._id=null,n._ua=e,n._status=w.STATUS_NULL,n._dialog=null,n._earlyDialogs={},n._contact=null,n._from_tag=null,n._to_tag=null,n._connection=null,n._connectionPromiseQueue=Promise.resolve(),n._request=null,n._is_canceled=!1,n._cancel_reason=\"\",n._is_confirmed=!1,n._late_sdp=!1,n._rtcOfferConstraints=null,n._rtcAnswerConstraints=null,n._localMediaStream=null,n._localMediaStreamLocallyGenerated=!1,n._rtcReady=!0,n._timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},n._direction=null,n._local_identity=null,n._remote_identity=null,n._start_time=null,n._end_time=null,n._tones=null,n._audioMuted=!1,n._videoMuted=!1,n._localHold=!1,n._remoteHold=!1,n._sessionTimers={enabled:n._ua.configuration.session_timers,refreshMethod:n._ua.configuration.session_timers_refresh_method,defaultExpires:f.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},n._referSubscribers={},n._data={},n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,l),a(t,null,[{key:\"C\",get:function(){return w}}]),a(t,[{key:\"isInProgress\",value:function(){switch(this._status){case w.STATUS_NULL:case w.STATUS_INVITE_SENT:case w.STATUS_1XX_RECEIVED:case w.STATUS_INVITE_RECEIVED:case w.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}}},{key:\"isEstablished\",value:function(){switch(this._status){case w.STATUS_ANSWERED:case w.STATUS_WAITING_FOR_ACK:case w.STATUS_CONFIRMED:return!0;default:return!1}}},{key:\"isEnded\",value:function(){switch(this._status){case w.STATUS_CANCELED:case w.STATUS_TERMINATED:return!0;default:return!1}}},{key:\"isMuted\",value:function(){return{audio:this._audioMuted,video:this._videoMuted}}},{key:\"isOnHold\",value:function(){return{local:this._localHold,remote:this._remoteHold}}},{key:\"connect\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;E(\"connect()\");var r=e,s=t.eventHandlers||{},i=p.cloneArray(t.extraHeaders),o=t.mediaConstraints||{audio:!0,video:!0},a=t.mediaStream||null,u=t.pcConfig||{iceServers:[]},l=t.rtcConstraints||null,c=t.rtcOfferConstraints||null;if(this._rtcOfferConstraints=c,this._rtcAnswerConstraints=t.rtcAnswerConstraints||null,this._data=t.data||this._data,void 0===e)throw new TypeError(\"Not enough arguments\");if(this._status!==w.STATUS_NULL)throw new h.InvalidStateError(this._status);if(!window.RTCPeerConnection)throw new h.NotSupportedError(\"WebRTC not supported\");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError(\"Invalid target: \".concat(r));for(var d in this._sessionTimers.enabled&&p.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=f.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=t.sessionTimersExpires:this._sessionTimers.defaultExpires=f.SESSION_EXPIRES),s)Object.prototype.hasOwnProperty.call(s,d)&&this.on(d,s[d]);this._from_tag=p.newTag();var _=t.anonymous||!1,m={from_tag:this._from_tag};this._contact=this._ua.contact.toString({anonymous:_,outbound:!0}),_&&(m.from_display_name=\"Anonymous\",m.from_uri=new C(\"sip\",\"anonymous\",\"anonymous.invalid\"),i.push(\"P-Preferred-Identity: \".concat(this._ua.configuration.uri.toString())),i.push(\"Privacy: id\")),i.push(\"Contact: \".concat(this._contact)),i.push(\"Content-Type: application/sdp\"),this._sessionTimers.enabled&&i.push(\"Session-Expires: \".concat(this._sessionTimers.defaultExpires)),this._request=new v.InitialOutgoingInviteRequest(e,this._ua,m,i),this._id=this._request.call_id+this._from_tag,this._createRTCConnection(u,l),this._direction=\"outgoing\",this._local_identity=this._request.from,this._remote_identity=this._request.to,n&&n(this),this._newRTCSession(\"local\",this._request),this._sendInitialRequest(o,c,a)}},{key:\"init_incoming\",value:function(e,t){var n,r=this;E(\"init_incoming()\");var s=e.getHeader(\"Content-Type\");e.body&&\"application/sdp\"!==s?e.reply(415):(this._status=w.STATUS_INVITE_RECEIVED,this._from_tag=e.from_tag,this._id=e.call_id+this._from_tag,this._request=e,this._contact=this._ua.contact.toString(),e.hasHeader(\"expires\")&&(n=1e3*e.getHeader(\"expires\")),e.to_tag=p.newTag(),this._createDialog(e,\"UAS\",!0)?(e.body?this._late_sdp=!1:this._late_sdp=!0,this._status=w.STATUS_WAITING_FOR_ANSWER,this._timers.userNoAnswerTimer=setTimeout(function(){e.reply(408),r._failed(\"local\",null,f.causes.NO_ANSWER)},this._ua.configuration.no_answer_timeout),n&&(this._timers.expiresTimer=setTimeout(function(){r._status===w.STATUS_WAITING_FOR_ANSWER&&(e.reply(487),r._failed(\"system\",null,f.causes.EXPIRES))},n)),this._direction=\"incoming\",this._local_identity=e.to,this._remote_identity=e.from,t&&t(this),this._newRTCSession(\"remote\",e),this._status!==w.STATUS_TERMINATED&&(e.reply(180,null,[\"Contact: \".concat(this._contact)]),this._progress(\"local\",null))):e.reply(500,\"Missing Contact header field\"))}},{key:\"answer\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(\"answer()\");var n,r=this._request,s=p.cloneArray(t.extraHeaders),i=t.mediaConstraints||{},o=t.mediaStream||null,a=t.pcConfig||{iceServers:[]},u=t.rtcConstraints||null,l=t.rtcAnswerConstraints||null,c=!1,d=!1,_=!1,v=!1;if(this._rtcAnswerConstraints=l,this._rtcOfferConstraints=t.rtcOfferConstraints||null,this._data=t.data||this._data,\"incoming\"!==this._direction)throw new h.NotSupportedError('\"answer\" not supported for outgoing RTCSession');if(this._status!==w.STATUS_WAITING_FOR_ANSWER)throw new h.InvalidStateError(this._status);if(this._sessionTimers.enabled&&p.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=f.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=t.sessionTimersExpires:this._sessionTimers.defaultExpires=f.SESSION_EXPIRES),this._status=w.STATUS_ANSWERED,this._createDialog(r,\"UAS\")){clearTimeout(this._timers.userNoAnswerTimer),s.unshift(\"Contact: \".concat(this._contact));var m=r.parseSDP();Array.isArray(m.media)||(m.media=[m.media]);var g=!0,y=!1,S=void 0;try{for(var T,b=m.media[Symbol.iterator]();!(g=(T=b.next()).done);g=!0){var C=T.value;\"audio\"===C.type&&(c=!0,C.direction&&\"sendrecv\"!==C.direction||(_=!0)),\"video\"===C.type&&(d=!0,C.direction&&\"sendrecv\"!==C.direction||(v=!0))}}catch(e){y=!0,S=e}finally{try{g||null==b.return||b.return()}finally{if(y)throw S}}if(o&&!1===i.audio){n=o.getAudioTracks();var R=!0,I=!1,O=void 0;try{for(var k,x=n[Symbol.iterator]();!(R=(k=x.next()).done);R=!0){var N=k.value;o.removeTrack(N)}}catch(e){I=!0,O=e}finally{try{R||null==x.return||x.return()}finally{if(I)throw O}}}if(o&&!1===i.video){n=o.getVideoTracks();var P=!0,D=!1,U=void 0;try{for(var M,L=n[Symbol.iterator]();!(P=(M=L.next()).done);P=!0){var F=M.value;o.removeTrack(F)}}catch(e){D=!0,U=e}finally{try{P||null==L.return||L.return()}finally{if(D)throw U}}}o||void 0!==i.audio||(i.audio=_),o||void 0!==i.video||(i.video=v),o||c||(i.audio=!1),o||d||(i.video=!1),this._createRTCConnection(a,u),Promise.resolve().then(function(){return o||(i.audio||i.video?(e._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(i).catch(function(t){if(e._status===w.STATUS_TERMINATED)throw new Error(\"terminated\");throw r.reply(480),e._failed(\"local\",null,f.causes.USER_DENIED_MEDIA_ACCESS),A('emit \"getusermediafailed\" [error:%o]',t),e.emit(\"getusermediafailed\",t),new Error(\"getUserMedia() failed\")})):void 0)}).then(function(t){if(e._status===w.STATUS_TERMINATED)throw new Error(\"terminated\");e._localMediaStream=t,t&&t.getTracks().forEach(function(n){e._connection.addTrack(n,t)})}).then(function(){if(!e._late_sdp){var t={originator:\"remote\",type:\"offer\",sdp:r.body};E('emit \"sdp\"'),e.emit(\"sdp\",t);var n=new RTCSessionDescription({type:\"offer\",sdp:t.sdp});return e._connectionPromiseQueue=e._connectionPromiseQueue.then(function(){return e._connection.setRemoteDescription(n)}).catch(function(t){throw r.reply(488),e._failed(\"system\",null,f.causes.WEBRTC_ERROR),A('emit \"peerconnection:setremotedescriptionfailed\" [error:%o]',t),e.emit(\"peerconnection:setremotedescriptionfailed\",t),new Error(\"peerconnection.setRemoteDescription() failed\")}),e._connectionPromiseQueue}}).then(function(){if(e._status===w.STATUS_TERMINATED)throw new Error(\"terminated\");return e._connecting(r),e._late_sdp?e._createLocalDescription(\"offer\",e._rtcOfferConstraints).catch(function(){throw r.reply(500),new Error(\"_createLocalDescription() failed\")}):e._createLocalDescription(\"answer\",l).catch(function(){throw r.reply(500),new Error(\"_createLocalDescription() failed\")})}).then(function(t){if(e._status===w.STATUS_TERMINATED)throw new Error(\"terminated\");e._handleSessionTimersInIncomingRequest(r,s),r.reply(200,null,s,t,function(){e._status=w.STATUS_WAITING_FOR_ACK,e._setInvite2xxTimer(r,t),e._setACKTimer(),e._accepted(\"local\")},function(){e._failed(\"system\",null,f.causes.CONNECTION_ERROR)})}).catch(function(t){e._status!==w.STATUS_TERMINATED&&A(t)})}else r.reply(500,\"Error creating dialog\")}},{key:\"terminate\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(\"terminate()\");var n,r=t.cause||f.causes.BYE,s=p.cloneArray(t.extraHeaders),i=t.body,o=t.status_code,a=t.reason_phrase;if(this._status===w.STATUS_TERMINATED)throw new h.InvalidStateError(this._status);switch(this._status){case w.STATUS_NULL:case w.STATUS_INVITE_SENT:case w.STATUS_1XX_RECEIVED:if(E(\"canceling session\"),o&&(o<200||o>=700))throw new TypeError(\"Invalid status_code: \".concat(o));o&&(a=a||f.REASON_PHRASE[o]||\"\",n=\"SIP ;cause=\".concat(o,' ;text=\"').concat(a,'\"')),this._status===w.STATUS_NULL||this._status===w.STATUS_INVITE_SENT?(this._is_canceled=!0,this._cancel_reason=n):this._status===w.STATUS_1XX_RECEIVED&&this._request.cancel(n),this._status=w.STATUS_CANCELED,this._failed(\"local\",null,f.causes.CANCELED);break;case w.STATUS_WAITING_FOR_ANSWER:case w.STATUS_ANSWERED:if(E(\"rejecting session\"),(o=o||480)<300||o>=700)throw new TypeError(\"Invalid status_code: \".concat(o));this._request.reply(o,a,s,i),this._failed(\"local\",null,f.causes.REJECTED);break;case w.STATUS_WAITING_FOR_ACK:case w.STATUS_CONFIRMED:if(E(\"terminating session\"),a=t.reason_phrase||f.REASON_PHRASE[o]||\"\",o&&(o<200||o>=700))throw new TypeError(\"Invalid status_code: \".concat(o));if(o&&s.push(\"Reason: SIP ;cause=\".concat(o,'; text=\"').concat(a,'\"')),this._status===w.STATUS_WAITING_FOR_ACK&&\"incoming\"===this._direction&&this._request.server_transaction.state!==d.C.STATUS_TERMINATED){var u=this._dialog;this.receiveRequest=function(t){t.method===f.ACK&&(e.sendRequest(f.BYE,{extraHeaders:s,body:i}),u.terminate())},this._request.server_transaction.on(\"stateChanged\",function(){e._request.server_transaction.state===d.C.STATUS_TERMINATED&&(e.sendRequest(f.BYE,{extraHeaders:s,body:i}),u.terminate())}),this._ended(\"local\",null,r),this._dialog=u,this._ua.newDialog(u)}else this.sendRequest(f.BYE,{extraHeaders:s,body:i}),this._ended(\"local\",null,r)}}},{key:\"sendDTMF\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};E(\"sendDTMF() | tones: %s\",e);var n=0,r=t.duration||null,s=t.interToneGap||null;if(void 0===e)throw new TypeError(\"Not enough arguments\");if(this._status!==w.STATUS_CONFIRMED&&this._status!==w.STATUS_WAITING_FOR_ACK)throw new h.InvalidStateError(this._status);if(\"number\"==typeof e&&(e=e.toString()),!e||\"string\"!=typeof e||!e.match(/^[0-9A-DR#*,]+$/i))throw new TypeError(\"Invalid tones: \".concat(e));if(r&&!p.isDecimal(r))throw new TypeError(\"Invalid tone duration: \".concat(r));if(r?r<y.C.MIN_DURATION?(E('\"duration\" value is lower than the minimum allowed, setting it to '.concat(y.C.MIN_DURATION,\" milliseconds\")),r=y.C.MIN_DURATION):r>y.C.MAX_DURATION?(E('\"duration\" value is greater than the maximum allowed, setting it to '.concat(y.C.MAX_DURATION,\" milliseconds\")),r=y.C.MAX_DURATION):r=Math.abs(r):r=y.C.DEFAULT_DURATION,t.duration=r,s&&!p.isDecimal(s))throw new TypeError(\"Invalid interToneGap: \".concat(s));function i(){var e,o=this;if(this._status===w.STATUS_TERMINATED||!this._tones||n>=this._tones.length)this._tones=null;else{var a=this._tones[n];if(n+=1,\",\"===a)e=2e3;else{var u=new y(this);t.eventHandlers={onFailed:function(){o._tones=null}},u.send(a,t),e=r+s}setTimeout(i.bind(this),e)}}s?s<y.C.MIN_INTER_TONE_GAP?(E('\"interToneGap\" value is lower than the minimum allowed, setting it to '.concat(y.C.MIN_INTER_TONE_GAP,\" milliseconds\")),s=y.C.MIN_INTER_TONE_GAP):s=Math.abs(s):s=y.C.DEFAULT_INTER_TONE_GAP,this._tones?this._tones+=e:(this._tones=e,i.call(this))}},{key:\"sendInfo\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(E(\"sendInfo()\"),this._status!==w.STATUS_CONFIRMED&&this._status!==w.STATUS_WAITING_FOR_ACK)throw new h.InvalidStateError(this._status);var r=new S(this);r.send(e,t,n)}},{key:\"mute\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!1};E(\"mute()\");var t=!1,n=!1;!1===this._audioMuted&&e.audio&&(t=!0,this._audioMuted=!0,this._toggleMuteAudio(!0)),!1===this._videoMuted&&e.video&&(n=!0,this._videoMuted=!0,this._toggleMuteVideo(!0)),!0!==t&&!0!==n||this._onmute({audio:t,video:n})}},{key:\"unmute\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!0};E(\"unmute()\");var t=!1,n=!1;!0===this._audioMuted&&e.audio&&(t=!0,this._audioMuted=!1,!1===this._localHold&&this._toggleMuteAudio(!1)),!0===this._videoMuted&&e.video&&(n=!0,this._videoMuted=!1,!1===this._localHold&&this._toggleMuteVideo(!1)),!0!==t&&!0!==n||this._onunmute({audio:t,video:n})}},{key:\"hold\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(E(\"hold()\"),this._status!==w.STATUS_WAITING_FOR_ACK&&this._status!==w.STATUS_CONFIRMED)return!1;if(!0===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!0,this._onhold(\"local\");var r={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:f.causes.WEBRTC_ERROR,status_code:500,reason_phrase:\"Hold Failed\"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:r,extraHeaders:t.extraHeaders}),!0}},{key:\"unhold\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(E(\"unhold()\"),this._status!==w.STATUS_WAITING_FOR_ACK&&this._status!==w.STATUS_CONFIRMED)return!1;if(!1===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!1,this._onunhold(\"local\");var r={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:f.causes.WEBRTC_ERROR,status_code:500,reason_phrase:\"Unhold Failed\"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:r,extraHeaders:t.extraHeaders}),!0}},{key:\"renegotiate\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;E(\"renegotiate()\");var r=t.rtcOfferConstraints||null;if(this._status!==w.STATUS_WAITING_FOR_ACK&&this._status!==w.STATUS_CONFIRMED)return!1;if(!this._isReadyToReOffer())return!1;var s={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:f.causes.WEBRTC_ERROR,status_code:500,reason_phrase:\"Media Renegotiation Failed\"})}};return this._setLocalMediaStatus(),t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:s,rtcOfferConstraints:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:s,rtcOfferConstraints:r,extraHeaders:t.extraHeaders}),!0}},{key:\"refer\",value:function(e,t){var n=this;E(\"refer()\");var r=e;if(this._status!==w.STATUS_WAITING_FOR_ACK&&this._status!==w.STATUS_CONFIRMED)return!1;if(!(e=this._ua.normalizeTarget(e)))throw new TypeError(\"Invalid target: \".concat(r));var s=new b(this);s.sendRefer(e,t);var i=s.id;return this._referSubscribers[i]=s,s.on(\"requestFailed\",function(){delete n._referSubscribers[i]}),s.on(\"accepted\",function(){delete n._referSubscribers[i]}),s.on(\"failed\",function(){delete n._referSubscribers[i]}),s}},{key:\"sendRequest\",value:function(e,t){return E(\"sendRequest()\"),this._dialog.sendRequest(e,t)}},{key:\"receiveRequest\",value:function(e){var t=this;if(E(\"receiveRequest()\"),e.method===f.CANCEL)this._status!==w.STATUS_WAITING_FOR_ANSWER&&this._status!==w.STATUS_ANSWERED||(this._status=w.STATUS_CANCELED,this._request.reply(487),this._failed(\"remote\",e,f.causes.CANCELED));else switch(e.method){case f.ACK:if(this._status!==w.STATUS_WAITING_FOR_ACK)return;if(this._status=w.STATUS_CONFIRMED,clearTimeout(this._timers.ackTimer),clearTimeout(this._timers.invite2xxTimer),this._late_sdp){if(!e.body){this.terminate({cause:f.causes.MISSING_SDP,status_code:400});break}var n={originator:\"remote\",type:\"answer\",sdp:e.body};E('emit \"sdp\"'),this.emit(\"sdp\",n);var r=new RTCSessionDescription({type:\"answer\",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return t._connection.setRemoteDescription(r)}).then(function(){t._is_confirmed||t._confirmed(\"remote\",e)}).catch(function(e){t.terminate({cause:f.causes.BAD_MEDIA_DESCRIPTION,status_code:488}),A('emit \"peerconnection:setremotedescriptionfailed\" [error:%o]',e),t.emit(\"peerconnection:setremotedescriptionfailed\",e)})}else this._is_confirmed||this._confirmed(\"remote\",e);break;case f.BYE:this._status===w.STATUS_CONFIRMED?(e.reply(200),this._ended(\"remote\",e,f.causes.BYE)):this._status===w.STATUS_INVITE_RECEIVED?(e.reply(200),this._request.reply(487,\"BYE Received\"),this._ended(\"remote\",e,f.causes.BYE)):e.reply(403,\"Wrong Status\");break;case f.INVITE:this._status===w.STATUS_CONFIRMED?e.hasHeader(\"replaces\")?this._receiveReplaces(e):this._receiveReinvite(e):e.reply(403,\"Wrong Status\");break;case f.INFO:if(this._status===w.STATUS_1XX_RECEIVED||this._status===w.STATUS_WAITING_FOR_ANSWER||this._status===w.STATUS_ANSWERED||this._status===w.STATUS_WAITING_FOR_ACK||this._status===w.STATUS_CONFIRMED){var s=e.getHeader(\"content-type\");s&&s.match(/^application\\/dtmf-relay/i)?new y(this).init_incoming(e):void 0!==s?new S(this).init_incoming(e):e.reply(415)}else e.reply(403,\"Wrong Status\");break;case f.UPDATE:this._status===w.STATUS_CONFIRMED?this._receiveUpdate(e):e.reply(403,\"Wrong Status\");break;case f.REFER:this._status===w.STATUS_CONFIRMED?this._receiveRefer(e):e.reply(403,\"Wrong Status\");break;case f.NOTIFY:this._status===w.STATUS_CONFIRMED?this._receiveNotify(e):e.reply(403,\"Wrong Status\");break;default:e.reply(501)}}},{key:\"onTransportError\",value:function(){A(\"onTransportError()\"),this._status!==w.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:f.causes.CONNECTION_ERROR,cause:f.causes.CONNECTION_ERROR})}},{key:\"onRequestTimeout\",value:function(){A(\"onRequestTimeout()\"),this._status!==w.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:f.causes.REQUEST_TIMEOUT,cause:f.causes.REQUEST_TIMEOUT})}},{key:\"onDialogError\",value:function(){A(\"onDialogError()\"),this._status!==w.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:f.causes.DIALOG_ERROR,cause:f.causes.DIALOG_ERROR})}},{key:\"newDTMF\",value:function(e){E(\"newDTMF()\"),this.emit(\"newDTMF\",e)}},{key:\"newInfo\",value:function(e){E(\"newInfo()\"),this.emit(\"newInfo\",e)}},{key:\"_isReadyToReOffer\",value:function(){return this._rtcReady?this._dialog?!0!==this._dialog.uac_pending_reply&&!0!==this._dialog.uas_pending_reply||(E(\"_isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress\"),!1):(E(\"_isReadyToReOffer() | session not established yet\"),!1):(E(\"_isReadyToReOffer() | internal WebRTC status not ready\"),!1)}},{key:\"_close\",value:function(){if(E(\"close()\"),this._status!==w.STATUS_TERMINATED){if(this._status=w.STATUS_TERMINATED,this._connection)try{this._connection.close()}catch(e){A(\"close() | error closing the RTCPeerConnection: %o\",e)}for(var e in this._localMediaStream&&this._localMediaStreamLocallyGenerated&&(E(\"close() | closing local MediaStream\"),p.closeMediaStream(this._localMediaStream)),this._timers)Object.prototype.hasOwnProperty.call(this._timers,e)&&clearTimeout(this._timers[e]);for(var t in clearTimeout(this._sessionTimers.timer),this._dialog&&(this._dialog.terminate(),delete this._dialog),this._earlyDialogs)Object.prototype.hasOwnProperty.call(this._earlyDialogs,t)&&(this._earlyDialogs[t].terminate(),delete this._earlyDialogs[t]);for(var n in this._referSubscribers)Object.prototype.hasOwnProperty.call(this._referSubscribers,n)&&delete this._referSubscribers[n];this._ua.destroyRTCSession(this)}}},{key:\"_setInvite2xxTimer\",value:function(e,t){var n=_.T1;this._timers.invite2xxTimer=setTimeout(function r(){this._status===w.STATUS_WAITING_FOR_ACK&&(e.reply(200,null,[\"Contact: \".concat(this._contact)],t),n<_.T2&&(n*=2)>_.T2&&(n=_.T2),this._timers.invite2xxTimer=setTimeout(r.bind(this),n))}.bind(this),n)}},{key:\"_setACKTimer\",value:function(){var e=this;this._timers.ackTimer=setTimeout(function(){e._status===w.STATUS_WAITING_FOR_ACK&&(E(\"no ACK received, terminating the session\"),clearTimeout(e._timers.invite2xxTimer),e.sendRequest(f.BYE),e._ended(\"remote\",null,f.causes.NO_ACK))},_.TIMER_H)}},{key:\"_createRTCConnection\",value:function(e,t){var n=this;this._connection=new RTCPeerConnection(e,t),this._connection.addEventListener(\"iceconnectionstatechange\",function(){\"failed\"===n._connection.iceConnectionState&&n.terminate({cause:f.causes.RTP_TIMEOUT,status_code:408,reason_phrase:f.causes.RTP_TIMEOUT})}),E('emit \"peerconnection\"'),this.emit(\"peerconnection\",{peerconnection:this._connection})}},{key:\"_createLocalDescription\",value:function(e,t){var n=this;if(E(\"createLocalDescription()\"),\"offer\"!==e&&\"answer\"!==e)throw new Error('createLocalDescription() | invalid type \"'.concat(e,'\"'));var r=this._connection;return this._rtcReady=!1,Promise.resolve().then(function(){return\"offer\"===e?r.createOffer(t).catch(function(e){return A('emit \"peerconnection:createofferfailed\" [error:%o]',e),n.emit(\"peerconnection:createofferfailed\",e),Promise.reject(e)}):r.createAnswer(t).catch(function(e){return A('emit \"peerconnection:createanswerfailed\" [error:%o]',e),n.emit(\"peerconnection:createanswerfailed\",e),Promise.reject(e)})}).then(function(e){return r.setLocalDescription(e).catch(function(e){return n._rtcReady=!0,A('emit \"peerconnection:setlocaldescriptionfailed\" [error:%o]',e),n.emit(\"peerconnection:setlocaldescriptionfailed\",e),Promise.reject(e)})}).then(function(){if(\"complete\"===r.iceGatheringState){n._rtcReady=!0;var t={originator:\"local\",type:e,sdp:r.localDescription.sdp};return E('emit \"sdp\"'),n.emit(\"sdp\",t),Promise.resolve(t.sdp)}return new Promise(function(t){var s,i=!1,o=function(){r.removeEventListener(\"icecandidate\",s),i=!0,n._rtcReady=!0;var o={originator:\"local\",type:e,sdp:r.localDescription.sdp};E('emit \"sdp\"'),n.emit(\"sdp\",o),t(o.sdp)};r.addEventListener(\"icecandidate\",s=function(e){var t=e.candidate;t?n.emit(\"icecandidate\",{candidate:t,ready:o}):i||o()})})})}},{key:\"_createDialog\",value:function(e,t,n){var r=\"UAS\"===t?e.to_tag:e.from_tag,s=\"UAS\"===t?e.from_tag:e.to_tag,i=e.call_id+r+s,o=this._earlyDialogs[i];if(n)return!!o||((o=new m(this,e,t,m.C.STATUS_EARLY)).error?(E(o.error),this._failed(\"remote\",e,f.causes.INTERNAL_ERROR),!1):(this._earlyDialogs[i]=o,!0));if(this._from_tag=e.from_tag,this._to_tag=e.to_tag,o)return o.update(e,t),this._dialog=o,delete this._earlyDialogs[i],!0;var a=new m(this,e,t);return a.error?(E(a.error),this._failed(\"remote\",e,f.causes.INTERNAL_ERROR),!1):(this._dialog=a,!0)}},{key:\"_receiveReinvite\",value:function(e){var t=this;E(\"receiveReinvite()\");var n=e.getHeader(\"Content-Type\"),r={request:e,callback:void 0,reject:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s=!0;var n=t.status_code||403,r=t.reason_phrase||\"\",i=p.cloneArray(t.extraHeaders);if(this._status!==w.STATUS_CONFIRMED)return!1;if(n<300||n>=700)throw new TypeError(\"Invalid status_code: \".concat(n));e.reply(n,r,i)}.bind(this)},s=!1;if(this.emit(\"reinvite\",r),!s){if(this._late_sdp=!1,!e.body)return this._late_sdp=!0,void(this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return t._createLocalDescription(\"offer\",t._rtcOfferConstraints)}).then(function(e){i.call(t,e)}).catch(function(){e.reply(500)}));if(\"application/sdp\"!==n)return E(\"invalid Content-Type\"),void e.reply(415);this._processInDialogSdpOffer(e).then(function(e){t._status!==w.STATUS_TERMINATED&&i.call(t,e)}).catch(function(e){A(e)})}function i(t){var n=this,s=[\"Contact: \".concat(this._contact)];this._handleSessionTimersInIncomingRequest(e,s),this._late_sdp&&(t=this._mangleOffer(t)),e.reply(200,null,s,t,function(){n._status=w.STATUS_WAITING_FOR_ACK,n._setInvite2xxTimer(e,t),n._setACKTimer()}),\"function\"==typeof r.callback&&r.callback()}}},{key:\"_receiveUpdate\",value:function(e){var t=this;E(\"receiveUpdate()\");var n=e.getHeader(\"Content-Type\"),r={request:e,callback:void 0,reject:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s=!0;var n=t.status_code||403,r=t.reason_phrase||\"\",i=p.cloneArray(t.extraHeaders);if(this._status!==w.STATUS_CONFIRMED)return!1;if(n<300||n>=700)throw new TypeError(\"Invalid status_code: \".concat(n));e.reply(n,r,i)}.bind(this)},s=!1;if(this.emit(\"update\",r),!s)if(e.body){if(\"application/sdp\"!==n)return E(\"invalid Content-Type\"),void e.reply(415);this._processInDialogSdpOffer(e).then(function(e){t._status!==w.STATUS_TERMINATED&&i.call(t,e)}).catch(function(e){A(e)})}else i.call(this,null);function i(t){var n=[\"Contact: \".concat(this._contact)];this._handleSessionTimersInIncomingRequest(e,n),e.reply(200,null,n,t),\"function\"==typeof r.callback&&r.callback()}}},{key:\"_processInDialogSdpOffer\",value:function(e){var t=this;E(\"_processInDialogSdpOffer()\");var n=e.parseSDP(),r=!1,s=!0,i=!1,o=void 0;try{for(var a,u=n.media[Symbol.iterator]();!(s=(a=u.next()).done);s=!0){var l=a.value;if(-1!==R.indexOf(l.type)){var c=l.direction||n.direction||\"sendrecv\";if(\"sendonly\"!==c&&\"inactive\"!==c){r=!1;break}r=!0}}}catch(e){i=!0,o=e}finally{try{s||null==u.return||u.return()}finally{if(i)throw o}}var f={originator:\"remote\",type:\"offer\",sdp:e.body};E('emit \"sdp\"'),this.emit(\"sdp\",f);var h=new RTCSessionDescription({type:\"offer\",sdp:f.sdp});return this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){if(t._status===w.STATUS_TERMINATED)throw new Error(\"terminated\");return t._connection.setRemoteDescription(h).catch(function(n){throw e.reply(488),A('emit \"peerconnection:setremotedescriptionfailed\" [error:%o]',n),t.emit(\"peerconnection:setremotedescriptionfailed\",n),new Error(\"peerconnection.setRemoteDescription() failed\")})}).then(function(){if(t._status===w.STATUS_TERMINATED)throw new Error(\"terminated\");!0===t._remoteHold&&!1===r?(t._remoteHold=!1,t._onunhold(\"remote\")):!1===t._remoteHold&&!0===r&&(t._remoteHold=!0,t._onhold(\"remote\"))}).then(function(){if(t._status===w.STATUS_TERMINATED)throw new Error(\"terminated\");return t._createLocalDescription(\"answer\",t._rtcAnswerConstraints).catch(function(){throw e.reply(500),new Error(\"_createLocalDescription() failed\")})}),this._connectionPromiseQueue}},{key:\"_receiveRefer\",value:function(e){var n=this;if(E(\"receiveRefer()\"),!e.refer_to)return E(\"no Refer-To header field present in REFER\"),void e.reply(400);if(e.refer_to.uri.scheme!==f.SIP)return E(\"Refer-To header field points to a non-SIP URI scheme\"),void e.reply(416);e.reply(202);var r=new T(this,e.cseq);E('emit \"refer\"'),this.emit(\"refer\",{request:e,accept:function(s,i){(function(n){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n=\"function\"==typeof n?n:null,this._status!==w.STATUS_WAITING_FOR_ACK&&this._status!==w.STATUS_CONFIRMED)return!1;var i=new t(this._ua);if(i.on(\"progress\",function(e){var t=e.response;r.notify(t.status_code,t.reason_phrase)}),i.on(\"accepted\",function(e){var t=e.response;r.notify(t.status_code,t.reason_phrase)}),i.on(\"_failed\",function(e){var t=e.message,n=e.cause;t?r.notify(t.status_code,t.reason_phrase):r.notify(487,n)}),e.refer_to.uri.hasHeader(\"replaces\")){var o=decodeURIComponent(e.refer_to.uri.getHeader(\"replaces\"));s.extraHeaders=p.cloneArray(s.extraHeaders),s.extraHeaders.push(\"Replaces: \".concat(o))}i.connect(e.refer_to.uri.toAor(),s,n)}).call(n,s,i)},reject:function(){(function(){r.notify(603)}).call(n)}})}},{key:\"_receiveNotify\",value:function(e){switch(E(\"receiveNotify()\"),e.event||e.reply(400),e.event.event){case\"refer\":var t,n;if(e.event.params&&e.event.params.id)t=e.event.params.id,n=this._referSubscribers[t];else{if(1!==Object.keys(this._referSubscribers).length)return void e.reply(400,\"Missing event id parameter\");n=this._referSubscribers[Object.keys(this._referSubscribers)[0]]}if(!n)return void e.reply(481,\"Subscription does not exist\");n.receiveNotify(e),e.reply(200);break;default:e.reply(489)}}},{key:\"_receiveReplaces\",value:function(e){var n=this;E(\"receiveReplaces()\"),this.emit(\"replaces\",{request:e,accept:function(r){(function(n){var r=this;if(this._status!==w.STATUS_WAITING_FOR_ACK&&this._status!==w.STATUS_CONFIRMED)return!1;var s=new t(this._ua);s.on(\"confirmed\",function(){r.terminate()}),s.init_incoming(e,n)}).call(n,r)},reject:function(){(function(){E(\"Replaced INVITE rejected by the user\"),e.reply(486)}).call(n)}})}},{key:\"_sendInitialRequest\",value:function(e,t,n){var r=this,s=new g(this._ua,this._request,{onRequestTimeout:function(){r.onRequestTimeout()},onTransportError:function(){r.onTransportError()},onAuthenticated:function(e){r._request=e},onReceiveResponse:function(e){r._receiveInviteResponse(e)}});Promise.resolve().then(function(){return n||(e.audio||e.video?(r._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(e).catch(function(e){if(r._status===w.STATUS_TERMINATED)throw new Error(\"terminated\");throw r._failed(\"local\",null,f.causes.USER_DENIED_MEDIA_ACCESS),A('emit \"getusermediafailed\" [error:%o]',e),r.emit(\"getusermediafailed\",e),e})):void 0)}).then(function(e){if(r._status===w.STATUS_TERMINATED)throw new Error(\"terminated\");return r._localMediaStream=e,e&&e.getTracks().forEach(function(t){r._connection.addTrack(t,e)}),r._connecting(r._request),r._createLocalDescription(\"offer\",t).catch(function(e){throw r._failed(\"local\",null,f.causes.WEBRTC_ERROR),e})}).then(function(e){if(r._is_canceled||r._status===w.STATUS_TERMINATED)throw new Error(\"terminated\");r._request.body=e,r._status=w.STATUS_INVITE_SENT,E('emit \"sending\" [request:%o]',r._request),r.emit(\"sending\",{request:r._request}),s.send()}).catch(function(e){r._status!==w.STATUS_TERMINATED&&A(e)})}},{key:\"_receiveInviteResponse\",value:function(e){var t=this;if(E(\"receiveInviteResponse()\"),this._dialog&&e.status_code>=200&&e.status_code<=299){if(this._dialog.id.call_id===e.call_id&&this._dialog.id.local_tag===e.from_tag&&this._dialog.id.remote_tag===e.to_tag)return void this.sendRequest(f.ACK);var n=new m(this,e,\"UAC\");return void 0!==n.error?void E(n.error):(this.sendRequest(f.ACK),void this.sendRequest(f.BYE))}if(this._is_canceled)e.status_code>=100&&e.status_code<200?this._request.cancel(this._cancel_reason):e.status_code>=200&&e.status_code<299&&this._acceptAndTerminate(e);else if(this._status===w.STATUS_INVITE_SENT||this._status===w.STATUS_1XX_RECEIVED)switch(!0){case/^100$/.test(e.status_code):this._status=w.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(e.status_code):if(!e.to_tag){E(\"1xx response received without to tag\");break}if(e.hasHeader(\"contact\")&&!this._createDialog(e,\"UAC\",!0))break;if(this._status=w.STATUS_1XX_RECEIVED,this._progress(\"remote\",e),!e.body)break;var r={originator:\"remote\",type:\"answer\",sdp:e.body};E('emit \"sdp\"'),this.emit(\"sdp\",r);var s=new RTCSessionDescription({type:\"answer\",sdp:r.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return t._connection.setRemoteDescription(s)}).catch(function(e){A('emit \"peerconnection:setremotedescriptionfailed\" [error:%o]',e),t.emit(\"peerconnection:setremotedescriptionfailed\",e)});break;case/^2[0-9]{2}$/.test(e.status_code):if(this._status=w.STATUS_CONFIRMED,!e.body){this._acceptAndTerminate(e,400,f.causes.MISSING_SDP),this._failed(\"remote\",e,f.causes.BAD_MEDIA_DESCRIPTION);break}if(!this._createDialog(e,\"UAC\"))break;var i={originator:\"remote\",type:\"answer\",sdp:e.body};E('emit \"sdp\"'),this.emit(\"sdp\",i);var o=new RTCSessionDescription({type:\"answer\",sdp:i.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){if(\"stable\"===t._connection.signalingState)return t._connection.createOffer(t._rtcOfferConstraints).then(function(e){return t._connection.setLocalDescription(e)}).catch(function(n){t._acceptAndTerminate(e,500,n.toString()),t._failed(\"local\",e,f.causes.WEBRTC_ERROR)})}).then(function(){t._connection.setRemoteDescription(o).then(function(){t._handleSessionTimersInIncomingResponse(e),t._accepted(\"remote\",e),t.sendRequest(f.ACK),t._confirmed(\"local\",null)}).catch(function(n){t._acceptAndTerminate(e,488,\"Not Acceptable Here\"),t._failed(\"remote\",e,f.causes.BAD_MEDIA_DESCRIPTION),A('emit \"peerconnection:setremotedescriptionfailed\" [error:%o]',n),t.emit(\"peerconnection:setremotedescriptionfailed\",n)})});break;default:var a=p.sipErrorCause(e.status_code);this._failed(\"remote\",e,a)}}},{key:\"_sendReinvite\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(\"sendReinvite()\");var n=p.cloneArray(t.extraHeaders),r=t.eventHandlers||{},s=t.rtcOfferConstraints||this._rtcOfferConstraints||null,i=!1;function o(e){var t=this;if(this._status!==w.STATUS_TERMINATED&&(this.sendRequest(f.ACK),!i))if(this._handleSessionTimersInIncomingResponse(e),e.body)if(\"application/sdp\"===e.getHeader(\"Content-Type\")){var n={originator:\"remote\",type:\"answer\",sdp:e.body};E('emit \"sdp\"'),this.emit(\"sdp\",n);var s=new RTCSessionDescription({type:\"answer\",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return t._connection.setRemoteDescription(s)}).then(function(){r.succeeded&&r.succeeded(e)}).catch(function(e){a.call(t),A('emit \"peerconnection:setremotedescriptionfailed\" [error:%o]',e),t.emit(\"peerconnection:setremotedescriptionfailed\",e)})}else a.call(this);else a.call(this)}function a(e){r.failed&&r.failed(e)}n.push(\"Contact: \".concat(this._contact)),n.push(\"Content-Type: application/sdp\"),this._sessionTimers.running&&n.push(\"Session-Expires: \".concat(this._sessionTimers.currentExpires,\";refresher=\").concat(this._sessionTimers.refresher?\"uac\":\"uas\")),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return e._createLocalDescription(\"offer\",s)}).then(function(t){var r={originator:\"local\",type:\"offer\",sdp:t=e._mangleOffer(t)};E('emit \"sdp\"'),e.emit(\"sdp\",r),e.sendRequest(f.INVITE,{extraHeaders:n,body:t,eventHandlers:{onSuccessResponse:function(t){o.call(e,t),i=!0},onErrorResponse:function(t){a.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})}).catch(function(){a()})}},{key:\"_sendUpdate\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(\"sendUpdate()\");var n=p.cloneArray(t.extraHeaders),r=t.eventHandlers||{},s=t.rtcOfferConstraints||this._rtcOfferConstraints||null,i=t.sdpOffer||!1,o=!1;function a(e){var t=this;if(this._status!==w.STATUS_TERMINATED&&!o)if(this._handleSessionTimersInIncomingResponse(e),i){if(!e.body)return void u.call(this);if(\"application/sdp\"!==e.getHeader(\"Content-Type\"))return void u.call(this);var n={originator:\"remote\",type:\"answer\",sdp:e.body};E('emit \"sdp\"'),this.emit(\"sdp\",n);var s=new RTCSessionDescription({type:\"answer\",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return t._connection.setRemoteDescription(s)}).then(function(){r.succeeded&&r.succeeded(e)}).catch(function(e){u.call(t),A('emit \"peerconnection:setremotedescriptionfailed\" [error:%o]',e),t.emit(\"peerconnection:setremotedescriptionfailed\",e)})}else r.succeeded&&r.succeeded(e)}function u(e){r.failed&&r.failed(e)}n.push(\"Contact: \".concat(this._contact)),this._sessionTimers.running&&n.push(\"Session-Expires: \".concat(this._sessionTimers.currentExpires,\";refresher=\").concat(this._sessionTimers.refresher?\"uac\":\"uas\")),i?(n.push(\"Content-Type: application/sdp\"),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return e._createLocalDescription(\"offer\",s)}).then(function(t){var r={originator:\"local\",type:\"offer\",sdp:t=e._mangleOffer(t)};E('emit \"sdp\"'),e.emit(\"sdp\",r),e.sendRequest(f.UPDATE,{extraHeaders:n,body:t,eventHandlers:{onSuccessResponse:function(t){a.call(e,t),o=!0},onErrorResponse:function(t){u.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})}).catch(function(){u.call(e)})):this.sendRequest(f.UPDATE,{extraHeaders:n,eventHandlers:{onSuccessResponse:function(t){a.call(e,t)},onErrorResponse:function(t){u.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})}},{key:\"_acceptAndTerminate\",value:function(e,t,n){E(\"acceptAndTerminate()\");var r=[];t&&(n=n||f.REASON_PHRASE[t]||\"\",r.push(\"Reason: SIP ;cause=\".concat(t,'; text=\"').concat(n,'\"'))),(this._dialog||this._createDialog(e,\"UAC\"))&&(this.sendRequest(f.ACK),this.sendRequest(f.BYE,{extraHeaders:r})),this._status=w.STATUS_TERMINATED}},{key:\"_mangleOffer\",value:function(e){if(!this._localHold&&!this._remoteHold)return e;if(e=c.parse(e),this._localHold&&!this._remoteHold){E(\"mangleOffer() | me on hold, mangling offer\");var t=!0,n=!1,r=void 0;try{for(var s,i=e.media[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var o=s.value;-1!==R.indexOf(o.type)&&(o.direction?\"sendrecv\"===o.direction?o.direction=\"sendonly\":\"recvonly\"===o.direction&&(o.direction=\"inactive\"):o.direction=\"sendonly\")}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}else if(this._localHold&&this._remoteHold){E(\"mangleOffer() | both on hold, mangling offer\");var a=!0,u=!1,l=void 0;try{for(var f,h=e.media[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var d=f.value;-1!==R.indexOf(d.type)&&(d.direction=\"inactive\")}}catch(e){u=!0,l=e}finally{try{a||null==h.return||h.return()}finally{if(u)throw l}}}else if(this._remoteHold){E(\"mangleOffer() | remote on hold, mangling offer\");var p=!0,_=!1,v=void 0;try{for(var m,g=e.media[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var y=m.value;-1!==R.indexOf(y.type)&&(y.direction?\"sendrecv\"===y.direction?y.direction=\"recvonly\":\"recvonly\"===y.direction&&(y.direction=\"inactive\"):y.direction=\"recvonly\")}}catch(e){_=!0,v=e}finally{try{p||null==g.return||g.return()}finally{if(_)throw v}}}return c.write(e)}},{key:\"_setLocalMediaStatus\",value:function(){var e=!0,t=!0;(this._localHold||this._remoteHold)&&(e=!1,t=!1),this._audioMuted&&(e=!1),this._videoMuted&&(t=!1),this._toggleMuteAudio(!e),this._toggleMuteVideo(!t)}},{key:\"_handleSessionTimersInIncomingRequest\",value:function(e,t){var n;this._sessionTimers.enabled&&(e.session_expires&&e.session_expires>=f.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=e.session_expires,n=e.session_expires_refresher||\"uas\"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,n=\"uas\"),t.push(\"Session-Expires: \".concat(this._sessionTimers.currentExpires,\";refresher=\").concat(n)),this._sessionTimers.refresher=\"uas\"===n,this._runSessionTimer())}},{key:\"_handleSessionTimersInIncomingResponse\",value:function(e){var t;this._sessionTimers.enabled&&(e.session_expires&&e.session_expires>=f.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=e.session_expires,t=e.session_expires_refresher||\"uac\"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,t=\"uac\"),this._sessionTimers.refresher=\"uac\"===t,this._runSessionTimer())}},{key:\"_runSessionTimer\",value:function(){var e=this,t=this._sessionTimers.currentExpires;this._sessionTimers.running=!0,clearTimeout(this._sessionTimers.timer),this._sessionTimers.refresher?this._sessionTimers.timer=setTimeout(function(){e._status!==w.STATUS_TERMINATED&&(E(\"runSessionTimer() | sending session refresh request\"),e._sessionTimers.refreshMethod===f.UPDATE?e._sendUpdate():e._sendReinvite())},500*t):this._sessionTimers.timer=setTimeout(function(){e._status!==w.STATUS_TERMINATED&&(A(\"runSessionTimer() | timer expired, terminating the session\"),e.terminate({cause:f.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:\"Session Timer Expired\"}))},1100*t)}},{key:\"_toggleMuteAudio\",value:function(e){var t=this._connection.getSenders().filter(function(e){return e.track&&\"audio\"===e.track.kind}),n=!0,r=!1,s=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){i.value.track.enabled=!e}}catch(e){r=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}}},{key:\"_toggleMuteVideo\",value:function(e){var t=this._connection.getSenders().filter(function(e){return e.track&&\"video\"===e.track.kind}),n=!0,r=!1,s=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){i.value.track.enabled=!e}}catch(e){r=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}}},{key:\"_newRTCSession\",value:function(e,t){E(\"newRTCSession()\"),this._ua.newRTCSession(this,{originator:e,session:this,request:t})}},{key:\"_connecting\",value:function(e){E(\"session connecting\"),E('emit \"connecting\"'),this.emit(\"connecting\",{request:e})}},{key:\"_progress\",value:function(e,t){E(\"session progress\"),E('emit \"progress\"'),this.emit(\"progress\",{originator:e,response:t||null})}},{key:\"_accepted\",value:function(e,t){E(\"session accepted\"),this._start_time=new Date,E('emit \"accepted\"'),this.emit(\"accepted\",{originator:e,response:t||null})}},{key:\"_confirmed\",value:function(e,t){E(\"session confirmed\"),this._is_confirmed=!0,E('emit \"confirmed\"'),this.emit(\"confirmed\",{originator:e,ack:t||null})}},{key:\"_ended\",value:function(e,t,n){E(\"session ended\"),this._end_time=new Date,this._close(),E('emit \"ended\"'),this.emit(\"ended\",{originator:e,message:t||null,cause:n})}},{key:\"_failed\",value:function(e,t,n){E(\"session failed\"),E('emit \"_failed\"'),this.emit(\"_failed\",{originator:e,message:t||null,cause:n}),this._close(),E('emit \"failed\"'),this.emit(\"failed\",{originator:e,message:t||null,cause:n})}},{key:\"_onhold\",value:function(e){E(\"session onhold\"),this._setLocalMediaStatus(),E('emit \"hold\"'),this.emit(\"hold\",{originator:e})}},{key:\"_onunhold\",value:function(e){E(\"session onunhold\"),this._setLocalMediaStatus(),E('emit \"unhold\"'),this.emit(\"unhold\",{originator:e})}},{key:\"_onmute\",value:function(e){var t=e.audio,n=e.video;E(\"session onmute\"),this._setLocalMediaStatus(),E('emit \"muted\"'),this.emit(\"muted\",{audio:t,video:n})}},{key:\"_onunmute\",value:function(e){var t=e.audio,n=e.video;E(\"session onunmute\"),this._setLocalMediaStatus(),E('emit \"unmuted\"'),this.emit(\"unmuted\",{audio:t,video:n})}},{key:\"C\",get:function(){return w}},{key:\"causes\",get:function(){return f.causes}},{key:\"id\",get:function(){return this._id}},{key:\"connection\",get:function(){return this._connection}},{key:\"contact\",get:function(){return this._contact}},{key:\"direction\",get:function(){return this._direction}},{key:\"local_identity\",get:function(){return this._local_identity}},{key:\"remote_identity\",get:function(){return this._remote_identity}},{key:\"start_time\",get:function(){return this._start_time}},{key:\"end_time\",get:function(){return this._end_time}},{key:\"data\",get:function(){return this._data},set:function(e){this._data=e}},{key:\"status\",get:function(){return this._status}}]),t}()},function(e,t,n){\"use strict\";var r=n(2),s=n(6),i=n(0)(\"JsSIP:ERROR:Socket\");i.log=console.warn.bind(console),t.isSocket=function(e){if(Array.isArray(e))return!1;if(void 0===e)return i(\"undefined JsSIP.Socket instance\"),!1;try{if(!r.isString(e.url))throw i(\"missing or invalid JsSIP.Socket url property\"),new Error;if(!r.isString(e.via_transport))throw i(\"missing or invalid JsSIP.Socket via_transport property\"),new Error;if(-1===s.parse(e.sip_uri,\"SIP_URI\"))throw i(\"missing or invalid JsSIP.Socket sip_uri property\"),new Error}catch(e){return!1}try{[\"connect\",\"disconnect\",\"send\"].forEach(function(t){if(!r.isFunction(e[t]))throw i(\"missing or invalid JsSIP.Socket method: \".concat(t)),new Error})}catch(e){return!1}return!0}},function(e,t,n){var r=function(){return this}()||Function(\"return this\")(),s=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf(\"regeneratorRuntime\")>=0,i=s&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(77),s)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t){!function(t){\"use strict\";var n,r=Object.prototype,s=r.hasOwnProperty,i=\"function\"==typeof Symbol?Symbol:{},o=i.iterator||\"@@iterator\",a=i.asyncIterator||\"@@asyncIterator\",u=i.toStringTag||\"@@toStringTag\",l=\"object\"==typeof e,c=t.regeneratorRuntime;if(c)l&&(e.exports=c);else{(c=t.regeneratorRuntime=l?e.exports:{}).wrap=S;var f=\"suspendedStart\",h=\"suspendedYield\",d=\"executing\",p=\"completed\",_={},v={};v[o]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(x([])));g&&g!==r&&s.call(g,o)&&(v=g);var y=E.prototype=b.prototype=Object.create(v);C.prototype=y.constructor=E,E.constructor=C,E[u]=C.displayName=\"GeneratorFunction\",c.isGeneratorFunction=function(e){var t=\"function\"==typeof e&&e.constructor;return!!t&&(t===C||\"GeneratorFunction\"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u in e||(e[u]=\"GeneratorFunction\")),e.prototype=Object.create(y),e},c.awrap=function(e){return{__await:e}},A(w.prototype),w.prototype[a]=function(){return this},c.AsyncIterator=w,c.async=function(e,t,n,r){var s=new w(S(e,t,n,r));return c.isGeneratorFunction(t)?s:s.next().then(function(e){return e.done?e.value:s.next()})},A(y),y[u]=\"Generator\",y[o]=function(){return this},y.toString=function(){return\"[object Generator]\"},c.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},c.values=x,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=n,this.tryEntries.forEach(O),!e)for(var t in this)\"t\"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(\"throw\"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,s){return a.type=\"throw\",a.arg=e,t.next=r,s&&(t.method=\"next\",t.arg=n),!!s}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if(\"root\"===o.tryLoc)return r(\"end\");if(o.tryLoc<=this.prev){var u=s.call(o,\"catchLoc\"),l=s.call(o,\"finallyLoc\");if(u&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error(\"try statement without catch or finally\");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,\"finallyLoc\")&&this.prev<r.finallyLoc){var i=r;break}}i&&(\"break\"===e||\"continue\"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method=\"next\",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if(\"throw\"===e.type)throw e.arg;return\"break\"===e.type||\"continue\"===e.type?this.next=e.arg:\"return\"===e.type?(this.rval=this.arg=e.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if(\"throw\"===r.type){var s=r.arg;O(n)}return s}}throw new Error(\"illegal catch attempt\")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},\"next\"===this.method&&(this.arg=n),_}}}function S(e,t,n,r){var s=t&&t.prototype instanceof b?t:b,i=Object.create(s.prototype),o=new k(r||[]);return i._invoke=function(e,t,n){var r=f;return function(s,i){if(r===d)throw new Error(\"Generator is already running\");if(r===p){if(\"throw\"===s)throw i;return N()}for(n.method=s,n.arg=i;;){var o=n.delegate;if(o){var a=R(o,n);if(a){if(a===_)continue;return a}}if(\"next\"===n.method)n.sent=n._sent=n.arg;else if(\"throw\"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else\"return\"===n.method&&n.abrupt(\"return\",n.arg);r=d;var u=T(e,t,n);if(\"normal\"===u.type){if(r=n.done?p:h,u.arg===_)continue;return{value:u.arg,done:n.done}}\"throw\"===u.type&&(r=p,n.method=\"throw\",n.arg=u.arg)}}}(e,n,o),i}function T(e,t,n){try{return{type:\"normal\",arg:e.call(t,n)}}catch(e){return{type:\"throw\",arg:e}}}function b(){}function C(){}function E(){}function A(e){[\"next\",\"throw\",\"return\"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function w(e){var t;this._invoke=function(n,r){function i(){return new Promise(function(t,i){!function t(n,r,i,o){var a=T(e[n],e,r);if(\"throw\"!==a.type){var u=a.arg,l=u.value;return l&&\"object\"==typeof l&&s.call(l,\"__await\")?Promise.resolve(l.__await).then(function(e){t(\"next\",e,i,o)},function(e){t(\"throw\",e,i,o)}):Promise.resolve(l).then(function(e){u.value=e,i(u)},o)}o(a.arg)}(n,r,t,i)})}return t=t?t.then(i,i):i()}}function R(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,\"throw\"===t.method){if(e.iterator.return&&(t.method=\"return\",t.arg=n,R(e,t),\"throw\"===t.method))return _;t.method=\"throw\",t.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return _}var s=T(r,e.iterator,t.arg);if(\"throw\"===s.type)return t.method=\"throw\",t.arg=s.arg,t.delegate=null,_;var i=s.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,\"return\"!==t.method&&(t.method=\"next\",t.arg=n),t.delegate=null,_):i:(t.method=\"throw\",t.arg=new TypeError(\"iterator result is not an object\"),t.delegate=null,_)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type=\"normal\",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:\"root\"}],e.forEach(I,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if(\"function\"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(s.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:N}}function N(){return{value:n,done:!0}}}(function(){return this}()||Function(\"return this\")())},function(e,t,n){e.exports={default:n(79),__esModule:!0}},function(e,t,n){n(51),n(52),n(59),n(91),n(103),n(104),e.exports=n(5).Promise},function(e,t,n){var r=n(34),s=n(35);e.exports=function(e){return function(t,n){var i,o,a=String(s(t)),u=r(n),l=a.length;return u<0||u>=l?e?\"\":void 0:(i=a.charCodeAt(u))<55296||i>56319||u+1===l||(o=a.charCodeAt(u+1))<56320||o>57343?e?a.charAt(u):i:e?a.slice(u,u+2):o-56320+(i-55296<<10)+65536}}},function(e,t,n){\"use strict\";var r=n(38),s=n(26),i=n(28),o={};n(14)(o,n(4)(\"iterator\"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(o,{next:s(1,n)}),i(e,t+\" Iterator\")}},function(e,t,n){var r=n(9),s=n(7),i=n(39);e.exports=n(11)?Object.defineProperties:function(e,t){s(e);for(var n,o=i(t),a=o.length,u=0;a>u;)r.f(e,n=o[u++],t[n]);return e}},function(e,t,n){var r=n(22);e.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(e){return\"String\"==r(e)?e.split(\"\"):Object(e)}},function(e,t,n){var r=n(18),s=n(57),i=n(85);e.exports=function(e){return function(t,n,o){var a,u=r(t),l=s(u.length),c=i(o,l);if(e&&n!=n){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(34),s=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?s(e+t,0):i(e,t)}},function(e,t,n){var r=n(15),s=n(87),i=n(40)(\"IE_PROTO\"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=s(e),r(e,i)?e[i]:\"function\"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,n){var r=n(35);e.exports=function(e){return Object(r(e))}},function(e,t,n){\"use strict\";var r=n(89),s=n(90),i=n(21),o=n(18);e.exports=n(53)(Array,\"Array\",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,s(1)):s(0,\"keys\"==t?n:\"values\"==t?e[n]:[n,e[n]])},\"values\"),i.Arguments=i.Array,r(\"keys\"),r(\"values\"),r(\"entries\")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){\"use strict\";var r,s,i,o,a=n(19),u=n(3),l=n(20),c=n(60),f=n(8),h=n(10),d=n(24),p=n(92),_=n(93),v=n(61),m=n(62).set,g=n(98)(),y=n(43),S=n(63),T=n(99),b=n(64),C=u.TypeError,E=u.process,A=E&&E.versions,w=A&&A.v8||\"\",R=u.Promise,I=\"process\"==c(E),O=function(){},k=s=y.f,x=!!function(){try{var e=R.resolve(1),t=(e.constructor={})[n(4)(\"species\")]=function(e){e(O,O)};return(I||\"function\"==typeof PromiseRejectionEvent)&&e.then(O)instanceof t&&0!==w.indexOf(\"6.6\")&&-1===T.indexOf(\"Chrome/66\")}catch(e){}}(),N=function(e){var t;return!(!h(e)||\"function\"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var r=e._v,s=1==e._s,i=0,o=function(t){var n,i,o,a=s?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{a?(s||(2==e._h&&M(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&(c.exit(),o=!0)),n===t.promise?l(C(\"Promise-chain cycle\")):(i=N(n))?i.call(n,u,l):u(n)):l(r)}catch(e){c&&!o&&c.exit(),l(e)}};n.length>i;)o(n[i++]);e._c=[],e._n=!1,t&&!e._h&&D(e)})}},D=function(e){m.call(u,function(){var t,n,r,s=e._v,i=U(e);if(i&&(t=S(function(){I?E.emit(\"unhandledRejection\",s,e):(n=u.onunhandledrejection)?n({promise:e,reason:s}):(r=u.console)&&r.error&&r.error(\"Unhandled promise rejection\",s)}),e._h=I||U(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},U=function(e){return 1!==e._h&&0===(e._a||e._c).length},M=function(e){m.call(u,function(){var t;I?E.emit(\"rejectionHandled\",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},L=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},F=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw C(\"Promise can't be resolved itself\");(t=N(e))?g(function(){var r={_w:n,_d:!1};try{t.call(e,l(F,r,1),l(L,r,1))}catch(e){L.call(r,e)}}):(n._v=e,n._s=1,P(n,!1))}catch(e){L.call({_w:n,_d:!1},e)}}};x||(R=function(e){p(this,R,\"Promise\",\"_h\"),d(e),r.call(this);try{e(l(F,this,1),l(L,this,1))}catch(e){L.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(100)(R.prototype,{then:function(e,t){var n=k(v(this,R));return n.ok=\"function\"!=typeof e||e,n.fail=\"function\"==typeof t&&t,n.domain=I?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=l(F,e,1),this.reject=l(L,e,1)},y.f=k=function(e){return e===R||e===o?new i(e):s(e)}),f(f.G+f.W+f.F*!x,{Promise:R}),n(28)(R,\"Promise\"),n(101)(\"Promise\"),o=n(5).Promise,f(f.S+f.F*!x,\"Promise\",{reject:function(e){var t=k(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(a||!x),\"Promise\",{resolve:function(e){return b(a&&this===o?R:this,e)}}),f(f.S+f.F*!(x&&n(102)(function(e){R.all(e).catch(O)})),\"Promise\",{all:function(e){var t=this,n=k(t),r=n.resolve,s=n.reject,i=S(function(){var n=[],i=0,o=1;_(e,!1,function(e){var a=i++,u=!1;n.push(void 0),o++,t.resolve(e).then(function(e){u||(u=!0,n[a]=e,--o||r(n))},s)}),--o||r(n)});return i.e&&s(i.v),n.promise},race:function(e){var t=this,n=k(t),r=n.reject,s=S(function(){_(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return s.e&&r(s.v),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+\": incorrect invocation!\");return e}},function(e,t,n){var r=n(20),s=n(94),i=n(95),o=n(7),a=n(57),u=n(96),l={},c={};(t=e.exports=function(e,t,n,f,h){var d,p,_,v,m=h?function(){return e}:u(e),g=r(n,f,t?2:1),y=0;if(\"function\"!=typeof m)throw TypeError(e+\" is not iterable!\");if(i(m)){for(d=a(e.length);d>y;y++)if((v=t?g(o(p=e[y])[0],p[1]):g(e[y]))===l||v===c)return v}else for(_=m.call(e);!(p=_.next()).done;)if((v=s(_,g,p.value,t))===l||v===c)return v}).BREAK=l,t.RETURN=c},function(e,t,n){var r=n(7);e.exports=function(e,t,n,s){try{return s?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(21),s=n(4)(\"iterator\"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[s]===e)}},function(e,t,n){var r=n(60),s=n(4)(\"iterator\"),i=n(21);e.exports=n(5).getIteratorMethod=function(e){if(null!=e)return e[s]||e[\"@@iterator\"]||i[r(e)]}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(3),s=n(62).set,i=r.MutationObserver||r.WebKitMutationObserver,o=r.process,a=r.Promise,u=\"process\"==n(22)(o);e.exports=function(){var e,t,n,l=function(){var r,s;for(u&&(r=o.domain)&&r.exit();e;){s=e.fn,e=e.next;try{s()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){o.nextTick(l)};else if(!i||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var c=a.resolve(void 0);n=function(){c.then(l)}}else n=function(){s.call(r,l)};else{var f=!0,h=document.createTextNode(\"\");new i(l).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(r){var s={fn:r,next:void 0};t&&(t.next=s),e||(e=s,n()),t=s}}},function(e,t,n){var r=n(3).navigator;e.exports=r&&r.userAgent||\"\"},function(e,t,n){var r=n(14);e.exports=function(e,t,n){for(var s in t)n&&e[s]?e[s]=t[s]:r(e,s,t[s]);return e}},function(e,t,n){\"use strict\";var r=n(3),s=n(5),i=n(9),o=n(11),a=n(4)(\"species\");e.exports=function(e){var t=\"function\"==typeof s[e]?s[e]:r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(4)(\"iterator\"),s=!1;try{var i=[7][r]();i.return=function(){s=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!s)return!1;var n=!1;try{var i=[7],o=i[r]();o.next=function(){return{done:n=!0}},i[r]=function(){return o},e(i)}catch(e){}return n}},function(e,t,n){\"use strict\";var r=n(8),s=n(5),i=n(3),o=n(61),a=n(64);r(r.P+r.R,\"Promise\",{finally:function(e){var t=o(this,s.Promise||i.Promise),n=\"function\"==typeof e;return this.then(n?function(n){return a(t,e()).then(function(){return n})}:e,n?function(n){return a(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){\"use strict\";var r=n(8),s=n(43),i=n(63);r(r.S,\"Promise\",{try:function(e){var t=s.f(this),n=i(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){e.exports={default:n(106),__esModule:!0}},function(e,t,n){n(52),n(59),e.exports=n(44).f(\"iterator\")},function(e,t,n){e.exports={default:n(108),__esModule:!0}},function(e,t,n){n(109),n(51),n(114),n(115),e.exports=n(5).Symbol},function(e,t,n){\"use strict\";var r=n(3),s=n(15),i=n(11),o=n(8),a=n(55),u=n(110).KEY,l=n(25),c=n(41),f=n(28),h=n(27),d=n(4),p=n(44),_=n(45),v=n(111),m=n(112),g=n(7),y=n(10),S=n(18),T=n(37),b=n(26),C=n(38),E=n(113),A=n(67),w=n(9),R=n(39),I=A.f,O=w.f,k=E.f,x=r.Symbol,N=r.JSON,P=N&&N.stringify,D=d(\"_hidden\"),U=d(\"toPrimitive\"),M={}.propertyIsEnumerable,L=c(\"symbol-registry\"),F=c(\"symbols\"),q=c(\"op-symbols\"),H=Object.prototype,j=\"function\"==typeof x,B=r.QObject,G=!B||!B.prototype||!B.prototype.findChild,W=i&&l(function(){return 7!=C(O({},\"a\",{get:function(){return O(this,\"a\",{value:7}).a}})).a})?function(e,t,n){var r=I(H,t);r&&delete H[t],O(e,t,n),r&&e!==H&&O(H,t,r)}:O,J=function(e){var t=F[e]=C(x.prototype);return t._k=e,t},K=j&&\"symbol\"==typeof x.iterator?function(e){return\"symbol\"==typeof e}:function(e){return e instanceof x},V=function(e,t,n){return e===H&&V(q,t,n),g(e),t=T(t,!0),g(n),s(F,t)?(n.enumerable?(s(e,D)&&e[D][t]&&(e[D][t]=!1),n=C(n,{enumerable:b(0,!1)})):(s(e,D)||O(e,D,b(1,{})),e[D][t]=!0),W(e,t,n)):O(e,t,n)},X=function(e,t){g(e);for(var n,r=v(t=S(t)),s=0,i=r.length;i>s;)V(e,n=r[s++],t[n]);return e},z=function(e){var t=M.call(this,e=T(e,!0));return!(this===H&&s(F,e)&&!s(q,e))&&(!(t||!s(this,e)||!s(F,e)||s(this,D)&&this[D][e])||t)},Y=function(e,t){if(e=S(e),t=T(t,!0),e!==H||!s(F,t)||s(q,t)){var n=I(e,t);return!n||!s(F,t)||s(e,D)&&e[D][t]||(n.enumerable=!0),n}},$=function(e){for(var t,n=k(S(e)),r=[],i=0;n.length>i;)s(F,t=n[i++])||t==D||t==u||r.push(t);return r},Q=function(e){for(var t,n=e===H,r=k(n?q:S(e)),i=[],o=0;r.length>o;)!s(F,t=r[o++])||n&&!s(H,t)||i.push(F[t]);return i};j||(a((x=function(){if(this instanceof x)throw TypeError(\"Symbol is not a constructor!\");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===H&&t.call(q,n),s(this,D)&&s(this[D],e)&&(this[D][e]=!1),W(this,e,b(1,n))};return i&&G&&W(H,e,{configurable:!0,set:t}),J(e)}).prototype,\"toString\",function(){return this._k}),A.f=Y,w.f=V,n(66).f=E.f=$,n(46).f=z,n(65).f=Q,i&&!n(19)&&a(H,\"propertyIsEnumerable\",z,!0),p.f=function(e){return J(d(e))}),o(o.G+o.W+o.F*!j,{Symbol:x});for(var Z=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),ee=0;Z.length>ee;)d(Z[ee++]);for(var te=R(d.store),ne=0;te.length>ne;)_(te[ne++]);o(o.S+o.F*!j,\"Symbol\",{for:function(e){return s(L,e+=\"\")?L[e]:L[e]=x(e)},keyFor:function(e){if(!K(e))throw TypeError(e+\" is not a symbol!\");for(var t in L)if(L[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!j,\"Object\",{create:function(e,t){return void 0===t?C(e):X(C(e),t)},defineProperty:V,defineProperties:X,getOwnPropertyDescriptor:Y,getOwnPropertyNames:$,getOwnPropertySymbols:Q}),N&&o(o.S+o.F*(!j||l(function(){var e=x();return\"[null]\"!=P([e])||\"{}\"!=P({a:e})||\"{}\"!=P(Object(e))})),\"JSON\",{stringify:function(e){for(var t,n,r=[e],s=1;arguments.length>s;)r.push(arguments[s++]);if(n=t=r[1],(y(t)||void 0!==e)&&!K(e))return m(t)||(t=function(e,t){if(\"function\"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),r[1]=t,P.apply(N,r)}}),x.prototype[U]||n(14)(x.prototype,U,x.prototype.valueOf),f(x,\"Symbol\"),f(Math,\"Math\",!0),f(r.JSON,\"JSON\",!0)},function(e,t,n){var r=n(27)(\"meta\"),s=n(10),i=n(15),o=n(9).f,a=0,u=Object.isExtensible||function(){return!0},l=!n(25)(function(){return u(Object.preventExtensions({}))}),c=function(e){o(e,r,{value:{i:\"O\"+ ++a,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!s(e))return\"symbol\"==typeof e?e:(\"string\"==typeof e?\"S\":\"P\")+e;if(!i(e,r)){if(!u(e))return\"F\";if(!t)return\"E\";c(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[r].w},onFreeze:function(e){return l&&f.NEED&&u(e)&&!i(e,r)&&c(e),e}}},function(e,t,n){var r=n(39),s=n(65),i=n(46);e.exports=function(e){var t=r(e),n=s.f;if(n)for(var o,a=n(e),u=i.f,l=0;a.length>l;)u.call(e,o=a[l++])&&t.push(o);return t}},function(e,t,n){var r=n(22);e.exports=Array.isArray||function(e){return\"Array\"==r(e)}},function(e,t,n){var r=n(18),s=n(66).f,i={}.toString,o=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&\"[object Window]\"==i.call(e)?function(e){try{return s(e)}catch(e){return o.slice()}}(e):s(r(e))}},function(e,t,n){n(45)(\"asyncIterator\")},function(e,t,n){n(45)(\"observable\")},function(e,t,n){e.exports={default:n(117),__esModule:!0}},function(e,t,n){n(118);var r=n(5).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(8);r(r.S+r.F*!n(11),\"Object\",{defineProperty:n(9).f})},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=c(n(30)),s=c(n(31)),i=c(n(32)),o=c(n(33)),a=c(n(68)),u=c(n(122)),l=c(n(49));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(){(0,i.default)(this,e),this._session=null,this.kefuStatus=0,this.callType=\"2\",this.getLoginData=u.default.getLoginData,this.webApiHandler=u.default.webApiHandler,this.debug=a.default,this.log=this.debug(\"phonebar:api\")}var t;return(0,o.default)(e,[{key:\"getUser\",value:(t=(0,s.default)(r.default.mark(function e(t,n,s,i){var o;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLoginData(t,n,s,2);case 2:if(200==(o=e.sent).status){e.next=6;break}return i(o.status),e.abrupt(\"return\");case 6:this.log(o.memberInfo),i(null,o.memberInfo);case 8:case\"end\":return e.stop()}},e,this)})),function(e,n,r,s){return t.apply(this,arguments)})},{key:\"initCheck\",value:function(e,t){if(this.log(\"\"),e){var n=e.switchnumber,r=e.un,s=e.pwd,i=e.gid,o=e.callintype,a=e.socketUri,u=e.remoteAudio;if(r||this.log(\"\"),s||this.log(\"\"),n||this.log(\"\"),i||this.log(\"\"),o||(o=2),a||(a=l.default.wss),u||(u=\"peeraudio\"),t.register||this.log(\"\"),t.callEvent){t.callEvent;this.log(\"\")}else this.log(\"\")}}},{key:\"init\",value:function(e,t){this.log(\"init param :\",e),this.initCheck(e,t),this._ua=new u.default,this.login(e,t.register),this.changeStaus(\"setcb\",t.statusChanged),this.callEvent(t.callEvent),this.msgcb(t.message),this.kickoff(t.kickedOffLine)}},{key:\"logout\",value:function(e){this.kefuStatus=0,this._ua&&this._ua._ua.isRegistered()&&this._ua.logout(function(t){e&&e(t)})}},{key:\"kickoff\",value:function(e){var t=this;this._ua.on(\"kickedOffLine\",function(n){t.log(\"kickedOffLine, \",{data:n}),e(n)})}},{key:\"login\",value:function(e,t){var n=this;this.log(\"login param :\",e),this._ua.login(e,function(e){var r=e.code;switch(n.log(r,e),r){case\"connecting\":break;case\"disconnected\":localStorage.userData&&null==JSON.parse(localStorage.userData).status&&(n.kefuStatus=0,t({code:500,info:\"\",data:e.data}));break;case\"connected\":break;case\"registered\":n.log(\"registered: \",e.data.response.status_code,\",\",e.data.response.reason_phrase,{data:e.data}),t({code:e.data.response.status_code,data:e.data});break;case\"registrationFailed\":n.kefuStatus=0,t({code:500,info:\":\"+e.info,data:e.data})}})}},{key:\"changeStaus\",value:function(e,t){var n=this;\"setcb\"!=e&&(this.log(\"setchangeStaus:\"+e+\", waiting for statusChanged callback\"),this._ua.changeStaus(e)),this._ua.on(\"statusChanged\",function(e){n.kefuStatus=parseInt(e.status);var r=JSON.parse(localStorage.userData);r.status=e.status,localStorage.setItem(\"userData\",JSON.stringify(r)),n.log(\"statusChanged:\",e),t&&t(e)})}},{key:\"checkLogin\",value:function(){return this.kefuStatus}},{key:\"call\",value:function(e,t){var n=this;if(this.callType=e.callType,this._ua.callOut(e.peerID,this.callType,{}),this.log(\"call to:\",{peerID:e.peerID,callType:this.callType}),null!=t){var r=t.start,s=t.ringing,i=t.answer,o=t.end,a=\"calloutResponse\";2==this.callType?a=\"calloutResponse\":3==this.callType&&(a=\"callinResponse\"),this._ua.once(a,function(e){r(e)}),this._ua.once(\"incomingCall\",function(){n.session.on(\"accepted\",function(e){s(e)})}),this._ua.once(\"answeredPBXCall\",function(e){i(e)}),this._ua.once(\"endPBXCall\",function(e){n.log(\"\"),o(e)})}}},{key:\"terminate\",value:function(e){var t=localStorage.userData?JSON.parse(localStorage.getItem(\"userData\")):void 0,n=e||(t?t.ccNumber:void 0);n&&this._ua.hangUpPBXCall(n)}},{key:\"callEvent\",value:function(e){var t=this,n=function(n){t._ua.on(n,function(r){\"endPBXCall\"==n&&(t.session=null),e(n,r)})},r=!0,s=!1,i=void 0;try{for(var o,a=[\"newPBXCall\",\"cancelPBXCall\",\"calloutResponse\",\"callinFaildResponse\",\"answeredPBXCall\",\"endPBXCall\",\"callinResponse\"][Symbol.iterator]();!(r=(o=a.next()).done);r=!0){n(o.value)}}catch(e){s=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(s)throw i}}var u=[\"progress\",\"connecting\",\"accepted\",\"failed\",\"ended\",\"newDTMF\"];this._ua.on(\"incomingCall\",function(n){if(t.log(\"incomingCall: \",n.originator+\":\",{data:n}),\"local\"!==n.originator){var r=n.session;t.session=r;var s=function(n){t.session.on(n,function(t){e(n,t)})},i=!0,o=!1,a=void 0;try{for(var l,c=u[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){s(l.value)}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}}})}},{key:\"msgcb\",value:function(e){this._ua.on(\"sendMessageSucccess\",function(t){e(t,\"success\")}),this._ua.on(\"sendMessageFaild\",function(t){e(t,\"faild\")})}},{key:\"answerPBXCall\",value:function(e){this._ua.answerPBXCall(e)}},{key:\"sendDTMF\",value:function(e){this.session.sendDTMF(e),this.log(\"sendDTMF\",e+\"\")}},{key:\"hold\",value:function(e){e&&(this._ua.holdPBXCall(e),this.log(\"hold\",e))}},{key:\"unhold\",value:function(e){e&&(this._ua.unholdPBXCall(e),this.log(\"unhold\",e))}},{key:\"transferPBXCall\",value:function(e,t,n,r){var s=this;n&&(this._ua.transferPBXCall(n,e,t),this._ua.once(\"transferCallSuccess\",function(e){s.log(\"transferCallSuccess()\",e),r({type:\"transferCallSuccess\",data:e})}),this._ua.once(\"transferCallFaild\",function(e){s.log(\"transferCallFaild()\",e),r({type:\"transferCallFaild\",data:e})}))}},{key:\"preSetStatus\",value:function(e){this._ua.preSetStatus(e.ccNumber),this.log(\"preSetStatus:\",e)}},{key:\"preSetStatusCancle\",value:function(e){this._ua.preSetStatusCancle(e.ccNumber),this.log(\"preSetStatusCancle:\",e)}},{key:\"setSeatMode\",value:function(e){this._ua.setSeatMode(e,!1),this.log(\"setSeatMode:\",e)}},{key:\"session\",get:function(){return this._session},set:function(e){this._session=e,this.log(\"session change:\",e)}}]),e}();t.default=new f},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,s=+new Date,i=s-(n||s);e.diff=i,e.prev=n,e.curr=s,n=s;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=t.coerce(o[0]),\"string\"!=typeof o[0]&&o.unshift(\"%O\");var u=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,r){if(\"%%\"===n)return n;u++;var s=t.formatters[r];if(\"function\"==typeof s){var i=o[u];n=s.call(e,i),o.splice(u,1),u--}return n}),t.formatArgs.call(e,o),(r.log||t.log||console.log.bind(console)).apply(e,o)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=s,\"function\"==typeof t.init&&t.init(r),t.instances.push(r),r}function s(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable(\"\")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=(\"string\"==typeof e?e:\"\").split(/[\\s,]+/),s=r.length;for(n=0;n<s;n++)r[n]&&(\"-\"===(e=r[n].replace(/\\*/g,\".*?\"))[0]?t.skips.push(new RegExp(\"^\"+e.substr(1)+\"$\")):t.names.push(new RegExp(\"^\"+e+\"$\")));for(n=0;n<t.instances.length;n++){var i=t.instances[n];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if(\"*\"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(121),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,r=60*n,s=60*r,i=24*s,o=365.25*i;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+\" \"+n:Math.ceil(e/t)+\" \"+n+\"s\"}e.exports=function(e,t){t=t||{};var u,l=typeof e;if(\"string\"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||\"ms\").toLowerCase()){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return a*o;case\"days\":case\"day\":case\"d\":return a*i;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return a*s;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return a*r;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return a*n;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return a;default:return}}(e);if(\"number\"===l&&!1===isNaN(e))return t.long?a(u=e,i,\"day\")||a(u,s,\"hour\")||a(u,r,\"minute\")||a(u,n,\"second\")||u+\" ms\":function(e){if(e>=i)return Math.round(e/i)+\"d\";if(e>=s)return Math.round(e/s)+\"h\";if(e>=r)return Math.round(e/r)+\"m\";if(e>=n)return Math.round(e/n)+\"s\";return e+\"ms\"}(e);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(e))}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=d(n(30)),s=d(n(31)),i=d(n(32)),o=d(n(33)),a=d(n(123)),u=d(n(124)),l=d(n(132)),c=d(n(48)),f=d(n(152)),h=d(n(153));function d(e){return e&&e.__esModule?e:{default:e}}var p=d(n(12)).default.EventEmitter,_=new c.default(\"index\"),v=function(e){function t(){(0,i.default)(this,t);var e=(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._ua=null,e}var n,c;return(0,u.default)(t,e),(0,o.default)(t,[{key:\"login\",value:(c=(0,s.default)(r.default.mark(function e(t,n){var s,i;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(s=JSON.parse(localStorage.userData))||this.emit(\"registrationFailed\"),t&&(s.loginGid=t.gid,s.socketUri=t.socketUri,s.remoteAudio=t.remoteAudio,localStorage.setItem(\"userData\",JSON.stringify(s))),_.debug(\"sip\"),this.registerSip(s),this.registerEvents(n),this.receiveNewMsg(),i=t&&t.remoteAudio||s.remoteAudio,this.newSessionEvent(document.getElementById(i));case 9:case\"end\":return e.stop()}},e,this)})),function(e,t){return c.apply(this,arguments)})},{key:\"registerSip\",value:function(e){var t=-1!==e.socketUri.split(\"://\")[1].indexOf(\"sbc\")?e.serverIp+\":\"+e.sipPort:\"\"+e.serverIp,n=e.userInfo.number+\"_\"+e.eid16,r=new l.default.WebSocketInterface(e.socketUri);this._ua=new l.default.UA({uri:\"sip:\"+n+\"@\"+t,password:e.clearPwd.slice(8,e.clearPwd.length-6),display_name:e.userInfo.displayname,sockets:[r],registrar_server:t,contact_uri:\"sip:\"+n+\"@\"+t+\";transport=tcp\",authorization_user:n,user_agent:\"callcenter_webrtc_pc_Sipek_win32/r58257\",use_preloaded_route:!1,session_timers:!0}),this._ua.start()}},{key:\"receiveNewMsg\",value:function(){var e=this;this._ua.on(\"newMessage\",function(t){if(\"local\"!=t.originator){var n=t.request.body,r=f.default.xmlToJs(n);_.debug(\"receive message:\"+JSON.stringify(r));var s=Object.keys(r)[0],i=JSON.parse(localStorage.userData);if(\"cc\"==s&&1!==Number(i.seatMode)){var o=r.cc.a;switch(o){case\"1\":case\"2\":e.emit(\"statusChanged\",{status:o});break;case\"87\":e.emit(\"preSetStatusResponse\",r.cc);break;case\"38\":e.emit(\"transferCallSuccess\",r.cc);break;case\"39\":e.emit(\"transferCallFaild\",r.cc);break;case\"201\":e.emit(\"calloutResponse\",r.cc);break;case\"301\":e.emit(\"callinResponse\",r.cc);break;case\"309\":e.emit(\"callinFaildResponse\",r.cc);break;case\"100\":e.emit(\"newPBXCall\",r.cc);break;case\"101\":e.emit(\"cancelPBXCall\",r.cc);break;case\"104\":e.emit(\"answeredPBXCall\",r.cc);break;case\"105\":e.emit(\"endPBXCall\",r.cc)}}else\"o\"==s&&r.o.a&&r.o.a.u&&e.emit(\"kickedOffLine\",r.o.a.u[0])}})}},{key:\"registerEvents\",value:function(e){var t=this;this._ua.on(\"connecting\",function(t){e({code:\"connecting\",data:t})}),this._ua.on(\"connected\",function(t){e({code:\"connected\",data:t})}),this._ua.on(\"disconnected\",function(n){var r=localStorage.userData?JSON.parse(localStorage.userData):void 0;r&&null==r.status?(t._ua.removeAllListeners(),t._ua.stop(),localStorage.removeItem(\"userData\"),e({code:\"registrationFailed\",data:n,info:\"wss\",status:51001})):e({code:\"disconnected\",data:n})}),this._ua.on(\"registered\",function(n){var r=JSON.parse(localStorage.userData),s=r.status||r.preferredStatus||\"1\";t.preLoginStatus(s),r.seatMode||t.setSeatMode(52,!0),t.logonWithGroup(r.loginGid,r.eid),e({code:\"registered\",data:n,status:200})}),this._ua.on(\"registrationFailed\",function(n){_.debug(\"sip\"),localStorage.removeItem(\"userData\"),t._ua.stop(),e({code:\"registrationFailed\",data:n,info:\"sip\",status:51e3})})}},{key:\"newSessionEvent\",value:function(e){var t=this;this._ua.on(\"newRTCSession\",function(n){_.debug('UA \"newRTCSession\" event');var r=n.session;r.answer({mediaConstraints:{audio:!0,video:!1}}),r.connection.addEventListener(\"addstream\",function(t){e.srcObject=t.stream,t.stream.addEventListener(\"addtrack\",function(t){var n=t.track;e.srcObject===t.stream&&(e.srcObject=t.stream,n.addEventListener(\"ended\",function(){}))}),t.stream.addEventListener(\"removetrack\",function(){e.srcObject===t.stream&&(e.srcObject=t.stream)})}),t.emit(\"incomingCall\",n),t.setSessionInfo(r)})}},{key:\"setSessionInfo\",value:function(e){e.on(\"newInfo\",function(t){if(_.debug('UA \"newInfo\" event'),!e.ccNumber){var n=t.request.body;e.ccNumber=f.default.xmlToJs(n).i.n}})}},{key:\"sendMsgHelper\",value:function(e,t,n,r){var s=this,i=f.default.jsToXml(e,n);\"preSetStatus\"!=t&&\"preSetStatusCancle\"!=t||this.once(\"preSetStatusResponse\",function(e){_.debug(e),200==e.r?s.emit(\"sendMessageSucccess\",{callbacktype:t,info:\"\",data:\"\",status:200}):s.emit(\"sendMessageFaild\",{callbacktype:t,info:\"\",status:\"preSetStatus\"==t?52006:52007})});var o={succeeded:function(n){switch(_.debug(t+\" success!\"),t){case\"preLoginStatus\":case\"changeStaus\":s.emit(\"statusChanged\",{status:e.a});break;case\"preSetStatus\":case\"preSetStatusCancle\":return;case\"setSeatMode\":var i=JSON.parse(localStorage.userData);i.seatMode=r.seatMode,r.callintype&&(i.callintype=r.callintype),localStorage.setItem(\"userData\",JSON.stringify(i));default:s.emit(\"sendMessageSucccess\",{callbacktype:t,info:\"\",data:n,dataInfo:r,status:200})}},failed:function(e){_.debug(t+e);var n=0;switch(t){case\"preLoginStatus\":n=52e3;break;case\"logonWithGroup\":n=52001;break;case\"setSeatMode\":n=52002;break;case\"changeStaus\":n=52003;break;case\"holdPBXCall\":n=52004;break;case\"unholdPBXCall\":n=52005;break;case\"preSetStatus\":n=52006;break;case\"preSetStatusCancle\":n=52007;break;case\"answerPBXCall\":n=52008;break;case\"hangUpPBXCall\":n=52009;break;case\"callOutWithNumber\":n=52010;break;case\"callOutWithPhone\":n=52011;break;case\"transferPBXCall\":n=52012;break;default:n=5e4}s.emit(\"sendMessageFaild\",{callbacktype:t,info:e,status:n,dataInfo:r})}};this.sendMessage(\"PBX\",i,o)}},{key:\"answerPBXCall\",value:function(e){var t={a:\"102\",c:e};this.sendMsgHelper(t,\"answerPBXCall\",\"cc\")}},{key:\"holdPBXCall\",value:function(e){var t=JSON.parse(localStorage.getItem(\"userData\")),n=\"\";2!=t.callintype&&5!=t.callintype||(n=t.userInfo.number+\"_\"+t.eid16),4==t.callintype&&(n=\"9\"+t.phoneNumber);var r={a:\"1\",number:n,cc:e};this.sendMsgHelper(r,\"holdPBXCall\",\"ch\")}},{key:\"unholdPBXCall\",value:function(e){var t=JSON.parse(localStorage.getItem(\"userData\")),n=\"\";2!=t.callintype&&5!=t.callintype||(n=t.userInfo.number+\"_\"+t.eid16),4==t.callintype&&(n=\"9\"+t.phoneNumber);var r={a:\"2\",number:n,cc:e};this.sendMsgHelper(r,\"unholdPBXCall\",\"ch\")}},{key:\"preSetStatus\",value:function(e){var t={a:\"87\",s:\"2\",c:e};this.sendMsgHelper(t,\"preSetStatus\",\"cc\")}},{key:\"preSetStatusCancle\",value:function(e){var t={a:\"87\",s:\"-1\",c:e};this.sendMsgHelper(t,\"preSetStatusCancle\",\"cc\")}},{key:\"hangUpPBXCall\",value:function(e){var t={a:\"106\",c:e};this.sendMsgHelper(t,\"hangUpPBXCall\",\"cc\")}},{key:\"callOut\",value:function(e,t,n){_.debug('call others [uri:\"%s\"]',e);var r=JSON.parse(localStorage.userData),s=Math.random().toString().split(\".\")[1].substr(0,3);switch(t){case 1:var i=this._ua.call(e,{mediaConstraints:{audio:!0},rtcOfferConstraints:{offerToReceiveAudio:1},eventHandlers:n});return this.setSessionInfo(i),i;case 2:var o={a:\"200\",p:r.switchNumber,i:Date.now().toString()+s,t:e};this.sendMsgHelper(o,\"callOutWithPhone\",\"cc\");break;case 3:var a={a:\"300\",p:r.switchNumber,i:Date.now().toString()+s,t:e+\"_\"+r.eid16};this.sendMsgHelper(a,\"callOutWithNumber\",\"cc\")}}},{key:\"logout\",value:function(e){this._ua.removeAllListeners(),this._ua.stop(),this._ua.once(\"unregistered\",function(t){var n=t.response;\"OK\"==n.reason_phrase&&200==n.status_code&&\"REGISTER\"==n.method?(localStorage.removeItem(\"userData\"),e({code:n.status_code,info:n.reason_phrase})):e({code:53e3,info:n.reason_phrase})})}},{key:\"sendMessage\",value:function(e,t,n){_.debug(\"send message!!!,content:\"+t+\" target:\"+e);var r={eventHandlers:n,contentType:\"application/pidf+xml\"};return this._ua.sendMessage(e,t,r)}},{key:\"isConnected\",value:function(){return this._ua.isConnected}},{key:\"preLoginStatus\",value:function(e){return this.sendMsgHelper({a:e.toString()},\"preLoginStatus\",\"cc\")}},{key:\"changeStaus\",value:function(e){return this.sendMsgHelper({a:e.toString()},\"changeStaus\",\"cc\")}},{key:\"logonWithGroup\",value:function(e,t){return this.sendMsgHelper({a:\"53\",g:e+\"_\"+t},\"logonWithGroup\",\"cc\")}},{key:\"setSeatMode\",value:(n=(0,s.default)(r.default.mark(function e(n,s){var i,o,a,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s||52!=n||this.changeStaus(\"1\"),i=JSON.parse(localStorage.userData),o={},52==n&&(o.seatMode=2,s||(o.callintype=i.oldCallType)),51==n&&(o.seatMode=1,o.callintype=4),a={un:i.userInfo.number,pwd:i.clearPwd.slice(8,i.clearPwd.length-6),eid:i.eid,jsonStr:JSON.stringify({data:{callintype:o.callintype}})},e.next=8,t.webApiHandler(\"updateInfo\",a);case 8:if(200===(u=e.sent).status){e.next=12;break}return this.emit(\"sendMessageFaild\",{callbacktype:\"setSeatMode\",info:u.info,status:52002}),e.abrupt(\"return\");case 12:return e.abrupt(\"return\",this.sendMsgHelper({a:n.toString()},\"setSeatMode\",\"cc\",o));case 13:case\"end\":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:\"transferPBXCall\",value:function(e,t,n){if(!e||!t||!n)return new Error(\"\");var r=JSON.parse(localStorage.userData),s={a:\"31\",c:e,g:t+\"_\"+r.eid,n:n+\"_\"+r.eid16};return this.sendMsgHelper(s,\"transferPBXCall\",\"cc\")}}]),t}(p);t.default=v,v.getLoginData=h.default.getLoginData,v.webApiHandler=h.default.webApiHandler},function(e,t,n){\"use strict\";t.__esModule=!0;var r,s=n(50),i=(r=s)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!==(void 0===t?\"undefined\":(0,i.default)(t))&&\"function\"!=typeof t?e:t}},function(e,t,n){\"use strict\";t.__esModule=!0;var r=o(n(125)),s=o(n(129)),i=o(n(50));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+(void 0===t?\"undefined\":(0,i.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(126),__esModule:!0}},function(e,t,n){n(127),e.exports=n(5).Object.setPrototypeOf},function(e,t,n){var r=n(8);r(r.S,\"Object\",{setPrototypeOf:n(128).set})},function(e,t,n){var r=n(10),s=n(7),i=function(e,t){if(s(e),!r(t)&&null!==t)throw TypeError(t+\": can't set as prototype!\")};e.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(e,t,r){try{(r=n(20)(Function.call,n(67).f(Object.prototype,\"__proto__\").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t,n){e.exports={default:n(130),__esModule:!0}},function(e,t,n){n(131);var r=n(5).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(8);r(r.S,\"Object\",{create:n(38)})},function(e,t,n){\"use strict\";var r=n(70),s=n(1),i=n(16),o=n(2),a=n(133),u=n(17),l=n(47),c=n(6),f=n(151);n(0)(\"JsSIP\")(\"version %s\",r.version),e.exports={C:s,Exceptions:i,Utils:o,UA:a,URI:u,NameAddrHeader:l,WebSocketInterface:f,Grammar:c,debug:n(0),get name(){return r.title},get version(){return r.version}}},function(e,t,n){\"use strict\";function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=n(12).EventEmitter,c=n(1),f=n(134),h=n(74),d=n(146),p=n(23),_=n(147),v=n(2),m=n(16),g=n(17),y=n(148),S=n(13),T=n(149),b=n(150),C=n(0)(\"JsSIP:UA\"),E=n(0)(\"JsSIP:ERROR:UA\");E.log=console.warn.bind(console);var A={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2};e.exports=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),C(\"new() [configuration:%o]\",e),(n=function(e,t){return!t||\"object\"!==r(t)&&\"function\"!=typeof t?i(e):t}(this,s(t).call(this)))._cache={credentials:{}},n._configuration=Object.assign({},b.settings),n._dynConfiguration={},n._dialogs={},n._applicants={},n._sessions={},n._transport=null,n._contact=null,n._status=A.STATUS_INIT,n._error=null,n._transactions={nist:{},nict:{},ist:{},ict:{}},n._data={},n._closeTimer=null,void 0===e)throw new TypeError(\"Not enough arguments\");try{n._loadConfig(e)}catch(e){throw n._status=A.STATUS_NOT_READY,n._error=A.CONFIGURATION_ERROR,e}return n._registrator=new f(i(n)),n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,l),a(t,null,[{key:\"C\",get:function(){return A}}]),a(t,[{key:\"start\",value:function(){C(\"start()\"),this._status===A.STATUS_INIT?this._transport.connect():this._status===A.STATUS_USER_CLOSED?(C(\"restarting UA\"),null!==this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null,this._transport.disconnect()),this._status=A.STATUS_INIT,this._transport.connect()):this._status===A.STATUS_READY?C(\"UA is in READY status, not restarted\"):C(\"ERROR: connection is down, Auto-Recovery system is trying to reconnect\"),this._dynConfiguration.register=this._configuration.register}},{key:\"register\",value:function(){C(\"register()\"),this._dynConfiguration.register=!0,this._registrator.register()}},{key:\"unregister\",value:function(e){C(\"unregister()\"),this._dynConfiguration.register=!1,this._registrator.unregister(e)}},{key:\"registrator\",value:function(){return this._registrator}},{key:\"isRegistered\",value:function(){return this._registrator.registered}},{key:\"isConnected\",value:function(){return this._transport.isConnected()}},{key:\"call\",value:function(e,t){C(\"call()\");var n=new h(this);return n.connect(e,t),n}},{key:\"sendMessage\",value:function(e,t,n){C(\"sendMessage()\");var r=new d(this);return r.send(e,t,n),r}},{key:\"terminateSessions\",value:function(e){for(var t in C(\"terminateSessions()\"),this._sessions)this._sessions[t].isEnded()||this._sessions[t].terminate(e)}},{key:\"stop\",value:function(){var e=this;if(C(\"stop()\"),this._dynConfiguration={},this._status!==A.STATUS_USER_CLOSED){this._registrator.close();var t=Object.keys(this._sessions).length;for(var n in this._sessions)if(Object.prototype.hasOwnProperty.call(this._sessions,n)){C(\"closing session \".concat(n));try{this._sessions[n].terminate()}catch(e){}}for(var r in this._applicants)if(Object.prototype.hasOwnProperty.call(this._applicants,r))try{this._applicants[r].close()}catch(e){}this._status=A.STATUS_USER_CLOSED,0===Object.keys(this._transactions.nict).length+Object.keys(this._transactions.nist).length+Object.keys(this._transactions.ict).length+Object.keys(this._transactions.ist).length&&0===t?this._transport.disconnect():this._closeTimer=setTimeout(function(){e._closeTimer=null,e._transport.disconnect()},2e3)}else C(\"UA already closed\")}},{key:\"normalizeTarget\",value:function(e){return v.normalizeTarget(e,this._configuration.hostport_params)}},{key:\"get\",value:function(e){switch(e){case\"realm\":return this._configuration.realm;case\"ha1\":return this._configuration.ha1;default:return void E('get() | cannot get \"%s\" parameter in runtime',e)}}},{key:\"set\",value:function(e,t){switch(e){case\"password\":this._configuration.password=String(t);break;case\"realm\":this._configuration.realm=String(t);break;case\"ha1\":this._configuration.ha1=String(t),this._configuration.password=null;break;case\"display_name\":this._configuration.display_name=t;break;default:return E('set() | cannot set \"%s\" parameter in runtime',e),!1}return!0}},{key:\"newTransaction\",value:function(e){this._transactions[e.type][e.id]=e,this.emit(\"newTransaction\",{transaction:e})}},{key:\"destroyTransaction\",value:function(e){delete this._transactions[e.type][e.id],this.emit(\"transactionDestroyed\",{transaction:e})}},{key:\"newDialog\",value:function(e){this._dialogs[e.id]=e}},{key:\"destroyDialog\",value:function(e){delete this._dialogs[e.id]}},{key:\"newMessage\",value:function(e,t){this._applicants[e]=e,this.emit(\"newMessage\",t)}},{key:\"destroyMessage\",value:function(e){delete this._applicants[e]}},{key:\"newRTCSession\",value:function(e,t){this._sessions[e.id]=e,this.emit(\"newRTCSession\",t)}},{key:\"destroyRTCSession\",value:function(e){delete this._sessions[e.id]}},{key:\"registered\",value:function(e){this.emit(\"registered\",e)}},{key:\"unregistered\",value:function(e){this.emit(\"unregistered\",e)}},{key:\"registrationFailed\",value:function(e){this.emit(\"registrationFailed\",e)}},{key:\"receiveRequest\",value:function(e){var t=e.method;if(e.ruri.user!==this._configuration.uri.user&&e.ruri.user!==this._contact.uri.user)return C(\"Request-URI does not point to us\"),void(e.method!==c.ACK&&e.reply_sl(404));if(e.ruri.scheme!==c.SIPS){if(!p.checkTransaction(this,e)){if(t===c.INVITE?new p.InviteServerTransaction(this,this._transport,e):t!==c.ACK&&t!==c.CANCEL&&new p.NonInviteServerTransaction(this,this._transport,e),t===c.OPTIONS)e.reply(200);else if(t===c.MESSAGE){if(0===this.listeners(\"newMessage\").length)return void e.reply(405);new d(this).init_incoming(e)}else if(t===c.INVITE&&!e.to_tag&&0===this.listeners(\"newRTCSession\").length)return void e.reply(405);var n,r;if(e.to_tag)(n=this._findDialog(e.call_id,e.from_tag,e.to_tag))?n.receiveRequest(e):t===c.NOTIFY?(r=this._findSession(e))?r.receiveRequest(e):(C(\"received NOTIFY request for a non existent subscription\"),e.reply(481,\"Subscription does not exist\")):t!==c.ACK&&e.reply(481);else switch(t){case c.INVITE:if(window.RTCPeerConnection)if(e.hasHeader(\"replaces\")){var s=e.replaces;(n=this._findDialog(s.call_id,s.from_tag,s.to_tag))?(r=n.owner).isEnded()?e.reply(603):r.receiveRequest(e):e.reply(481)}else(r=new h(this)).init_incoming(e);else E(\"INVITE received but WebRTC is not supported\"),e.reply(488);break;case c.BYE:e.reply(481);break;case c.CANCEL:(r=this._findSession(e))?r.receiveRequest(e):C(\"received CANCEL request for a non existent session\");break;case c.ACK:break;case c.NOTIFY:this.emit(\"sipEvent\",{event:e.event,request:e}),e.reply(200);break;default:e.reply(405)}}}else e.reply_sl(416)}},{key:\"_findSession\",value:function(e){var t=e.call_id,n=e.from_tag,r=e.to_tag,s=t+n,i=this._sessions[s],o=t+r,a=this._sessions[o];return i||(a||null)}},{key:\"_findDialog\",value:function(e,t,n){var r=e+t+n,s=this._dialogs[r];return s||(r=e+n+t,(s=this._dialogs[r])||null)}},{key:\"_loadConfig\",value:function(e){try{b.load(this._configuration,e)}catch(e){throw e}0===this._configuration.display_name&&(this._configuration.display_name=\"0\"),this._configuration.instance_id||(this._configuration.instance_id=v.newUUID()),this._configuration.jssip_id=v.createRandomToken(5);var t=this._configuration.uri.clone();t.user=null,this._configuration.hostport_params=t.toString().replace(/^sip:/i,\"\");try{this._transport=new _(this._configuration.sockets,{max_interval:this._configuration.connection_recovery_max_interval,min_interval:this._configuration.connection_recovery_min_interval}),this._transport.onconnecting=function(e){this.emit(\"connecting\",e)}.bind(this),this._transport.onconnect=function(e){if(this._status===A.STATUS_USER_CLOSED)return;this._status=A.STATUS_READY,this._error=null,this.emit(\"connected\",e),this._dynConfiguration.register&&this._registrator.register()}.bind(this),this._transport.ondisconnect=function(e){for(var t=0,n=[\"nict\",\"ict\",\"nist\",\"ist\"];t<n.length;t++){var r=n[t];for(var s in this._transactions[r])Object.prototype.hasOwnProperty.call(this._transactions[r],s)&&this._transactions[r][s].onTransportError()}this.emit(\"disconnected\",e),this._registrator.onTransportClosed(),this._status!==A.STATUS_USER_CLOSED&&(this._status=A.STATUS_NOT_READY,this._error=A.NETWORK_ERROR)}.bind(this),this._transport.ondata=function(e){var t=e.transport,n=e.message;if(!(n=y.parseMessage(n,this)))return;if(this._status===A.STATUS_USER_CLOSED&&n instanceof S.IncomingRequest)return;if(!T(n,this,t))return;if(n instanceof S.IncomingRequest)n.transport=t,this.receiveRequest(n);else if(n instanceof S.IncomingResponse){var r;switch(n.method){case c.INVITE:(r=this._transactions.ict[n.via_branch])&&r.receiveResponse(n);break;case c.ACK:break;default:(r=this._transactions.nict[n.via_branch])&&r.receiveResponse(n)}}}.bind(this)}catch(e){throw E(e),new m.ConfigurationError(\"sockets\",this._configuration.sockets)}if(delete this._configuration.sockets,this._configuration.authorization_user||(this._configuration.authorization_user=this._configuration.uri.user),!this._configuration.registrar_server){var n=this._configuration.uri.clone();n.user=null,n.clearParams(),n.clearHeaders(),this._configuration.registrar_server=n}this._configuration.no_answer_timeout*=1e3,this._configuration.contact_uri?this._configuration.via_host=this._configuration.contact_uri.host:this._configuration.contact_uri=new g(\"sip\",v.createRandomToken(8),this._configuration.via_host,null,{transport:\"ws\"}),this._contact={pub_gruu:null,temp_gruu:null,uri:this._configuration.contact_uri,toString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.anonymous||null,n=e.outbound||null,r=\"<\";return r+=t?this.temp_gruu||\"sip:anonymous@anonymous.invalid;transport=ws\":this.pub_gruu||this.uri.toString(),!n||(t?this.temp_gruu:this.pub_gruu)||(r+=\";ob\"),r+=\">\"}};var r=[\"password\",\"realm\",\"ha1\",\"display_name\",\"register\"];for(var s in this._configuration)Object.prototype.hasOwnProperty.call(this._configuration,s)&&(-1!==r.indexOf(s)?Object.defineProperty(this._configuration,s,{writable:!0,configurable:!1}):Object.defineProperty(this._configuration,s,{writable:!1,configurable:!1}));for(var i in C(\"configuration parameters after validation:\"),this._configuration)if(Object.prototype.hasOwnProperty.call(b.settings,i))switch(i){case\"uri\":case\"registrar_server\":C(\"- \".concat(i,\": \").concat(this._configuration[i]));break;case\"password\":case\"ha1\":C(\"- \".concat(i,\": NOT SHOWN\"));break;default:C(\"- \".concat(i,\": \").concat(JSON.stringify(this._configuration[i])))}}},{key:\"C\",get:function(){return A}},{key:\"status\",get:function(){return this._status}},{key:\"contact\",get:function(){return this._contact}},{key:\"configuration\",get:function(){return this._configuration}},{key:\"transport\",get:function(){return this._transport}}]),t}()},function(e,t,n){\"use strict\";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(2),i=n(1),o=n(13),a=n(29),u=n(0)(\"JsSIP:Registrator\");e.exports=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e);this._ua=t,this._transport=n,this._registrar=t.configuration.registrar_server,this._expires=t.configuration.register_expires,this._call_id=s.createRandomToken(22),this._cseq=0,this._to_uri=t.configuration.uri,this._registrationTimer=null,this._registering=!1,this._registered=!1,this._contact=this._ua.contact.toString(),this._contact+=\";+sip.ice\",this._extraHeaders=[],this._extraContactParams=\"\",this._contact+=\";reg-id=\".concat(1),this._contact+=';+sip.instance=\"<urn:uuid:'.concat(this._ua.configuration.instance_id,'>\"')}var t,n,l;return t=e,(n=[{key:\"setExtraHeaders\",value:function(e){Array.isArray(e)||(e=[]),this._extraHeaders=e.slice()}},{key:\"setExtraContactParams\",value:function(e){for(var t in e instanceof Object||(e={}),this._extraContactParams=\"\",e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];this._extraContactParams+=\";\".concat(t),n&&(this._extraContactParams+=\"=\".concat(n))}}},{key:\"register\",value:function(){var e=this;if(this._registering)u(\"Register request in progress...\");else{var t=this._extraHeaders.slice();t.push(\"Contact: \".concat(this._contact,\";expires=\").concat(this._expires).concat(this._extraContactParams)),t.push(\"Expires: \".concat(this._expires));var n=new o.OutgoingRequest(i.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},t),r=new a(this._ua,n,{onRequestTimeout:function(){e._registrationFailure(null,i.causes.REQUEST_TIMEOUT)},onTransportError:function(){e._registrationFailure(null,i.causes.CONNECTION_ERROR)},onAuthenticated:function(){e._cseq+=1},onReceiveResponse:function(t){if(t.cseq===e._cseq)switch(null!==e._registrationTimer&&(clearTimeout(e._registrationTimer),e._registrationTimer=null),!0){case/^1[0-9]{2}$/.test(t.status_code):break;case/^2[0-9]{2}$/.test(t.status_code):if(e._registering=!1,!t.hasHeader(\"Contact\")){u(\"no Contact header in response to REGISTER, response ignored\");break}var n=t.headers.Contact.reduce(function(e,t){return e.concat(t.parsed)},[]).find(function(t){return t.uri.user===e._ua.contact.uri.user});if(!n){u(\"no Contact header pointing to us, response ignored\");break}var r=n.getParam(\"expires\");!r&&t.hasHeader(\"expires\")&&(r=t.getHeader(\"expires\")),r||(r=e._expires),(r=Number(r))<10&&(r=10),e._registrationTimer=setTimeout(function(){e._registrationTimer=null,0===e._ua.listeners(\"registrationExpiring\").length?e.register():e._ua.emit(\"registrationExpiring\")},1e3*r-5e3),n.hasParam(\"temp-gruu\")&&(e._ua.contact.temp_gruu=n.getParam(\"temp-gruu\").replace(/\"/g,\"\")),n.hasParam(\"pub-gruu\")&&(e._ua.contact.pub_gruu=n.getParam(\"pub-gruu\").replace(/\"/g,\"\")),e._registered||(e._registered=!0,e._ua.registered({response:t}));break;case/^423$/.test(t.status_code):t.hasHeader(\"min-expires\")?(e._expires=Number(t.getHeader(\"min-expires\")),e._expires<10&&(e._expires=10),e.register()):(u(\"423 response received for REGISTER without Min-Expires\"),e._registrationFailure(t,i.causes.SIP_FAILURE_CODE));break;default:var o=s.sipErrorCause(t.status_code);e._registrationFailure(t,o)}}});this._registering=!0,r.send()}}},{key:\"unregister\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._registered){this._registered=!1,null!==this._registrationTimer&&(clearTimeout(this._registrationTimer),this._registrationTimer=null);var n=this._extraHeaders.slice();t.all?n.push(\"Contact: *\".concat(this._extraContactParams)):n.push(\"Contact: \".concat(this._contact,\";expires=0\").concat(this._extraContactParams)),n.push(\"Expires: 0\");var r=new o.OutgoingRequest(i.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},n),l=new a(this._ua,r,{onRequestTimeout:function(){e._unregistered(null,i.causes.REQUEST_TIMEOUT)},onTransportError:function(){e._unregistered(null,i.causes.CONNECTION_ERROR)},onAuthenticated:function(){e._cseq+=1},onReceiveResponse:function(t){switch(!0){case/^1[0-9]{2}$/.test(t.status_code):break;case/^2[0-9]{2}$/.test(t.status_code):e._unregistered(t);break;default:var n=s.sipErrorCause(t.status_code);e._unregistered(t,n)}}});l.send()}else u(\"already unregistered\")}},{key:\"close\",value:function(){this._registered&&this.unregister()}},{key:\"onTransportClosed\",value:function(){this._registering=!1,null!==this._registrationTimer&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),this._registered&&(this._registered=!1,this._ua.unregistered({}))}},{key:\"_registrationFailure\",value:function(e,t){this._registering=!1,this._ua.registrationFailed({response:e||null,cause:t}),this._registered&&(this._registered=!1,this._ua.unregistered({response:e||null,cause:t}))}},{key:\"_unregistered\",value:function(e,t){this._registering=!1,this._registered=!1,this._ua.unregistered({response:e||null,cause:t||null})}},{key:\"registered\",get:function(){return this._registered}}])&&r(t.prototype,n),l&&r(t,l),e}()},function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},s=function(e,t,n){var s=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:s&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:s?t[e.name]:t;!function(e,t,n,s){if(s&&!n)t[s]=r(e[1]);else for(var i=0;i<n.length;i+=1)null!=e[i+1]&&(t[n[i]]=r(e[i+1]))}(n.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)},i=n(72),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\\r\\n|\\r|\\n)/).filter(o).forEach(function(e){var t=e[0],o=e.slice(2);\"m\"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var a=0;a<(i[t]||[]).length;a+=1){var u=i[t][a];if(u.reg.test(o))return s(u,r,o)}}),t.media=n,t};var a=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=r(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(\" \").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(\" \").map(r),s=0;s<n.length;s+=3)t.push({component:n[s],ip:n[s+1],port:n[s+2]});return t},t.parseImageAttributes=function(e){return e.split(\" \").map(function(e){return e.substring(1,e.length-1).split(\",\").reduce(a,{})})},t.parseSimulcastStreamList=function(e){return e.split(\";\").map(function(e){return e.split(\",\").map(function(e){var t,n=!1;return\"~\"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}})})}},function(e,t,n){var r=n(72),s=/%[sdv%]/g,i=function(e,t,n){var r=[e+\"=\"+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return function(e){var t=1,n=arguments,r=n.length;return e.replace(s,function(e){if(t>=r)return e;var s=n[t];switch(t+=1,e){case\"%%\":return\"%\";case\"%s\":return String(s);case\"%d\":return Number(s);case\"%v\":return\"\"}})}.apply(null,r)},o=[\"v\",\"o\",\"s\",\"i\",\"u\",\"e\",\"p\",\"c\",\"b\",\"t\",\"r\",\"z\",\"a\"],a=[\"i\",\"c\",\"b\",\"a\"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=\" \"),e.media.forEach(function(e){null==e.payloads&&(e.payloads=\"\")});var n=t.outerOrder||o,s=t.innerOrder||a,u=[];return n.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?u.push(i(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){u.push(i(t,n,e))})})}),e.media.forEach(function(e){u.push(i(\"m\",r.m[0],e)),s.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?u.push(i(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){u.push(i(t,n,e))})})})}),u.join(\"\\r\\n\")+\"\\r\\n\"}},function(e,t,n){e.exports=function(e){function t(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let n;function o(...e){if(!o.enabled)return;const t=o,s=Number(new Date),i=s-(n||s);t.diff=i,t.prev=n,t.curr=s,n=s,e[0]=r.coerce(e[0]),\"string\"!=typeof e[0]&&e.unshift(\"%O\");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,s)=>{if(\"%%\"===n)return n;a++;const i=r.formatters[s];if(\"function\"==typeof i){const r=e[a];n=i.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return o.namespace=e,o.enabled=r.enabled(e),o.useColors=r.useColors(),o.color=t(e),o.destroy=s,o.extend=i,\"function\"==typeof r.init&&r.init(o),r.instances.push(o),o}function s(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?\":\":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\\.\\*\\?$/,\"*\")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>\"-\"+e)].join(\",\");return r.enable(\"\"),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=(\"string\"==typeof e?e:\"\").split(/[\\s,]+/),s=n.length;for(t=0;t<s;t++)n[t]&&(\"-\"===(e=n[t].replace(/\\*/g,\".*?\"))[0]?r.skips.push(new RegExp(\"^\"+e.substr(1)+\"$\")):r.names.push(new RegExp(\"^\"+e+\"$\")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if(\"*\"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(138),Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){var n=1e3,r=60*n,s=60*r,i=24*s,o=7*i,a=365.25*i;function u(e,t,n,r){var s=t>=1.5*n;return Math.round(e/n)+\" \"+r+(s?\"s\":\"\")}e.exports=function(e,t){t=t||{};var l=typeof e;if(\"string\"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var u=parseFloat(t[1]);switch((t[2]||\"ms\").toLowerCase()){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return u*a;case\"weeks\":case\"week\":case\"w\":return u*o;case\"days\":case\"day\":case\"d\":return u*i;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return u*s;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return u*r;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return u*n;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return u;default:return}}(e);if(\"number\"===l&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=i)return u(e,t,i,\"day\");if(t>=s)return u(e,t,s,\"hour\");if(t>=r)return u(e,t,r,\"minute\");if(t>=n)return u(e,t,n,\"second\");return e+\" ms\"}(e):function(e){var t=Math.abs(e);if(t>=i)return Math.round(e/i)+\"d\";if(t>=s)return Math.round(e/s)+\"h\";if(t>=r)return Math.round(e/r)+\"m\";if(t>=n)return Math.round(e/n)+\"s\";return e+\"ms\"}(e);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(e))}},function(e,t,n){\"use strict\";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(2),i=n(0)(\"JsSIP:DigestAuthentication\"),o=n(0)(\"JsSIP:ERROR:DigestAuthentication\");o.log=console.warn.bind(console),e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this._credentials=t,this._cnonce=null,this._nc=0,this._ncHex=\"00000000\",this._algorithm=null,this._realm=null,this._nonce=null,this._opaque=null,this._stale=null,this._qop=null,this._method=null,this._uri=null,this._ha1=null,this._response=null}var t,n,a;return t=e,(n=[{key:\"get\",value:function(e){switch(e){case\"realm\":return this._realm;case\"ha1\":return this._ha1;default:return void o('get() | cannot get \"%s\" parameter',e)}}},{key:\"authenticate\",value:function(e,t){var n=e.method,r=e.ruri,a=e.body,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._algorithm=t.algorithm,this._realm=t.realm,this._nonce=t.nonce,this._opaque=t.opaque,this._stale=t.stale,this._algorithm){if(\"MD5\"!==this._algorithm)return o('authenticate() | challenge with Digest algorithm different than \"MD5\", authentication aborted'),!1}else this._algorithm=\"MD5\";if(!this._nonce)return o(\"authenticate() | challenge without Digest nonce, authentication aborted\"),!1;if(!this._realm)return o(\"authenticate() | challenge without Digest realm, authentication aborted\"),!1;if(!this._credentials.password){if(!this._credentials.ha1)return o(\"authenticate() | no plain SIP password nor ha1 provided, authentication aborted\"),!1;if(this._credentials.realm!==this._realm)return o('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:\"%s\", given:\"%s\"]',this._credentials.realm,this._realm),!1}if(t.qop)if(t.qop.indexOf(\"auth-int\")>-1)this._qop=\"auth-int\";else{if(!(t.qop.indexOf(\"auth\")>-1))return o('authenticate() | challenge without Digest qop different than \"auth\" or \"auth-int\", authentication aborted'),!1;this._qop=\"auth\"}else this._qop=null;this._method=n,this._uri=r,this._cnonce=u||s.createRandomToken(12),this._nc+=1;var l,c,f=Number(this._nc).toString(16);return this._ncHex=\"00000000\".substr(0,8-f.length)+f,4294967296===this._nc&&(this._nc=1,this._ncHex=\"00000001\"),this._credentials.password?this._ha1=s.calculateMD5(\"\".concat(this._credentials.username,\":\").concat(this._realm,\":\").concat(this._credentials.password)):this._ha1=this._credentials.ha1,\"auth\"===this._qop?(l=\"\".concat(this._method,\":\").concat(this._uri),c=s.calculateMD5(l),i('authenticate() | using qop=auth [a2:\"%s\"]',l),this._response=s.calculateMD5(\"\".concat(this._ha1,\":\").concat(this._nonce,\":\").concat(this._ncHex,\":\").concat(this._cnonce,\":auth:\").concat(c))):\"auth-int\"===this._qop?(l=\"\".concat(this._method,\":\").concat(this._uri,\":\").concat(s.calculateMD5(a||\"\")),c=s.calculateMD5(l),i('authenticate() | using qop=auth-int [a2:\"%s\"]',l),this._response=s.calculateMD5(\"\".concat(this._ha1,\":\").concat(this._nonce,\":\").concat(this._ncHex,\":\").concat(this._cnonce,\":auth-int:\").concat(c))):null===this._qop&&(l=\"\".concat(this._method,\":\").concat(this._uri),c=s.calculateMD5(l),i('authenticate() | using qop=null [a2:\"%s\"]',l),this._response=s.calculateMD5(\"\".concat(this._ha1,\":\").concat(this._nonce,\":\").concat(c))),i(\"authenticate() | response generated\"),!0}},{key:\"toString\",value:function(){var e=[];if(!this._response)throw new Error(\"response field does not exist, cannot generate Authorization header\");return e.push(\"algorithm=\".concat(this._algorithm)),e.push('username=\"'.concat(this._credentials.username,'\"')),e.push('realm=\"'.concat(this._realm,'\"')),e.push('nonce=\"'.concat(this._nonce,'\"')),e.push('uri=\"'.concat(this._uri,'\"')),e.push('response=\"'.concat(this._response,'\"')),this._opaque&&e.push('opaque=\"'.concat(this._opaque,'\"')),this._qop&&(e.push(\"qop=\".concat(this._qop)),e.push('cnonce=\"'.concat(this._cnonce,'\"')),e.push(\"nc=\".concat(this._ncHex))),\"Digest \".concat(e.join(\", \"))}}])&&r(t.prototype,n),a&&r(t,a),e}()},function(e,t,n){\"use strict\";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var i=n(13),o=n(1),a=n(23),u=n(141),l=n(2),c=n(0)(\"JsSIP:Dialog\"),f={STATUS_EARLY:1,STATUS_CONFIRMED:2};e.exports=function(){function e(t,n,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.STATUS_CONFIRMED;if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this._owner=t,this._ua=t._ua,this._uac_pending_reply=!1,this._uas_pending_reply=!1,!n.hasHeader(\"contact\"))return{error:\"unable to create a Dialog without Contact header field\"};n instanceof i.IncomingResponse&&(s=n.status_code<200?f.STATUS_EARLY:f.STATUS_CONFIRMED);var o=n.parseHeader(\"contact\");\"UAS\"===r?(this._id={call_id:n.call_id,local_tag:n.to_tag,remote_tag:n.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=s,this._remote_seqnum=n.cseq,this._local_uri=n.parseHeader(\"to\").uri,this._remote_uri=n.parseHeader(\"from\").uri,this._remote_target=o.uri,this._route_set=n.getHeaders(\"record-route\"),this._ack_seqnum=this._remote_seqnum):\"UAC\"===r&&(this._id={call_id:n.call_id,local_tag:n.from_tag,remote_tag:n.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=s,this._local_seqnum=n.cseq,this._local_uri=n.parseHeader(\"from\").uri,this._remote_uri=n.parseHeader(\"to\").uri,this._remote_target=o.uri,this._route_set=n.getHeaders(\"record-route\").reverse(),this._ack_seqnum=null),this._ua.newDialog(this),c(\"new \".concat(r,\" dialog created with status \").concat(this._state===f.STATUS_EARLY?\"EARLY\":\"CONFIRMED\"))}return s(e,null,[{key:\"C\",get:function(){return f}}]),s(e,[{key:\"update\",value:function(e,t){this._state=f.STATUS_CONFIRMED,c(\"dialog \".concat(this._id.toString(),\"  changed to CONFIRMED state\")),\"UAC\"===t&&(this._route_set=e.getHeaders(\"record-route\").reverse())}},{key:\"terminate\",value:function(){c(\"dialog \".concat(this._id.toString(),\" deleted\")),this._ua.destroyDialog(this)}},{key:\"sendRequest\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.cloneArray(n.extraHeaders),s=n.eventHandlers||{},i=n.body||null,o=this._createRequest(e,r,i);s.onAuthenticated=function(){t._local_seqnum+=1};var a=new u(this,o,s);return a.send(),o}},{key:\"receiveRequest\",value:function(e){this._checkInDialogRequest(e)&&(e.method===o.ACK&&null!==this._ack_seqnum?this._ack_seqnum=null:e.method===o.INVITE&&(this._ack_seqnum=e.cseq),this._owner.receiveRequest(e))}},{key:\"_createRequest\",value:function(e,t,n){t=l.cloneArray(t),this._local_seqnum||(this._local_seqnum=Math.floor(1e4*Math.random()));var r=e===o.CANCEL||e===o.ACK?this._local_seqnum:this._local_seqnum+=1;return new i.OutgoingRequest(e,this._remote_target,this._ua,{cseq:r,call_id:this._id.call_id,from_uri:this._local_uri,from_tag:this._id.local_tag,to_uri:this._remote_uri,to_tag:this._id.remote_tag,route_set:this._route_set},t,n)}},{key:\"_checkInDialogRequest\",value:function(e){var t=this;if(this._remote_seqnum)if(e.cseq<this._remote_seqnum){if(e.method!==o.ACK)return e.reply(500),!1;if(null===this._ack_seqnum||e.cseq!==this._ack_seqnum)return!1}else e.cseq>this._remote_seqnum&&(this._remote_seqnum=e.cseq);else this._remote_seqnum=e.cseq;if(e.method===o.INVITE||e.method===o.UPDATE&&e.body){if(!0===this._uac_pending_reply)e.reply(491);else{if(!0===this._uas_pending_reply){var n=1+(10*Math.random()|0);return e.reply(500,null,[\"Retry-After:\".concat(n)]),!1}this._uas_pending_reply=!0;e.server_transaction.on(\"stateChanged\",function n(){e.server_transaction.state!==a.C.STATUS_ACCEPTED&&e.server_transaction.state!==a.C.STATUS_COMPLETED&&e.server_transaction.state!==a.C.STATUS_TERMINATED||(e.server_transaction.removeListener(\"stateChanged\",n),t._uas_pending_reply=!1)})}e.hasHeader(\"contact\")&&e.server_transaction.on(\"stateChanged\",function(){e.server_transaction.state===a.C.STATUS_ACCEPTED&&(t._remote_target=e.parseHeader(\"contact\").uri)})}else e.method===o.NOTIFY&&e.hasHeader(\"contact\")&&e.server_transaction.on(\"stateChanged\",function(){e.server_transaction.state===a.C.STATUS_COMPLETED&&(t._remote_target=e.parseHeader(\"contact\").uri)});return!0}},{key:\"id\",get:function(){return this._id}},{key:\"local_seqnum\",get:function(){return this._local_seqnum},set:function(e){this._local_seqnum=e}},{key:\"owner\",get:function(){return this._owner}},{key:\"uac_pending_reply\",get:function(){return this._uac_pending_reply},set:function(e){this._uac_pending_reply=e}},{key:\"uas_pending_reply\",get:function(){return this._uas_pending_reply}}]),e}()},function(e,t,n){\"use strict\";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(1),i=n(23),o=n(74),a=n(29),u={onRequestTimeout:function(){},onTransportError:function(){},onSuccessResponse:function(){},onErrorResponse:function(){},onAuthenticated:function(){},onDialogError:function(){}};e.exports=function(){function e(t,n,r){for(var s in function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this._dialog=t,this._ua=t._ua,this._request=n,this._eventHandlers=r,this._reattempt=!1,this._reattemptTimer=null,u)Object.prototype.hasOwnProperty.call(u,s)&&(this._eventHandlers[s]||(this._eventHandlers[s]=u[s]))}var t,n,l;return t=e,(n=[{key:\"send\",value:function(){var e=this,t=new a(this._ua,this._request,{onRequestTimeout:function(){e._eventHandlers.onRequestTimeout()},onTransportError:function(){e._eventHandlers.onTransportError()},onAuthenticated:function(t){e._eventHandlers.onAuthenticated(t)},onReceiveResponse:function(t){e._receiveResponse(t)}});if(t.send(),(this._request.method===s.INVITE||this._request.method===s.UPDATE&&this._request.body)&&t.clientTransaction.state!==i.C.STATUS_TERMINATED){this._dialog.uac_pending_reply=!0;t.clientTransaction.on(\"stateChanged\",function n(){t.clientTransaction.state!==i.C.STATUS_ACCEPTED&&t.clientTransaction.state!==i.C.STATUS_COMPLETED&&t.clientTransaction.state!==i.C.STATUS_TERMINATED||(t.clientTransaction.removeListener(\"stateChanged\",n),e._dialog.uac_pending_reply=!1)})}}},{key:\"_receiveResponse\",value:function(e){var t=this;408===e.status_code||481===e.status_code?this._eventHandlers.onDialogError(e):e.method===s.INVITE&&491===e.status_code?this._reattempt?e.status_code>=200&&e.status_code<300?this._eventHandlers.onSuccessResponse(e):e.status_code>=300&&this._eventHandlers.onErrorResponse(e):(this._request.cseq.value=this._dialog.local_seqnum+=1,this._reattemptTimer=setTimeout(function(){t._dialog.owner.status!==o.C.STATUS_TERMINATED&&(t._reattempt=!0,t._request_sender.send())},1e3)):e.status_code>=200&&e.status_code<300?this._eventHandlers.onSuccessResponse(e):e.status_code>=300&&this._eventHandlers.onErrorResponse(e)}},{key:\"request\",get:function(){return this._request}}])&&r(t.prototype,n),l&&r(t,l),e}()},function(e,t,n){\"use strict\";function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||\"object\"!==r(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(12).EventEmitter,l=n(1),c=n(16),f=n(2),h=n(0)(\"JsSIP:RTCSession:DTMF\");n(0)(\"JsSIP:ERROR:RTCSession:DTMF\").log=console.warn.bind(console);var d={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};e.exports=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(n=i(this,o(t).call(this)))._session=e,n._direction=null,n._tone=null,n._duration=null,n._request=null,n}var n,r,p;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,u),n=t,(r=[{key:\"send\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e)throw new TypeError(\"Not enough arguments\");if(this._direction=\"outgoing\",this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new c.InvalidStateError(this._session.status);var r=f.cloneArray(n.extraHeaders);if(this.eventHandlers=n.eventHandlers||{},\"string\"==typeof e)e=e.toUpperCase();else{if(\"number\"!=typeof e)throw new TypeError(\"Invalid tone: \".concat(e));e=e.toString()}if(!e.match(/^[0-9A-DR#*]$/))throw new TypeError(\"Invalid tone: \".concat(e));this._tone=e,this._duration=n.duration,r.push(\"Content-Type: application/dtmf-relay\");var s=\"Signal=\".concat(this._tone,\"\\r\\n\");s+=\"Duration=\".concat(this._duration),this._session.newDTMF({originator:\"local\",dtmf:this,request:this._request}),this._session.sendRequest(l.INFO,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(e){t.emit(\"succeeded\",{originator:\"remote\",response:e})},onErrorResponse:function(e){t.eventHandlers.onFailed&&t.eventHandlers.onFailed(),t.emit(\"failed\",{originator:\"remote\",response:e})},onRequestTimeout:function(){t._session.onRequestTimeout()},onTransportError:function(){t._session.onTransportError()},onDialogError:function(){t._session.onDialogError()}},body:s})}},{key:\"init_incoming\",value:function(e){var t=/^(Signal\\s*?=\\s*?)([0-9A-D#*]{1})(\\s)?.*/,n=/^(Duration\\s?=\\s?)([0-9]{1,4})(\\s)?.*/;if(this._direction=\"incoming\",this._request=e,e.reply(200),e.body){var r=e.body.split(\"\\n\");r.length>=1&&t.test(r[0])&&(this._tone=r[0].replace(t,\"$2\")),r.length>=2&&n.test(r[1])&&(this._duration=parseInt(r[1].replace(n,\"$2\"),10))}this._duration||(this._duration=d.DEFAULT_DURATION),this._tone?this._session.newDTMF({originator:\"remote\",dtmf:this,request:e}):h(\"invalid INFO DTMF received, discarded\")}},{key:\"tone\",get:function(){return this._tone}},{key:\"duration\",get:function(){return this._duration}}])&&s(n.prototype,r),p&&s(n,p),t}(),e.exports.C=d},function(e,t,n){\"use strict\";function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||\"object\"!==r(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(12).EventEmitter;n(0)(\"JsSIP:ERROR:RTCSession:Info\").log=console.warn.bind(console);var l=n(1),c=n(16),f=n(2);e.exports=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(n=i(this,o(t).call(this)))._session=e,n._direction=null,n._contentType=null,n._body=null,n}var n,r,h;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,u),n=t,(r=[{key:\"send\",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._direction=\"outgoing\",void 0===e)throw new TypeError(\"Not enough arguments\");if(this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new c.InvalidStateError(this._session.status);this._contentType=e,this._body=t;var s=f.cloneArray(r.extraHeaders);s.push(\"Content-Type: \".concat(e)),this._session.newInfo({originator:\"local\",info:this,request:this.request}),this._session.sendRequest(l.INFO,{extraHeaders:s,eventHandlers:{onSuccessResponse:function(e){n.emit(\"succeeded\",{originator:\"remote\",response:e})},onErrorResponse:function(e){n.emit(\"failed\",{originator:\"remote\",response:e})},onTransportError:function(){n._session.onTransportError()},onRequestTimeout:function(){n._session.onRequestTimeout()},onDialogError:function(){n._session.onDialogError()}},body:t})}},{key:\"init_incoming\",value:function(e){this._direction=\"incoming\",this.request=e,e.reply(200),this._contentType=e.getHeader(\"content-type\"),this._body=e.body,this._session.newInfo({originator:\"remote\",info:this,request:e})}},{key:\"contentType\",get:function(){return this._contentType}},{key:\"body\",get:function(){return this._body}}])&&s(n.prototype,r),h&&s(n,h),t}()},function(e,t,n){\"use strict\";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(1),i=n(0)(\"JsSIP:RTCSession:ReferNotifier\"),o={event_type:\"refer\",body_type:\"message/sipfrag;version=2.0\",expires:300};e.exports=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this._session=t,this._id=n,this._expires=r||o.expires,this._active=!0,this.notify(100)}var t,n,a;return t=e,(n=[{key:\"notify\",value:function(e,t){var n;(i(\"notify()\"),!1!==this._active)&&(t=t||s.REASON_PHRASE[e]||\"\",n=e>=200?\"terminated;reason=noresource\":\"active;expires=\".concat(this._expires),this._session.sendRequest(s.NOTIFY,{extraHeaders:[\"Event: \".concat(o.event_type,\";id=\").concat(this._id),\"Subscription-State: \".concat(n),\"Content-Type: \".concat(o.body_type)],body:\"SIP/2.0 \".concat(e,\" \").concat(t),eventHandlers:{onErrorResponse:function(){this._active=!1}}}))}}])&&r(t.prototype,n),a&&r(t,a),e}()},function(e,t,n){\"use strict\";function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||\"object\"!==r(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(12).EventEmitter,l=n(1),c=n(6),f=n(2),h=n(0)(\"JsSIP:RTCSession:ReferSubscriber\");e.exports=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(n=i(this,o(t).call(this)))._id=null,n._session=e,n}var n,r,d;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,u),n=t,(r=[{key:\"sendRefer\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(\"sendRefer()\");var r=f.cloneArray(n.extraHeaders),s=n.eventHandlers||{};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&this.on(i,s[i]);var o=null;n.replaces&&(o=n.replaces._request.call_id,o+=\";to-tag=\".concat(n.replaces._to_tag),o+=\";from-tag=\".concat(n.replaces._from_tag),o=encodeURIComponent(o));var a=\"Refer-To: <\".concat(e).concat(o?\"?Replaces=\".concat(o):\"\",\">\");r.push(a),r.push(\"Contact: \".concat(this._session.contact));var u=this._session.sendRequest(l.REFER,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(e){t._requestSucceeded(e)},onErrorResponse:function(e){t._requestFailed(e,l.causes.REJECTED)},onTransportError:function(){t._requestFailed(null,l.causes.CONNECTION_ERROR)},onRequestTimeout:function(){t._requestFailed(null,l.causes.REQUEST_TIMEOUT)},onDialogError:function(){t._requestFailed(null,l.causes.DIALOG_ERROR)}}});this._id=u.cseq}},{key:\"receiveNotify\",value:function(e){if(h(\"receiveNotify()\"),e.body){var t=c.parse(e.body.trim(),\"Status_Line\");if(-1!==t)switch(!0){case/^100$/.test(t.status_code):this.emit(\"trying\",{request:e,status_line:t});break;case/^1[0-9]{2}$/.test(t.status_code):this.emit(\"progress\",{request:e,status_line:t});break;case/^2[0-9]{2}$/.test(t.status_code):this.emit(\"accepted\",{request:e,status_line:t});break;default:this.emit(\"failed\",{request:e,status_line:t})}else h('receiveNotify() | error parsing NOTIFY body: \"'.concat(e.body,'\"'))}}},{key:\"_requestSucceeded\",value:function(e){h(\"REFER succeeded\"),h('emit \"requestSucceeded\"'),this.emit(\"requestSucceeded\",{response:e})}},{key:\"_requestFailed\",value:function(e,t){h(\"REFER failed\"),h('emit \"requestFailed\"'),this.emit(\"requestFailed\",{response:e||null,cause:t})}},{key:\"id\",get:function(){return this._id}}])&&s(n.prototype,r),d&&s(n,d),t}()},function(e,t,n){\"use strict\";function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||\"object\"!==r(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(12).EventEmitter,l=n(1),c=n(13),f=n(2),h=n(29),d=n(16),p=n(0)(\"JsSIP:Message\");e.exports=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(n=i(this,o(t).call(this)))._ua=e,n._request=null,n._closed=!1,n._direction=null,n._local_identity=null,n._remote_identity=null,n._is_replied=!1,n._data={},n}var n,r,_;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,u),n=t,(r=[{key:\"send\",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e;if(void 0===e||void 0===t)throw new TypeError(\"Not enough arguments\");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError(\"Invalid target: \".concat(s));var i=f.cloneArray(r.extraHeaders),o=r.eventHandlers||{},a=r.contentType||\"text/plain\";for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&this.on(u,o[u]);i.push(\"Content-Type: \".concat(a)),this._request=new c.OutgoingRequest(l.MESSAGE,e,this._ua,null,i),t&&(this._request.body=t);var d=new h(this._ua,this._request,{onRequestTimeout:function(){n._onRequestTimeout()},onTransportError:function(){n._onTransportError()},onReceiveResponse:function(e){n._receiveResponse(e)}});this._newMessage(\"local\",this._request),d.send()}},{key:\"init_incoming\",value:function(e){this._request=e,this._newMessage(\"remote\",e),this._is_replied||(this._is_replied=!0,e.reply(200)),this._close()}},{key:\"accept\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=f.cloneArray(e.extraHeaders),n=e.body;if(\"incoming\"!==this._direction)throw new d.NotSupportedError('\"accept\" not supported for outgoing Message');if(this._is_replied)throw new Error(\"incoming Message already replied\");this._is_replied=!0,this._request.reply(200,null,t,n)}},{key:\"reject\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status_code||480,n=e.reason_phrase,r=f.cloneArray(e.extraHeaders),s=e.body;if(\"incoming\"!==this._direction)throw new d.NotSupportedError('\"reject\" not supported for outgoing Message');if(this._is_replied)throw new Error(\"incoming Message already replied\");if(t<300||t>=700)throw new TypeError(\"Invalid status_code: \".concat(t));this._is_replied=!0,this._request.reply(t,n,r,s)}},{key:\"_receiveResponse\",value:function(e){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):this._succeeded(\"remote\",e);break;default:var t=f.sipErrorCause(e.status_code);this._failed(\"remote\",e,t)}}},{key:\"_onRequestTimeout\",value:function(){this._closed||this._failed(\"system\",null,l.causes.REQUEST_TIMEOUT)}},{key:\"_onTransportError\",value:function(){this._closed||this._failed(\"system\",null,l.causes.CONNECTION_ERROR)}},{key:\"_close\",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:\"_newMessage\",value:function(e,t){\"remote\"===e?(this._direction=\"incoming\",this._local_identity=t.to,this._remote_identity=t.from):\"local\"===e&&(this._direction=\"outgoing\",this._local_identity=t.from,this._remote_identity=t.to),this._ua.newMessage(this,{originator:e,message:this,request:t})}},{key:\"_failed\",value:function(e,t,n){p(\"MESSAGE failed\"),this._close(),p('emit \"failed\"'),this.emit(\"failed\",{originator:e,response:t||null,cause:n})}},{key:\"_succeeded\",value:function(e,t){p(\"MESSAGE succeeded\"),this._close(),p('emit \"succeeded\"'),this.emit(\"succeeded\",{originator:e,response:t})}},{key:\"direction\",get:function(){return this._direction}},{key:\"local_identity\",get:function(){return this._local_identity}},{key:\"remote_identity\",get:function(){return this._remote_identity}}])&&s(n.prototype,r),_&&s(n,_),t}()},function(e,t,n){\"use strict\";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(75),i=n(0)(\"JsSIP:Transport\"),o=n(0)(\"JsSIP:ERROR:Transport\");o.log=console.warn.bind(console);var a={STATUS_CONNECTED:0,STATUS_CONNECTING:1,STATUS_DISCONNECTED:2,SOCKET_STATUS_READY:0,SOCKET_STATUS_ERROR:1,recovery_options:{min_interval:2,max_interval:30}};e.exports=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.recovery_options;if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),i(\"new()\"),this.status=a.STATUS_DISCONNECTED,this.socket=null,this.sockets=[],this.recovery_options=n,this.recover_attempts=0,this.recovery_timer=null,this.close_requested=!1,void 0===t)throw new TypeError(\"Invalid argument. undefined 'sockets' argument\");t instanceof Array||(t=[t]),t.forEach(function(e){if(!s.isSocket(e.socket))throw new TypeError(\"Invalid argument. invalid 'JsSIP.Socket' instance\");if(e.weight&&!Number(e.weight))throw new TypeError(\"Invalid argument. 'weight' attribute is not a number\");this.sockets.push({socket:e.socket,weight:e.weight||0,status:a.SOCKET_STATUS_READY})},this),this._getSocket()}var t,n,u;return t=e,(n=[{key:\"connect\",value:function(){i(\"connect()\"),this.isConnected()?i(\"Transport is already connected\"):this.isConnecting()?i(\"Transport is connecting\"):(this.close_requested=!1,this.status=a.STATUS_CONNECTING,this.onconnecting({socket:this.socket,attempts:this.recover_attempts}),this.close_requested||(this.socket.onconnect=this._onConnect.bind(this),this.socket.ondisconnect=this._onDisconnect.bind(this),this.socket.ondata=this._onData.bind(this),this.socket.connect()))}},{key:\"disconnect\",value:function(){i(\"close()\"),this.close_requested=!0,this.recover_attempts=0,this.status=a.STATUS_DISCONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.socket.onconnect=function(){},this.socket.ondisconnect=function(){},this.socket.ondata=function(){},this.socket.disconnect(),this.ondisconnect({socket:this.socket,error:!1})}},{key:\"send\",value:function(e){if(i(\"send()\"),!this.isConnected())return o(\"unable to send message, transport is not connected\"),!1;var t=e.toString();return i(\"sending message:\\n\\n\".concat(t,\"\\n\")),this.socket.send(t)}},{key:\"isConnected\",value:function(){return this.status===a.STATUS_CONNECTED}},{key:\"isConnecting\",value:function(){return this.status===a.STATUS_CONNECTING}},{key:\"_reconnect\",value:function(){var e=this;this.recover_attempts+=1;var t=Math.floor(Math.random()*Math.pow(2,this.recover_attempts)+1);t<this.recovery_options.min_interval?t=this.recovery_options.min_interval:t>this.recovery_options.max_interval&&(t=this.recovery_options.max_interval),i(\"reconnection attempt: \".concat(this.recover_attempts,\". next connection attempt in \").concat(t,\" seconds\")),this.recovery_timer=setTimeout(function(){e.close_requested||e.isConnected()||e.isConnecting()||(e._getSocket(),e.connect())},1e3*t)}},{key:\"_getSocket\",value:function(){var e=[];if(this.sockets.forEach(function(t){t.status!==a.SOCKET_STATUS_ERROR&&(0===e.length?e.push(t):t.weight>e[0].weight?e=[t]:t.weight===e[0].weight&&e.push(t))}),0===e.length)return this.sockets.forEach(function(e){e.status=a.SOCKET_STATUS_READY}),void this._getSocket();var t=Math.floor(Math.random()*e.length);this.socket=e[t].socket}},{key:\"_onConnect\",value:function(){this.recover_attempts=0,this.status=a.STATUS_CONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.onconnect({socket:this})}},{key:\"_onDisconnect\",value:function(e,t,n){this.status=a.STATUS_DISCONNECTED,this.ondisconnect({socket:this.socket,error:e,code:t,reason:n}),this.close_requested||(this.sockets.forEach(function(e){this.socket===e.socket&&(e.status=a.SOCKET_STATUS_ERROR)},this),this._reconnect(e))}},{key:\"_onData\",value:function(e){if(\"\\r\\n\"!==e){if(\"string\"!=typeof e){try{e=String.fromCharCode.apply(null,new Uint8Array(e))}catch(e){return void i(\"received binary message failed to be converted into string, message discarded\")}i(\"received binary message:\\n\\n\".concat(e,\"\\n\"))}else i(\"received text message:\\n\\n\".concat(e,\"\\n\"));this.ondata({transport:this,message:e})}else i(\"received message with CRLF Keep Alive response\")}},{key:\"via_transport\",get:function(){return this.socket.via_transport}},{key:\"url\",get:function(){return this.socket.url}},{key:\"sip_uri\",get:function(){return this.socket.sip_uri}}])&&r(t.prototype,n),u&&r(t,u),e}()},function(e,t,n){\"use strict\";var r=n(6),s=n(13),i=n(0)(\"JsSIP:ERROR:Parser\");function o(e,t){var n=t,r=0,s=0;if(e.substring(n,n+2).match(/(^\\r\\n)/))return-2;for(;0===r;){if(-1===(s=e.indexOf(\"\\r\\n\",n)))return s;!e.substring(s+2,s+4).match(/(^\\r\\n)/)&&e.charAt(s+2).match(/(^\\s+)/)?n=s+2:r=s}return r}function a(e,t,n,i){var o,a=t.indexOf(\":\",n),u=t.substring(n,a).trim(),l=t.substring(a+1,i).trim();switch(u.toLowerCase()){case\"via\":case\"v\":e.addHeader(\"via\",l),1===e.getHeaders(\"via\").length?(o=e.parseHeader(\"Via\"))&&(e.via=o,e.via_branch=o.branch):o=0;break;case\"from\":case\"f\":e.setHeader(\"from\",l),(o=e.parseHeader(\"from\"))&&(e.from=o,e.from_tag=o.getParam(\"tag\"));break;case\"to\":case\"t\":e.setHeader(\"to\",l),(o=e.parseHeader(\"to\"))&&(e.to=o,e.to_tag=o.getParam(\"tag\"));break;case\"record-route\":if(-1===(o=r.parse(l,\"Record_Route\")))o=void 0;else{var c=!0,f=!1,h=void 0;try{for(var d,p=o[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var _=d.value;e.addHeader(\"record-route\",l.substring(_.possition,_.offset)),e.headers[\"Record-Route\"][e.getHeaders(\"record-route\").length-1].parsed=_.parsed}}catch(e){f=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}}break;case\"call-id\":case\"i\":e.setHeader(\"call-id\",l),(o=e.parseHeader(\"call-id\"))&&(e.call_id=l);break;case\"contact\":case\"m\":if(-1===(o=r.parse(l,\"Contact\")))o=void 0;else{var v=!0,m=!1,g=void 0;try{for(var y,S=o[Symbol.iterator]();!(v=(y=S.next()).done);v=!0){var T=y.value;e.addHeader(\"contact\",l.substring(T.possition,T.offset)),e.headers.Contact[e.getHeaders(\"contact\").length-1].parsed=T.parsed}}catch(e){m=!0,g=e}finally{try{v||null==S.return||S.return()}finally{if(m)throw g}}}break;case\"content-length\":case\"l\":e.setHeader(\"content-length\",l),o=e.parseHeader(\"content-length\");break;case\"content-type\":case\"c\":e.setHeader(\"content-type\",l),o=e.parseHeader(\"content-type\");break;case\"cseq\":e.setHeader(\"cseq\",l),(o=e.parseHeader(\"cseq\"))&&(e.cseq=o.value),e instanceof s.IncomingResponse&&(e.method=o.method);break;case\"max-forwards\":e.setHeader(\"max-forwards\",l),o=e.parseHeader(\"max-forwards\");break;case\"www-authenticate\":e.setHeader(\"www-authenticate\",l),o=e.parseHeader(\"www-authenticate\");break;case\"proxy-authenticate\":e.setHeader(\"proxy-authenticate\",l),o=e.parseHeader(\"proxy-authenticate\");break;case\"session-expires\":case\"x\":e.setHeader(\"session-expires\",l),(o=e.parseHeader(\"session-expires\"))&&(e.session_expires=o.expires,e.session_expires_refresher=o.refresher);break;case\"refer-to\":case\"r\":e.setHeader(\"refer-to\",l),(o=e.parseHeader(\"refer-to\"))&&(e.refer_to=o);break;case\"replaces\":e.setHeader(\"replaces\",l),(o=e.parseHeader(\"replaces\"))&&(e.replaces=o);break;case\"event\":case\"o\":e.setHeader(\"event\",l),(o=e.parseHeader(\"event\"))&&(e.event=o);break;default:e.addHeader(u,l),o=0}return void 0!==o||{error:'error parsing header \"'.concat(u,'\"')}}i.log=console.warn.bind(console),t.parseMessage=function(e,t){var n,u,l=e.indexOf(\"\\r\\n\");if(-1!==l){var c=e.substring(0,l),f=r.parse(c,\"Request_Response\");if(-1!==f){f.status_code?((n=new s.IncomingResponse).status_code=f.status_code,n.reason_phrase=f.reason_phrase):((n=new s.IncomingRequest(t)).method=f.method,n.ruri=f.uri),n.data=e;for(var h=l+2;;){if(-2===(l=o(e,h))){u=h+2;break}if(-1===l)return void i(\"parseMessage() | malformed message\");if(!0!==(f=a(n,e,h,l)))return void i(\"parseMessage() |\",f.error);h=l+2}if(n.hasHeader(\"content-length\")){var d=n.getHeader(\"content-length\");n.body=e.substr(u,d)}else n.body=e.substring(u);return n}i('parseMessage() | error parsing first line of SIP message: \"'.concat(c,'\"'))}else i(\"parseMessage() | no CRLF found, not a SIP message\")}},function(e,t,n){\"use strict\";var r,s,i,o=n(1),a=n(13),u=n(2),l=n(0)(\"JsSIP:sanityCheck\"),c=[function(){for(var e=0,t=[\"from\",\"to\",\"call_id\",\"cseq\",\"via\"];e<t.length;e++){var n=t[e];if(!r.hasHeader(n))return l(\"missing mandatory header field : \".concat(n,\", dropping the response\")),!1}}],f=[function(){if(\"sip\"!==r.s(\"to\").uri.scheme)return d(416),!1},function(){if(!r.to_tag&&r.call_id.substr(0,5)===s.configuration.jssip_id)return d(482),!1},function(){var e=u.str_utf8_length(r.body),t=r.getHeader(\"content-length\");if(e<t)return d(400),!1},function(){var e,t=r.from_tag,n=r.call_id,i=r.cseq;if(r.to_tag)return;if(r.method===o.INVITE){if(s._transactions.ist[r.via_branch])return!1;for(var a in s._transactions.ist)if(Object.prototype.hasOwnProperty.call(s._transactions.ist,a)&&(e=s._transactions.ist[a]).request.from_tag===t&&e.request.call_id===n&&e.request.cseq===i)return d(482),!1}else{if(s._transactions.nist[r.via_branch])return!1;for(var u in s._transactions.nist)if(Object.prototype.hasOwnProperty.call(s._transactions.nist,u)&&(e=s._transactions.nist[u]).request.from_tag===t&&e.request.call_id===n&&e.request.cseq===i)return d(482),!1}}],h=[function(){if(r.getHeaders(\"via\").length>1)return l(\"more than one Via header field present in the response, dropping the response\"),!1},function(){var e=u.str_utf8_length(r.body),t=r.getHeader(\"content-length\");if(e<t)return l(\"message body length is lower than the value in Content-Length header field, dropping the response\"),!1}];function d(e){var t,n=r.getHeaders(\"via\"),s=\"SIP/2.0 \".concat(e,\" \").concat(o.REASON_PHRASE[e],\"\\r\\n\"),a=!0,l=!1,c=void 0;try{for(var f,h=n[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var d=f.value;s+=\"Via: \".concat(d,\"\\r\\n\")}}catch(e){l=!0,c=e}finally{try{a||null==h.return||h.return()}finally{if(l)throw c}}t=r.getHeader(\"To\"),r.to_tag||(t+=\";tag=\".concat(u.newTag())),s+=\"To: \".concat(t,\"\\r\\n\"),s+=\"From: \".concat(r.getHeader(\"From\"),\"\\r\\n\"),s+=\"Call-ID: \".concat(r.call_id,\"\\r\\n\"),s+=\"CSeq: \".concat(r.cseq,\" \").concat(r.method,\"\\r\\n\"),s+=\"\\r\\n\",i.send(s)}e.exports=function(e,t,n){r=e,s=t,i=n;for(var o=0,u=c;o<u.length;o++){if(!1===(0,u[o])())return!1}if(r instanceof a.IncomingRequest)for(var l=0,d=f;l<d.length;l++){if(!1===(0,d[l])())return!1}else if(r instanceof a.IncomingResponse)for(var p=0,_=h;p<_.length;p++){if(!1===(0,_[p])())return!1}return!0}},function(e,t,n){\"use strict\";var r=n(2),s=n(1),i=n(6),o=n(17),a=n(75),u=n(16);t.settings={authorization_user:null,password:null,realm:null,ha1:null,display_name:null,uri:null,contact_uri:null,instance_id:null,use_preloaded_route:!1,session_timers:!0,session_timers_refresh_method:s.UPDATE,no_answer_timeout:60,register:!0,register_expires:600,registrar_server:null,sockets:null,connection_recovery_max_interval:null,connection_recovery_min_interval:null,via_host:\"\".concat(r.createRandomToken(12),\".invalid\")};var l={mandatory:{sockets:function(e){var t=[];if(a.isSocket(e))t.push({socket:e});else{if(!Array.isArray(e)||!e.length)return;var n=!0,r=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value;Object.prototype.hasOwnProperty.call(u,\"socket\")&&a.isSocket(u.socket)?t.push(u):a.isSocket(u)&&t.push({socket:u})}}catch(e){r=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}}return t},uri:function(e){/^sip:/i.test(e)||(e=\"\".concat(s.SIP,\":\").concat(e));var t=o.parse(e);return t&&t.user?t:void 0}},optional:{authorization_user:function(e){return-1===i.parse('\"'.concat(e,'\"'),\"quoted_string\")?void 0:e},user_agent:function(e){if(\"string\"==typeof e)return e},connection_recovery_max_interval:function(e){if(r.isDecimal(e)){var t=Number(e);if(t>0)return t}},connection_recovery_min_interval:function(e){if(r.isDecimal(e)){var t=Number(e);if(t>0)return t}},contact_uri:function(e){if(\"string\"==typeof e){var t=i.parse(e,\"SIP_URI\");if(-1!==t)return t}},display_name:function(e){return e},instance_id:function(e){return/^uuid:/i.test(e)&&(e=e.substr(5)),-1===i.parse(e,\"uuid\")?void 0:e},no_answer_timeout:function(e){if(r.isDecimal(e)){var t=Number(e);if(t>0)return t}},session_timers:function(e){if(\"boolean\"==typeof e)return e},session_timers_refresh_method:function(e){if(\"string\"==typeof e&&((e=e.toUpperCase())===s.INVITE||e===s.UPDATE))return e},password:function(e){return String(e)},realm:function(e){return String(e)},ha1:function(e){return String(e)},register:function(e){if(\"boolean\"==typeof e)return e},register_expires:function(e){if(r.isDecimal(e)){var t=Number(e);if(t>0)return t}},registrar_server:function(e){/^sip:/i.test(e)||(e=\"\".concat(s.SIP,\":\").concat(e));var t=o.parse(e);return t?t.user?void 0:t:void 0},use_preloaded_route:function(e){if(\"boolean\"==typeof e)return e}}};t.load=function(e,t){for(var n in l.mandatory){if(!t.hasOwnProperty(n))throw new u.ConfigurationError(n);var s=t[n],i=l.mandatory[n](s);if(void 0===i)throw new u.ConfigurationError(n,s);e[n]=i}for(var o in l.optional)if(t.hasOwnProperty(o)){var a=t[o];if(r.isEmpty(a))continue;var c=l.optional[o](a);if(void 0===c)throw new u.ConfigurationError(o,a);e[o]=c}}},function(e,t,n){\"use strict\";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(6),i=n(0)(\"JsSIP:WebSocketInterface\"),o=n(0)(\"JsSIP:ERROR:WebSocketInterface\");o.log=console.warn.bind(console),e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),i('new() [url:\"%s\"]',t),this._url=t,this._sip_uri=null,this._via_transport=null,this._ws=null;var n=s.parse(t,\"absoluteURI\");if(-1===n)throw o(\"invalid WebSocket URI: \".concat(t)),new TypeError(\"Invalid argument: \".concat(t));if(\"wss\"!==n.scheme&&\"ws\"!==n.scheme)throw o(\"invalid WebSocket URI scheme: \".concat(n.scheme)),new TypeError(\"Invalid argument: \".concat(t));this._sip_uri=\"sip:\".concat(n.host).concat(n.port?\":\".concat(n.port):\"\",\";transport=ws\"),this._via_transport=n.scheme.toUpperCase()}var t,n,a;return t=e,(n=[{key:\"connect\",value:function(){if(i(\"connect()\"),this.isConnected())i(\"WebSocket \".concat(this._url,\" is already connected\"));else if(this.isConnecting())i(\"WebSocket \".concat(this._url,\" is connecting\"));else{this._ws&&this.disconnect(),i(\"connecting to WebSocket \".concat(this._url));try{this._ws=new WebSocket(this._url,\"sip\"),this._ws.binaryType=\"arraybuffer\",this._ws.onopen=this._onOpen.bind(this),this._ws.onclose=this._onClose.bind(this),this._ws.onmessage=this._onMessage.bind(this),this._ws.onerror=this._onError.bind(this)}catch(e){this._onError(e)}}}},{key:\"disconnect\",value:function(){i(\"disconnect()\"),this._ws&&(this._ws.onopen=function(){},this._ws.onclose=function(){},this._ws.onmessage=function(){},this._ws.onerror=function(){},this._ws.close(),this._ws=null)}},{key:\"send\",value:function(e){return i(\"send()\"),this.isConnected()?(this._ws.send(e),!0):(o(\"unable to send message, WebSocket is not open\"),!1)}},{key:\"isConnected\",value:function(){return this._ws&&this._ws.readyState===this._ws.OPEN}},{key:\"isConnecting\",value:function(){return this._ws&&this._ws.readyState===this._ws.CONNECTING}},{key:\"_onOpen\",value:function(){i(\"WebSocket \".concat(this._url,\" connected\")),this.onconnect()}},{key:\"_onClose\",value:function(e){var t=e.wasClean,n=e.code,r=e.reason;i(\"WebSocket \".concat(this._url,\" closed\")),!1===t&&i(\"WebSocket abrupt disconnection\");var s={socket:this,error:!t,code:n,reason:r};this.ondisconnect(s)}},{key:\"_onMessage\",value:function(e){var t=e.data;i(\"received WebSocket message\"),this.ondata(t)}},{key:\"_onError\",value:function(e){o(\"WebSocket \".concat(this._url,\" error: \").concat(e))}},{key:\"via_transport\",get:function(){return this._via_transport},set:function(e){this._via_transport=e.toUpperCase()}},{key:\"sip_uri\",get:function(){return this._sip_uri}},{key:\"url\",get:function(){return this._url}}])&&r(t.prototype,n),a&&r(t,a),e}()},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r,s=n(48);var i=new((r=s)&&r.__esModule?r:{default:r}).default(\"xml2json\");function o(e){var t=null;if(!window.DOMParser)return null;try{t=(new DOMParser).parseFromString(e,\"text/xml\")}catch(e){i.error(e)}return t}t.default={xmlToJs:function(e){var t=[\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"k\",\"o\",\"i\",\"m\",\"n\",\"p\",\"r\",\"s\",\"t\",\"q\",\"v\",\"z\",\"l\",\"u\",\"nm\"],n={},r=!0,s=!1,i=void 0;try{for(var a,u=[\"cc\",\"o\",\"mn\",\"i\"][Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;if(o(e).getElementsByTagName(l).length){var c=o(e).firstChild,f={};if(t.map(function(e){c.getAttribute(e)&&(f[e]=c.getAttribute(e))}),n[l]=f,o(e).firstChild.childNodes.length>0){var h=o(e).firstChild,d=[],p=!0,_=!1,v=void 0;try{for(var m,g=h.children[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var y=m.value,S={};if(t.map(function(e){y.getAttribute(e)&&(S[e]=y.getAttribute(e))}),d.push(S),n[l][o(e).firstChild.children[0].tagName]=d,h.children[0].children.length>0){var T=[],b=!0,C=!1,E=void 0;try{for(var A,w=h.children[0].children[Symbol.iterator]();!(b=(A=w.next()).done);b=!0){f=A.value;var R={};t.map(function(e){f.getAttribute(e)&&(R[e]=f.getAttribute(e))}),T.push(R),n[l][o(e).firstChild.children[0].tagName][h.children[0].children[0].tagName]=T}}catch(e){C=!0,E=e}finally{try{!b&&w.return&&w.return()}finally{if(C)throw E}}}}}catch(e){_=!0,v=e}finally{try{!p&&g.return&&g.return()}finally{if(_)throw v}}}}}}catch(e){s=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(s)throw i}}return n},jsToXml:function(e,t){var n=o(\"<\"+t+\"/>\").getElementsByTagName(t)[0];for(var r in e)n.setAttribute(r,e[r]);return'<?xml version=\"1.0\" encoding=\"utf-8\"?>'+function(e){var t=document.createElement(\"div\");t.appendChild(e);var n=t.innerHTML;return t=e=null,n}(n)}}},function(e,t,n){\"use strict\";var r,s,i,o,a,u,l,c,f=E(n(30)),h=E(n(31)),d=(r=(0,h.default)(f.default.mark(function e(t,n,r,s,i){var o,a,u,l,c,h,d,_,v,m,T,C,E;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!=t&&null!=n&&null!=r&&null!=s&&(4!=Number(s)&&5!=Number(s)||null!=i)){e.next=3;break}throw{status:50001,info:\",\",step:\"checkParam\"};case 3:return e.next=5,p(r);case 5:if(null!=(o=e.sent)&&0!=o.length){e.next=8;break}throw{status:50002,info:\"\",step:\"getESserver\"};case 8:return a=b.default.hash(n),u=Math.random().toString().split(\".\")[1].substr(0,8),l=Math.random().toString().split(\".\")[1].substr(0,6),c={pwd:a,clearPwd:u+n+l,switchNumber:r,callintype:s,oldCallType:s},4==Number(s)&&(c.phoneNumber=i.startsWith(\"A\")&&i.endsWith(\"Z\")?i.slice(1,i.length-1):i),5==Number(s)&&(c.sipNumber=i),(h=localStorage.getItem(\"userData\"))?localStorage.setItem(\"userData\",JSON.stringify(Object.assign(JSON.parse(h),c))):localStorage.setItem(\"userData\",JSON.stringify(c)),e.next=18,g(t,n,r,o);case 18:if(200==(d=e.sent).status){e.next=21;break}throw d;case 21:return _={un:t,pwd:n,eid:d.data.eid},e.next=24,S(\"getEpProfile\",_);case 24:if(200==(v=e.sent).status){e.next=27;break}throw v;case 27:return e.next=29,S(\"getMemberInfo\",_);case 29:if(200==(m=e.sent).status){e.next=32;break}throw m;case 32:if(4!=Number(s)||(i.startsWith(\"A\")&&i.endsWith(\"Z\")||JSON.parse(localStorage.userData).epInfo.terminal_need_reg&&0==Number(JSON.parse(localStorage.userData).epInfo.terminal_need_reg))){e.next=38;break}return e.next=35,y({mobile:i,eid:d.data.eid});case 35:if(200==(T=e.sent).status){e.next=38;break}throw T;case 38:return C={callintype:s},4==Number(s)&&(C.telephone=i.startsWith(\"A\")&&i.endsWith(\"Z\")?i.slice(1,i.length-1):i),5==Number(s)&&(C.sip_telephone=i),_.jsonStr=JSON.stringify({data:C}),e.next=44,S(\"updateInfo\",_);case 44:if(200==(E=e.sent).status){e.next=47;break}throw E;case 47:return e.abrupt(\"return\",{status:200,info:\"\",serverInfo:d.data,epInfo:v,memberInfo:m.returnData});case 50:return e.prev=50,e.t0=e.catch(0),A.error(\" \"+e.t0),e.abrupt(\"return\",e.t0);case 54:case\"end\":return e.stop()}},e,this,[[0,50]])})),function(e,t,n,s,i){return r.apply(this,arguments)}),p=(s=(0,h.default)(f.default.mark(function e(t){var r,s,i,o,a,u,l,c,h,d,p,v,g,y,S,T;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(154),s=\"\",i=r.TestDistricts,o=r.CurDistricts,a=0;case 5:if(!(a<i.length)){e.next=13;break}if(!i[a].switchNumbers||-1===i[a].switchNumbers.split(\",\").indexOf(t)){e.next=10;break}return s=i[a].uniServer,A.debug(t+\"  \"+s),e.abrupt(\"return\",s);case 10:a++,e.next=5;break;case 13:a=0;case 14:if(!(a<o.length)){e.next=47;break}u=o[a].areaCode.split(\",\"),l=!0,c=!1,h=void 0,e.prev=19,d=u[Symbol.iterator]();case 21:if(l=(p=d.next()).done){e.next=30;break}if(v=p.value,!t.startsWith(v)){e.next=27;break}return s=o[a].uniServer,A.debug(t+\"  \"+s),e.abrupt(\"return\",s);case 27:l=!0,e.next=21;break;case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(19),c=!0,h=e.t0;case 36:e.prev=36,e.prev=37,!l&&d.return&&d.return();case 39:if(e.prev=39,!c){e.next=42;break}throw h;case 42:return e.finish(39);case 43:return e.finish(36);case 44:a++,e.next=14;break;case 47:if(s){e.next=69;break}return e.next=50,_(t);case 50:if(200==(g=e.sent).status){e.next=53;break}throw g;case 53:return y=g.data,e.next=56,m();case 56:if(200==(S=e.sent).status){e.next=59;break}throw S;case 59:T=S.data,a=0;case 61:if(!(a<T.length)){e.next=69;break}if(!y.startsWith(T[a].province)){e.next=66;break}return s=T[a].s_client_domain,A.debug(t+\"  \"+s),e.abrupt(\"return\",s);case 66:a++,e.next=61;break;case 69:case\"end\":return e.stop()}},e,this,[[19,32,36,44],[37,,39,43]])})),function(e){return s.apply(this,arguments)}),_=(i=(0,h.default)(f.default.mark(function e(t){var n,r,s,i,o,a,u;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.default.queryAreaCode.apiKey,r=t.substr(0,4),e.prev=2,s=new URL(\"https://api.apishop.net/common/postcode/queryAddrByAreaCode\"),i={apiKey:n,areaCode:r},s.search=new URLSearchParams(i),A.debug(\"await fetch \"+s),e.next=9,fetch(s);case 9:return o=e.sent,e.next=12,o.json();case 12:if(\"000000\"===(a=e.sent).statusCode&&0!=a.result.length){e.next=15;break}return e.abrupt(\"return\",{status:50002,info:a.desc,step:\"queryAddrByAreaCode\"});case 15:return u=a.result[0].province,A.debug(\" await fetch \"+u),e.abrupt(\"return\",{status:200,info:\"\",data:u});case 20:return e.prev=20,e.t0=e.catch(2),A.error(\"AreaCode\"+e.t0),e.abrupt(\"return\",{status:5e4,info:e.t0,step:\"queryAddrByAreaCode\"});case 24:case\"end\":return e.stop()}},e,this,[[2,20]])})),function(e){return i.apply(this,arguments)}),v=(o=(0,h.default)(f.default.mark(function e(t){var n,r,s,i;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new URL(\"http://\"+C.default.superServerInfo.host+\":\"+C.default.superServerInfo.port+\"/Api/Client/getSignKey\"),t.sign=b.default.hash(t.v+t.t+t.salt+C.default.signKey.key),n.search=new URLSearchParams(t),A.debug(\"await fetch \"+n),e.next=7,fetch(n);case 7:return r=e.sent,e.next=10,r.json();case 10:if(s=e.sent,0===Number(s.status)){e.next=13;break}return e.abrupt(\"return\",{status:50002,info:s.info,step:\"getSignKey\"});case 13:return i=s.data,e.abrupt(\"return\",{status:200,info:\"\",data:i});case 17:return e.prev=17,e.t0=e.catch(0),A.error(\"SignKey\"+e.t0),e.abrupt(\"return\",{status:5e4,info:e.t0,step:\"getSignKey\"});case 21:case\"end\":return e.stop()}},e,this,[[0,17]])})),function(e){return o.apply(this,arguments)}),m=(a=(0,h.default)(f.default.mark(function e(){var t,n,r,s,i,o;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={v:C.default.signKey.version,t:Date.now(),salt:Math.random().toString().split(\".\")[1].substr(0,6)},e.next=4,v(t);case 4:if(200==(n=e.sent).status){e.next=7;break}return e.abrupt(\"return\",n);case 7:return r=n.data,s=new URL(\"http://\"+C.default.superServerInfo.host+\":\"+C.default.superServerInfo.port+\"/Api/Client/getMtServerList\"),t.sign=b.default.hash(t.v+t.t+r+b.default.hash(t.salt)),s.search=new URLSearchParams(t),A.debug(\"await fetch \"+s),e.next=14,fetch(s);case 14:return i=e.sent,e.next=17,i.json();case 17:if(o=e.sent,0===Number(o.status)){e.next=20;break}return e.abrupt(\"return\",{status:50002,info:o.info,step:\"loadServer\"});case 20:return n=o.data,e.abrupt(\"return\",{status:200,info:\"\",data:n});case 24:return e.prev=24,e.t0=e.catch(0),A.error(\"serverList\"+e.t0),e.abrupt(\"return\",{status:5e4,info:e.t0,step:\"loadServer\"});case 28:case\"end\":return e.stop()}},e,this,[[0,24]])})),function(){return a.apply(this,arguments)}),g=(u=(0,h.default)(f.default.mark(function e(t,n,r,s){var i,o,a,u,l,c,h,d;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=new URL(\"https://\"+s+\":1047/Api/Client/getinfo\"),o=JSON.parse(localStorage.getItem(\"userData\"))||{},a={un:t,pwd:o&&null!==o.pwd&&void 0!==o.pwd?o.pwd:b.default.hash(n),switchNumber:r,cFlag:1},i.search=new URLSearchParams(a),A.debug(\"await fetch \"+i),e.next=8,fetch(i);case 8:return u=e.sent,e.next=11,u.json();case 11:if(l=e.sent,0===Number(l.status)){e.next=20;break}if(4!=Number(l.status)&&7!=Number(l.status)&&8!=Number(l.status)){e.next=15;break}return e.abrupt(\"return\",{status:50003,info:l.info,step:\"getinfo\"});case 15:if(3!=Number(l.status)&&6!=Number(l.status)){e.next=19;break}return e.abrupt(\"return\",{status:50004,info:l.info,step:\"getinfo\"});case 19:return e.abrupt(\"return\",{status:5e4,info:l.info,step:\"getinfo\"});case 20:return o.server=l.data.real_domain,o.serverIp=l.data.domain,o.eid=l.data.eid,o.sipPort=l.data.port,o.http_port=l.data.http_port,o.https_port=l.data.https_port,c=Number(l.data.eid).toString(16),h=(h=\"00000000\"+c).substr(c.length,h.length),o.eid16=h,localStorage.setItem(\"userData\",JSON.stringify(o)),d={domain:l.data.domain,sipPort:l.data.port,real_domain:l.data.real_domain,http_port:l.data.http_port,https_port:l.data.https_port,epName:l.data.epName,eid:l.data.eid},A.debug(\"getinfo:\"+JSON.stringify(d)),e.abrupt(\"return\",{status:200,info:\"\",data:d});case 36:return e.prev=36,e.t0=e.catch(0),A.error(\"getInfo\"+e.t0),e.abrupt(\"return\",{status:5e4,info:e.t0,step:\"getinfo\"});case 40:case\"end\":return e.stop()}},e,this,[[0,36]])})),function(e,t,n,r){return u.apply(this,arguments)}),y=(l=(0,h.default)(f.default.mark(function e(t){var n,r,s,i;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=JSON.parse(localStorage.userData),(r=new URL(\"https://\"+n.server+\"/Talk/Mapi/checkRegisterStatus\")).search=new URLSearchParams(t),A.debug(\"await fetch \"+r),e.next=7,fetch(r);case 7:return s=e.sent,e.next=10,s.json();case 10:if(i=e.sent,0===Number(i.status)){e.next=13;break}return e.abrupt(\"return\",{status:50006,info:i.info,step:\"checkRegisterStatus\"});case 13:return A.debug(\"checkRegisterStatus:\"+JSON.stringify(i)),e.abrupt(\"return\",{status:200,info:\"\"});case 17:return e.prev=17,e.t0=e.catch(0),A.error(\"checkRegisterStatus\"+e.t0),e.abrupt(\"return\",{status:5e4,info:e.t0,step:\"checkRegisterStatus\"});case 21:case\"end\":return e.stop()}},e,this,[[0,17]])})),function(e){return l.apply(this,arguments)}),S=(c=(0,h.default)(f.default.mark(function e(t,n){var r,s,i,o,a,u,l,c,h,d,p,_,v,m,g,y;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=JSON.parse(localStorage.userData),s=r.server,i=r.https_port,o=\"https://\"+s+\":\"+i+\"/Talk/Api/\",n.pwd=r&&null!==r.pwd&&void 0!==r.pwd?r.pwd:b.default.hash(n.pwd),(a=new URL(o+t)).search=new URLSearchParams(n),A.debug(t+\" await fetch \"+a),A.debug(t+\" param \"+JSON.stringify(n)),e.next=12,fetch(a);case 12:return u=e.sent,e.next=15,u.json();case 15:l=e.sent,c={},e.t0=t,e.next=\"getEpProfile\"===e.t0?20:\"getMemberInfo\"===e.t0?28:\"updateInfo\"===e.t0?38:\"getGroups\"===e.t0?43:\"searchEpMembers\"===e.t0?49:\"getMemberCallStates\"===e.t0?55:60;break;case 20:if(0===Number(l.status)){e.next=22;break}return e.abrupt(\"return\",{status:50005,info:l.info,step:t});case 22:return h=l.data.epProfile,c={dialing_display_set:h.dialing_display_set,incoming_call_remind:h.incoming_call_remind,outcallenterprisenumber:h.outcallenterprisenumber,switch_number_public_set_mode:h.switch_number_public_set_mode,switch_number_default:h.switch_number_default,allow_customer_manager:h.allow_customer_manager,allow_callcenter:h.allow_callcenter,allow_auto_answer:h.allow_auto_answer,auto_answer_duration:h.auto_answer_duration,terminal_need_reg:h.terminal_need_reg,allow_hide_number:h.allow_hide_number,allow_worksheet:h.allow_worksheet,allow_monitor:h.allow_monitor,extension_end:h.extension_end,extension_start:h.extension_start,allow_record_manager:h.allow_record_manager},d={allow_auto_answer:h.allow_auto_answer,auto_answer_duration:h.auto_answer_duration,terminal_need_reg:h.terminal_need_reg,extension_end:h.extension_end,extension_start:h.extension_start},r.epInfo=d,localStorage.setItem(\"userData\",JSON.stringify(r)),e.abrupt(\"break\",61);case 28:if(0===Number(l.status)){e.next=30;break}return e.abrupt(\"return\",{status:50005,info:l.info,step:t});case 30:return h=l.data,p=h.inGroups.map(function(e){return{id:e.id,eid:e.eid,name:e.name}}),r.groupInfo=p,_={id:h.id,eid:h.eid,uid:h.uid,displayname:h.displayname,number:h.number,work_number:h.work_number,duty:h.duty,mobile:h.mobile,outside_callnumber:h.outside_callnumber,address:h.address,permission:h.permission,call_limit:h.call_limit,time_limit:h.time_limit,cur_limit_time:h.cur_limit_time},r.userInfo=_,localStorage.setItem(\"userData\",JSON.stringify(r)),c={userData:_,inGroups:p},e.abrupt(\"break\",61);case 38:if(0===Number(l.status)){e.next=40;break}return e.abrupt(\"return\",{status:50005,info:l.info,step:t});case 40:return A.debug(t+JSON.stringify(l)),c=l,e.abrupt(\"break\",61);case 43:if(0===Number(l.status)){e.next=45;break}return e.abrupt(\"return\",{status:50008,info:l.info,step:t});case 45:return v=l.data,p=v.map(function(e){return{id:e.id,eid:e.eid,name:e.name}}),c=p,e.abrupt(\"break\",61);case 49:if(0===Number(l.status)){e.next=51;break}return e.abrupt(\"return\",{status:50009,info:l.info,step:t});case 51:return m=l.data.data,g=m.map(function(e){return{id:e.eid,eid:e.eid,uid:e.uid,displayname:e.displayname,number:e.number,mobile:e.mobile,telephone:e.telephone,pinyin:e.pinyin,outside_callnumber:e.outside_callnumber,address:e.address,gids:e.gids,gName:e.gName,service_callmode:e.service_callmode,service_control_time:e.service_control_time,service_control:e.service_control}}),c={recordsTotal:l.data.recordsTotal,recordsFiltered:l.data.recordsFiltered,data:g},e.abrupt(\"break\",61);case 55:if(0===Number(l.status)){e.next=57;break}return e.abrupt(\"return\",{status:50010,info:l.info,step:t});case 57:return y=l.data.filter(function(e){return e.uid==n.uid}),c=y,e.abrupt(\"break\",61);case 60:return e.abrupt(\"return\",{status:50007,info:\"\"});case 61:return A.debug(t+JSON.stringify(c)),e.abrupt(\"return\",{status:200,info:\"\",returnData:c});case 65:return e.prev=65,e.t1=e.catch(0),A.error(t+e.t1),e.abrupt(\"return\",{status:5e4,info:e.t1,step:t});case 69:case\"end\":return e.stop()}},e,this,[[0,65]])})),function(e,t){return c.apply(this,arguments)}),T=E(n(48)),b=E(n(155)),C=E(n(49));function E(e){return e&&e.__esModule?e:{default:e}}var A=new T.default(\"getLoginInfo\");e.exports={getLoginData:d,webApiHandler:S,_loadServerFromJson:p,_getInfo:g,_queryAddrByAreaCode:_,_loadServer:m}},function(e){e.exports=JSON.parse('{\"version\":\"1.0\",\"TestDistricts\":[{\"name\":\"\",\"uniServer\":\"cses.emic.com.cn\",\"Ip\":\"112.80.5.131\",\"switchNumbers\":\"02566699703\"},{\"name\":\"159-\",\"uniServer\":\"kfyw.emic.com.cn\",\"Ip\":\"112.80.5.155\",\"switchNumbers\":\"02566699741,02566699794,02566687971,02566687961,02566687313,02566687960,02566687301,02566699792,02566699734,02566687970,02566699746,02566699794,02566687335\"}],\"CurDistricts\":[{\"areaCode\":\"025,0510,0511,0512,0513,0514,0515,0516,0517,0518,0519,0523,0527\",\"name\":\"\",\"uniServer\":\"js.emic.com.cn\"},{\"areaCode\":\"010\",\"name\":\"\",\"uniServer\":\"bj.emic.com.cn\"},{\"areaCode\":\"0770,0771,0772,0773,0774,0775,0776,0777,0778,0779\",\"name\":\"\",\"uniServer\":\"emic.gx10010.com\"},{\"areaCode\":\"0730,0731,0734,0735,0736,0737,0738,0739,0743,0744,0745,0746\",\"name\":\"\",\"uniServer\":\"hn.emic.com.cn\"},{\"areaCode\":\"0570,0571,0572,0573,0574,0575,0576,0577,0578,0579,0580\",\"name\":\"\",\"uniServer\":\"zj.emic.com.cn\"},{\"areaCode\":\"0591,0592,0593,0594,0595,0596,0597,0598,0599\",\"name\":\"\",\"uniServer\":\"fj.emic.com.cn\"},{\"areaCode\":\"0310,0311,0312,0313,0314,0315,0316,0317,0318,0319,0335\",\"name\":\"\",\"uniServer\":\"www.woyzj.com\"},{\"areaCode\":\"0550,0551,0552,0553,0554,0555,0556,0557,0558,0559,0561,0562,0563,0564,0566\",\"name\":\"\",\"uniServer\":\"ah.emic.com.cn\"},{\"areaCode\":\"021\",\"name\":\"\",\"uniServer\":\"sh.emic.com.cn\"},{\"areaCode\":\"0891,0892,0893,0894,0895,0896,0897\",\"name\":\"\",\"uniServer\":\"xz.emic.com.cn\"},{\"areaCode\":\"029,0911,0912,0913,0914,0915,0916,0917,0919\",\"name\":\"\",\"uniServer\":\"sn.emic.com.cn\"},{\"areaCode\":\"0701,0790,0791,0792,0793,0794,0795,0796,0797,0798,0799\",\"name\":\"\",\"uniServer\":\"jx.emic.com.cn\"},{\"areaCode\":\"0370,0371,0372,0373,0374,0375,0376,0377,0379,0391,0392,0393,0394,0395,0396,0398\",\"name\":\"\",\"uniServer\":\"yzj.online.ha.cn\"},{\"areaCode\":\"022\",\"name\":\"\",\"uniServer\":\"yzj.tjunicom.com\"},{\"areaCode\":\"0851,0852,0853,0854,0855,0856,0857,0858,0859\",\"name\":\"\",\"uniServer\":\"gz.emic.com.cn\"},{\"areaCode\":\"020,0660,0662,0663,0668,0750,0751,0752,0753,0754,0755,0756,0757,0758,0759,0760,0762,0763,0766,0768,0769\",\"name\":\"\",\"uniServer\":\"gd.emic.com.cn\"},{\"areaCode\":\"0691,0692,0870,0871,0872,0873,0874,0875,0876,0877,0878,0879,0883,0886,0887,0888\",\"name\":\"\",\"uniServer\":\"yn.emic.com.cn\"},{\"areaCode\":\"023\",\"name\":\"\",\"uniServer\":\"cq.emic.com.cn\"},{\"areaCode\":\"028,0812,0813,0816,0817,0818,0825,0826,0827,0830,0831,0832,0833,0834,0835,0836,0837,0838,0839\",\"name\":\"\",\"uniServer\":\"sc.emic.com.cn\"},{\"areaCode\":\"0349,0350,0351,0352,0353,0354,0355,0356,0357,0358,0359\",\"name\":\"\",\"uniServer\":\"sx.emic.com.cn\"},{\"areaCode\":\"024,0411,0412,0415,0416,0417,0418,0419,0421,0427,0429\",\"name\":\"\",\"uniServer\":\"ln.emic.com.cn\"},{\"areaCode\":\"0930,0931,0932,0933,0934,0935,0936,0937,0938,0939,0941,0943\",\"name\":\"\",\"uniServer\":\"gs.emic.com.cn\"},{\"areaCode\":\"0530,0531,0532,0533,0534,0535,0536,0537,0538,0539,0543,0546,0631,0632,0633,0634,0635\",\"name\":\"\",\"uniServer\":\"sd.emic.com.cn\"},{\"areaCode\":\"027,0710,0711,0712,0713,0714,0715,0716,0717,0718,0719,0722,0724\",\"name\":\"\",\"uniServer\":\"hub.emic.com.cn\"},{\"areaCode\":\"0898\",\"name\":\"\",\"uniServer\":\"han.emicloud.com\"}]}')},function(e,t,n){e.exports=function(e){\"use strict\";var t=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\"];function n(e,t){var n=e[0],r=e[1],s=e[2],i=e[3];n+=(r&s|~r&i)+t[0]-680876936|0,i+=((n=(n<<7|n>>>25)+r|0)&r|~n&s)+t[1]-389564586|0,s+=((i=(i<<12|i>>>20)+n|0)&n|~i&r)+t[2]+606105819|0,r+=((s=(s<<17|s>>>15)+i|0)&i|~s&n)+t[3]-1044525330|0,n+=((r=(r<<22|r>>>10)+s|0)&s|~r&i)+t[4]-176418897|0,i+=((n=(n<<7|n>>>25)+r|0)&r|~n&s)+t[5]+1200080426|0,s+=((i=(i<<12|i>>>20)+n|0)&n|~i&r)+t[6]-1473231341|0,r+=((s=(s<<17|s>>>15)+i|0)&i|~s&n)+t[7]-45705983|0,n+=((r=(r<<22|r>>>10)+s|0)&s|~r&i)+t[8]+1770035416|0,i+=((n=(n<<7|n>>>25)+r|0)&r|~n&s)+t[9]-1958414417|0,s+=((i=(i<<12|i>>>20)+n|0)&n|~i&r)+t[10]-42063|0,r+=((s=(s<<17|s>>>15)+i|0)&i|~s&n)+t[11]-1990404162|0,n+=((r=(r<<22|r>>>10)+s|0)&s|~r&i)+t[12]+1804603682|0,i+=((n=(n<<7|n>>>25)+r|0)&r|~n&s)+t[13]-40341101|0,s+=((i=(i<<12|i>>>20)+n|0)&n|~i&r)+t[14]-1502002290|0,r+=((s=(s<<17|s>>>15)+i|0)&i|~s&n)+t[15]+1236535329|0,n+=((r=(r<<22|r>>>10)+s|0)&i|s&~i)+t[1]-165796510|0,i+=((n=(n<<5|n>>>27)+r|0)&s|r&~s)+t[6]-1069501632|0,s+=((i=(i<<9|i>>>23)+n|0)&r|n&~r)+t[11]+643717713|0,r+=((s=(s<<14|s>>>18)+i|0)&n|i&~n)+t[0]-373897302|0,n+=((r=(r<<20|r>>>12)+s|0)&i|s&~i)+t[5]-701558691|0,i+=((n=(n<<5|n>>>27)+r|0)&s|r&~s)+t[10]+38016083|0,s+=((i=(i<<9|i>>>23)+n|0)&r|n&~r)+t[15]-660478335|0,r+=((s=(s<<14|s>>>18)+i|0)&n|i&~n)+t[4]-405537848|0,n+=((r=(r<<20|r>>>12)+s|0)&i|s&~i)+t[9]+568446438|0,i+=((n=(n<<5|n>>>27)+r|0)&s|r&~s)+t[14]-1019803690|0,s+=((i=(i<<9|i>>>23)+n|0)&r|n&~r)+t[3]-187363961|0,r+=((s=(s<<14|s>>>18)+i|0)&n|i&~n)+t[8]+1163531501|0,n+=((r=(r<<20|r>>>12)+s|0)&i|s&~i)+t[13]-1444681467|0,i+=((n=(n<<5|n>>>27)+r|0)&s|r&~s)+t[2]-51403784|0,s+=((i=(i<<9|i>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0,r+=((s=(s<<14|s>>>18)+i|0)&n|i&~n)+t[12]-1926607734|0,n+=((r=(r<<20|r>>>12)+s|0)^s^i)+t[5]-378558|0,i+=((n=(n<<4|n>>>28)+r|0)^r^s)+t[8]-2022574463|0,s+=((i=(i<<11|i>>>21)+n|0)^n^r)+t[11]+1839030562|0,r+=((s=(s<<16|s>>>16)+i|0)^i^n)+t[14]-35309556|0,n+=((r=(r<<23|r>>>9)+s|0)^s^i)+t[1]-1530992060|0,i+=((n=(n<<4|n>>>28)+r|0)^r^s)+t[4]+1272893353|0,s+=((i=(i<<11|i>>>21)+n|0)^n^r)+t[7]-155497632|0,r+=((s=(s<<16|s>>>16)+i|0)^i^n)+t[10]-1094730640|0,n+=((r=(r<<23|r>>>9)+s|0)^s^i)+t[13]+681279174|0,i+=((n=(n<<4|n>>>28)+r|0)^r^s)+t[0]-358537222|0,s+=((i=(i<<11|i>>>21)+n|0)^n^r)+t[3]-722521979|0,r+=((s=(s<<16|s>>>16)+i|0)^i^n)+t[6]+76029189|0,n+=((r=(r<<23|r>>>9)+s|0)^s^i)+t[9]-640364487|0,i+=((n=(n<<4|n>>>28)+r|0)^r^s)+t[12]-421815835|0,s+=((i=(i<<11|i>>>21)+n|0)^n^r)+t[15]+530742520|0,r+=((s=(s<<16|s>>>16)+i|0)^i^n)+t[2]-995338651|0,n+=(s^((r=(r<<23|r>>>9)+s|0)|~i))+t[0]-198630844|0,i+=(r^((n=(n<<6|n>>>26)+r|0)|~s))+t[7]+1126891415|0,s+=(n^((i=(i<<10|i>>>22)+n|0)|~r))+t[14]-1416354905|0,r+=(i^((s=(s<<15|s>>>17)+i|0)|~n))+t[5]-57434055|0,n+=(s^((r=(r<<21|r>>>11)+s|0)|~i))+t[12]+1700485571|0,i+=(r^((n=(n<<6|n>>>26)+r|0)|~s))+t[3]-1894986606|0,s+=(n^((i=(i<<10|i>>>22)+n|0)|~r))+t[10]-1051523|0,r+=(i^((s=(s<<15|s>>>17)+i|0)|~n))+t[1]-2054922799|0,n+=(s^((r=(r<<21|r>>>11)+s|0)|~i))+t[8]+1873313359|0,i+=(r^((n=(n<<6|n>>>26)+r|0)|~s))+t[15]-30611744|0,s+=(n^((i=(i<<10|i>>>22)+n|0)|~r))+t[6]-1560198380|0,r+=(i^((s=(s<<15|s>>>17)+i|0)|~n))+t[13]+1309151649|0,n+=(s^((r=(r<<21|r>>>11)+s|0)|~i))+t[4]-145523070|0,i+=(r^((n=(n<<6|n>>>26)+r|0)|~s))+t[11]-1120210379|0,s+=(n^((i=(i<<10|i>>>22)+n|0)|~r))+t[2]+718787259|0,r=((r+=(i^((s=(s<<15|s>>>17)+i|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+s|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=s+e[2]|0,e[3]=i+e[3]|0}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function s(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function i(e){var t,s,i,o,a,u,l=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=l;t+=64)n(c,r(e.substring(t-64,t)));for(e=e.substring(t-64),s=e.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<s;t+=1)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(n(c,i),t=0;t<16;t+=1)i[t]=0;return o=(o=8*l).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),u=parseInt(o[1],16)||0,i[14]=a,i[15]=u,n(c,i),c}function o(e){var n,r=\"\";for(n=0;n<4;n+=1)r+=t[e>>8*n+4&15]+t[e>>8*n&15];return r}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=o(e[t]);return e.join(\"\")}function u(e){return/[\\u0080-\\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function l(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function c(){this.reset()}return a(i(\"hello\")),\"undefined\"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var s,i,o,a,u=this.byteLength,l=t(n,u),c=u;return r!==e&&(c=t(r,u)),l>c?new ArrayBuffer(0):(s=c-l,i=new ArrayBuffer(s),o=new Uint8Array(i),a=new Uint8Array(this,l,s),o.set(a),i)}}(),c.prototype.append=function(e){return this.appendBinary(u(e)),this},c.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,s=this._buff.length;for(t=64;t<=s;t+=64)n(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},c.prototype.end=function(e){var t,n,r=this._buff,s=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s;t+=1)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(i,s),n=a(this._hash),e&&(n=l(n)),this.reset(),n},c.prototype.reset=function(){return this._buff=\"\",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},c.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},c.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},c.prototype._finish=function(e,t){var r,s,i,o=t;if(e[o>>2]|=128<<(o%4<<3),o>55)for(n(this._hash,e),o=0;o<16;o+=1)e[o]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(r[2],16),i=parseInt(r[1],16)||0,e[14]=s,e[15]=i,n(this._hash,e)},c.hash=function(e,t){return c.hashBinary(u(e),t)},c.hashBinary=function(e,t){var n=a(i(e));return t?l(n):n},c.ArrayBuffer=function(){this.reset()},c.ArrayBuffer.prototype.append=function(e){var t,r,i,o,a,u=(r=this._buff.buffer,i=e,o=!0,(a=new Uint8Array(r.byteLength+i.byteLength)).set(new Uint8Array(r)),a.set(new Uint8Array(i),r.byteLength),o?a:a.buffer),l=u.length;for(this._length+=e.byteLength,t=64;t<=l;t+=64)n(this._hash,s(u.subarray(t-64,t)));return this._buff=t-64<l?new Uint8Array(u.buffer.slice(t-64)):new Uint8Array(0),this},c.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,s=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s;t+=1)i[t>>2]|=r[t]<<(t%4<<3);return this._finish(i,s),n=a(this._hash),e&&(n=l(n)),this.reset(),n},c.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.ArrayBuffer.prototype.getState=function(){var e,t=c.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},c.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,s=new ArrayBuffer(r),i=new Uint8Array(s);for(n=0;n<r;n+=1)i[n]=e.charCodeAt(n);return t?i:s}(e.buff,!0),c.prototype.setState.call(this,e)},c.ArrayBuffer.prototype.destroy=c.prototype.destroy,c.ArrayBuffer.prototype._finish=c.prototype._finish,c.ArrayBuffer.hash=function(e,t){var r=a(function(e){var t,r,i,o,a,u,l=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=l;t+=64)n(c,s(e.subarray(t-64,t)));for(e=t-64<l?e.subarray(t-64):new Uint8Array(0),r=e.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)i[t>>2]|=e[t]<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(n(c,i),t=0;t<16;t+=1)i[t]=0;return o=(o=8*l).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),u=parseInt(o[1],16)||0,i[14]=a,i[15]=u,n(c,i),c}(new Uint8Array(e)));return t?l(r):r},c}()}]).default});\n//# sourceMappingURL=phonebar.js.map\n\n//# sourceURL=webpack:///../node_modules/_jssip-emicnet@1.2.6@jssip-emicnet/dist/phonebar.js?");

/***/ }),

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nlet emic = __webpack_require__(/*! jssip-emicnet/dist/phonebar */ \"../node_modules/_jssip-emicnet@1.2.6@jssip-emicnet/dist/phonebar.js\");\n\nconsole.log(emic.callType);\nemic.getUser('1023', '1023', '02566699734', function (err, data) {\n  if (err) {\n    console.log(err);\n    return;\n  }\n\n  console.log(data);\n});\n\n//# sourceURL=webpack:///./index.js?");

/***/ })

/******/ });