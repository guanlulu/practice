<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>GetUserMedia实例</title>
</head>
<body>
    <video id="video" autoplay></video>
</body>


<script type="text/javascript">
    // var getUserMedia = (
    //     navigator.getUserMedia || 
    //     navigator.webkitGetUserMedia || 
    //     navigator.mozGetUserMedia || 
    //     navigator.msGetUserMedia);

    // getUserMedia.call(navigator, {
    //     video: true,
    //     audio: true
    // }, function(localMediaStream) {
    //     var video = document.getElementById('video');
    //     video.src = window.URL.createObjectURL(localMediaStream);
    //     video.onloadedmetadata = function(e) {
    //         console.log("Label: " + localMediaStream.label);
    //         console.log("AudioTracks" , localMediaStream.getAudioTracks());
    //         console.log("VideoTracks" , localMediaStream.getVideoTracks());
    //     };
    // }, function(e) {
    //     console.log('Reeeejected!', e);
    // });

    // Prefer camera resolution nearest to 1280x720.
    var constraints = { audio: true, video: false }; 

    navigator.mediaDevices.getUserMedia(constraints)
    .then(function(mediaStream) {
        console.log(mediaStream)
        var video = document.querySelector('#video');
        video.srcObject = mediaStream;
        video.onloadedmetadata = function(e) {
            video.play();
        };
    })
    .catch(function(err) { 
        console.log(err.name + ": " + err.message);
    }); 
</script>


</html>
