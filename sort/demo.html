<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div>
        <div style="width: 100px;height: 100px"></div>
    </div>
</body>
<script>
    function pySort(arr,empty) {
        var self = this;
        if(!String.prototype.localeCompare) return null

        var letters ="ABCDEFGHIJKLMNOPQRSTUVWXYZ#".split('');
        self.letters = letters;

        var zh ="啊把测大额发噶哈*级卡啦吗那哦爬器然撒他**哇西呀咋".split('');     //*占位没有i,u,v拼音开头的汉字

        var arrList = []
        arr.map((item) => {
            if(typeof(item) == 'string') {
                arrList.push(item)
            }else if(typeof(item) == 'object'){
                if(item.name) {
                    arrList.push(item.name)
                }
            }else {
                return null
            }
        })

        var result = []
        var curr

        letters.map((i,i_index) => {
            curr = {letter: i, data:[]}
            if(i_index!=26) {
                arrList.map((j) => {
                    var initial = j.charAt(0)     //截取第一个字符
                    if(j.charAt(0) == i.toLowerCase()) {   //首字符是英文的
                        curr.data.push(j)
                    }else if(zh[i_index]!='*' && self.isChinese(initial)) {  //判断是否是无汉字,是否是中文
                        if(initial.localeCompare(zh[i_index]) >= 0 && (!zh[i_index+1] || initial.localeCompare(zh[i_index+1]) < 0)) {   //判断中文字符在哪一个类别
                            curr.data.push(j)
                        }
                    }
                })
            }else {
                arrList.map((k) => {
                    var ini = k.charAt(0)           //截取第一个字符
                    if(!self.isChar(ini) && !self.isChinese(ini)){
                        curr.data.push(k)
                    }
                })
            }

            if(empty || curr.data.length) {
                result.push(curr);
                curr.data.sort(function(a,b){
                    return a.localeCompare(b);       //排序,英文排序,汉字排在英文后面 (有问题)
                })
            }

        })

        return result

       
    }

    function isChinese(temp) {
            var re=/[^\u4E00-\u9FA5]/;
            if (re.test(temp)){return false  }
            return true 
    }

    function isChar(char) {
        var reg = /[A-Za-z]/;
        if (!reg.test(char)){return false }
        return true 
    }

    var res = pySort(['除了导出外都能查看的','菠萝饮料可口可乐集团','丝塔芙','管理技能组工作的','祝天祝地管理员','丝丝入扣','白鸽','1213124','baise','choice','user','测试'])
    console.log(res)
</script>
</html>