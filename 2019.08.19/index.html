<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
</body>
<!-- <script src="./index.js"></script> -->
<script src="https://unpkg.com/jssip-emicnet/dist/phonebar.js"></script>
<script>
    console.log(phonebar)
    phonebar.log('正在获取用户信息。。。')
    phonebar.getUser(
        1023,
        '1023', //密码需要加引号
        '02566699734',
        (err, res) => {
            if (!err) {
                phonebar.log('获取用户信息,包含用户信息和组信息')
                let memberInfo = res
                phonebar.log('用户信息', memberInfo.userData)
                for (const group of memberInfo.inGroups) {
                    phonebar.log('组信息', group)
                    let gid = group.id
                }
                let params = {
                    un: '1023',
                    switchnumber: '02566699734',
                    pwd: '1023',
                    gid: '0',
                    callintype: '2',
                    socketUri: 'wss://s01.testsbc.com:9060',
                    remoteAudio: 'peeraudio'
                }
                let eventCallback = {
                    register: function(res) {
                        console.log(res)
                    },
                    callEvent: function(type,data) {
                        console.log(type,data)
                    },
                    kickedOffLine: function(type,data) {
                        console.log(type,data)
                    }
                }
                phonebar.init(params,eventCallback)
            } else {
                phonebar.log('获取用户信息失败')
            }
        }
    )
</script>
</html>